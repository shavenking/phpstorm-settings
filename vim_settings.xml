<application>
  <component name="VimSettings">
    <state version="4" enabled="true" />
    <globalmarks />
    <filemarks>
      <file name="$USER_HOME$/Code/idx/frontend/public/style/scss/paymentAndBudget.scss" timestamp="1505548651416">
        <mark key="'" line="662" column="0" />
        <mark key="[" line="639" column="0" />
        <mark key="]" line="639" column="0" />
        <mark key="." line="639" column="0" />
        <mark key="^" line="637" column="5" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/resources/views/live-videos/show.blade.php" timestamp="1505792826281">
        <mark key="'" line="77" column="103" />
        <mark key="[" line="38" column="23" />
        <mark key="]" line="38" column="29" />
        <mark key="." line="38" column="29" />
        <mark key="^" line="38" column="29" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/ui-route-views/get-organized/guest-list/custom-report.html" timestamp="1505631616995">
        <mark key="[" line="79" column="0" />
        <mark key="]" line="79" column="0" />
        <mark key="." line="79" column="0" />
        <mark key="^" line="74" column="49" />
      </file>
      <file name="$USER_HOME$/Code/project-boomer/resources/views/workflows/createWork.blade.php" timestamp="1496838650279">
        <mark key="'" line="19" column="28" />
        <mark key="[" line="35" column="41" />
        <mark key="]" line="35" column="45" />
        <mark key="." line="35" column="45" />
        <mark key="^" line="35" column="45" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/app/TransactionAmountGuesser.php" timestamp="1498977476845">
        <mark key="'" line="6" column="0" />
        <mark key="[" line="15" column="40" />
        <mark key="]" line="15" column="46" />
        <mark key="^" line="15" column="46" />
        <mark key="." line="15" column="46" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/app/Http/Controllers/FacebookController.php" timestamp="1505794315173">
        <mark key="'" line="11" column="0" />
        <mark key="[" line="55" column="53" />
        <mark key="]" line="56" column="53" />
        <mark key="." line="56" column="53" />
        <mark key="^" line="56" column="53" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/app/Http/Kernel.php" timestamp="1504534095708">
        <mark key="'" line="32" column="0" />
        <mark key="[" line="58" column="76" />
        <mark key="]" line="58" column="76" />
        <mark key="." line="58" column="76" />
        <mark key="^" line="58" column="76" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/app/LiveVideo.php" timestamp="1505357228936">
        <mark key="[" line="17" column="28" />
        <mark key="]" line="21" column="66" />
        <mark key="." line="21" column="66" />
        <mark key="^" line="21" column="66" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php" timestamp="1500641247877">
        <mark key="'" line="2012" column="20" />
        <mark key="[" line="2002" column="5" />
        <mark key="]" line="2002" column="5" />
        <mark key="." line="2002" column="5" />
        <mark key="^" line="2002" column="21" />
      </file>
      <file name="$USER_HOME$/go/src/github.com/shavenking/go.shavenking.me/static/index.html" timestamp="1503747967203">
        <mark key="'" line="0" column="0" />
        <mark key="[" line="0" column="0" />
        <mark key="]" line="2" column="17" />
        <mark key="." line="2" column="17" />
        <mark key="^" line="2" column="17" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/lib/NaturalLanguageProcessor/Token.php" timestamp="1498976232971">
        <mark key="'" line="22" column="20" />
        <mark key="[" line="49" column="8" />
        <mark key="]" line="49" column="31" />
        <mark key="^" line="49" column="31" />
        <mark key="." line="49" column="31" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/style/scss/idx-common.scss" timestamp="1505550060276">
        <mark key="'" line="15" column="1" />
        <mark key="[" line="93" column="0" />
        <mark key="]" line="93" column="0" />
        <mark key="^" line="92" column="13" />
        <mark key="." line="93" column="0" />
      </file>
      <file name="$USER_HOME$/Code/idx/ecosystem.config.js" timestamp="1503816895103">
        <mark key="'" line="0" column="0" />
        <mark key="[" line="34" column="20" />
        <mark key="]" line="34" column="20" />
        <mark key="." line="34" column="20" />
        <mark key="^" line="2" column="0" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/.env" timestamp="1499484606553">
        <mark key="'" line="23" column="0" />
        <mark key="[" line="4" column="14" />
        <mark key="]" line="4" column="17" />
        <mark key="^" line="4" column="17" />
        <mark key="." line="4" column="17" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/app/Guesser/TagGuesser.php" timestamp="1500553264368">
        <mark key="'" line="27" column="20" />
        <mark key="[" line="15" column="47" />
        <mark key="]" line="15" column="45" />
        <mark key="^" line="15" column="45" />
        <mark key="." line="15" column="45" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/ui-route-views/modal-views/guest-list-export-modal.html" timestamp="1505542564997">
        <mark key="[" line="43" column="0" />
        <mark key="]" line="43" column="0" />
        <mark key="." line="43" column="0" />
        <mark key="^" line="39" column="61" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/database/seeds/TransactionTypeSeeder.php" timestamp="1498739292258">
        <mark key="'" line="19" column="33" />
        <mark key="[" line="15" column="0" />
        <mark key="]" line="23" column="8" />
        <mark key="^" line="19" column="54" />
        <mark key="." line="19" column="54" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/database/migrations/2017_09_05_113322_create_bids_table.php" timestamp="1505100338278">
        <mark key="'" line="0" column="0" />
        <mark key="[" line="27" column="20" />
        <mark key="]" line="27" column="28" />
        <mark key="." line="27" column="28" />
        <mark key="^" line="27" column="28" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/.env.example" timestamp="1498742383869">
        <mark key="'" line="0" column="0" />
        <mark key="[" line="34" column="13" />
        <mark key="]" line="34" column="12" />
        <mark key="^" line="34" column="12" />
        <mark key="." line="34" column="12" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/resources/views/bids/plus-one-success.blade.php" timestamp="1505795837553">
        <mark key="[" line="0" column="49" />
        <mark key="]" line="0" column="49" />
        <mark key="." line="0" column="49" />
        <mark key="^" line="0" column="49" />
      </file>
      <file name="$USER_HOME$/Code/project-boomer/app/Http/routes.php" timestamp="1496666957879">
        <mark key="'" line="6" column="7" />
        <mark key="[" line="6" column="46" />
        <mark key="]" line="6" column="45" />
        <mark key="^" line="6" column="45" />
        <mark key="." line="6" column="45" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/app/TransactionTypeGuesser.php" timestamp="1500082158721">
        <mark key="'" line="39" column="4" />
        <mark key="[" line="6" column="28" />
        <mark key="]" line="6" column="0" />
        <mark key="." line="6" column="0" />
        <mark key="^" line="6" column="0" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/ui-route-views/get-organized/guest-list/menu-report.html" timestamp="1505213038471">
        <mark key="[" line="81" column="80" />
        <mark key="]" line="81" column="81" />
        <mark key="^" line="81" column="81" />
        <mark key="." line="81" column="81" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/app/Exceptions/Handler.php" timestamp="1500380275602">
        <mark key="'" line="70" column="0" />
        <mark key="[" line="37" column="12" />
        <mark key="]" line="37" column="18" />
        <mark key="." line="37" column="18" />
        <mark key="^" line="37" column="18" />
      </file>
      <file name="$USER_HOME$/Code/ShortestPath/Map.php" timestamp="1501913319827">
        <mark key="'" line="56" column="47" />
        <mark key="[" line="24" column="16" />
        <mark key="]" line="24" column="19" />
        <mark key="." line="24" column="19" />
        <mark key="^" line="24" column="19" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/tests/Feature/PageNotifyTest.php" timestamp="1504953431258">
        <mark key="'" line="128" column="14" />
        <mark key="[" line="104" column="0" />
        <mark key="]" line="121" column="45" />
        <mark key="." line="93" column="47" />
        <mark key="^" line="141" column="32" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/.env" timestamp="1505734924969">
        <mark key="'" line="28" column="19" />
        <mark key="[" line="1" column="8" />
        <mark key="]" line="1" column="7" />
        <mark key="." line="1" column="7" />
        <mark key="^" line="1" column="7" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/ui-route-views/modal-views/household-detail.html" timestamp="1505550271137">
        <mark key="'" line="56" column="39" />
        <mark key="[" line="120" column="27" />
        <mark key="]" line="120" column="27" />
        <mark key="." line="120" column="27" />
        <mark key="^" line="118" column="44" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/javascripts/directive/event-modal-directive.js" timestamp="1505475772375">
        <mark key="'" line="107" column="0" />
        <mark key="[" line="85" column="78" />
        <mark key="]" line="85" column="79" />
        <mark key="." line="85" column="79" />
        <mark key="^" line="85" column="78" />
      </file>
      <file name="$USER_HOME$/CodeBK/durian2/src/BB/DurianBundle/Entity/RemitEntry.php" timestamp="1496456340604">
        <mark key="'" line="39" column="5" />
        <mark key="[" line="65" column="78" />
        <mark key="]" line="65" column="88" />
        <mark key="." line="65" column="88" />
        <mark key="^" line="65" column="88" />
      </file>
      <file name="$USER_HOME$/Code/project-boomer/resources/assets/js/components/mainflow-type-select.vue" timestamp="1496839270182">
        <mark key="'" line="0" column="0" />
        <mark key="[" line="7" column="0" />
        <mark key="]" line="7" column="38" />
        <mark key="." line="7" column="0" />
        <mark key="^" line="23" column="43" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/tests/Feature/BidTest.php" timestamp="1504954317099">
        <mark key="[" line="108" column="28" />
        <mark key="]" line="108" column="52" />
        <mark key="." line="108" column="52" />
        <mark key="^" line="108" column="52" />
      </file>
      <file name="$USER_HOME$/Code/project-boomer/resources/views/works/create.blade.php" timestamp="1496838835309">
        <mark key="'" line="44" column="0" />
        <mark key="[" line="26" column="13" />
        <mark key="]" line="26" column="25" />
        <mark key="." line="26" column="25" />
        <mark key="^" line="26" column="25" />
      </file>
      <file name="$USER_HOME$/Code/ShortestPath/main.php" timestamp="1501912117531">
        <mark key="'" line="53" column="4" />
        <mark key="[" line="57" column="0" />
        <mark key="]" line="57" column="0" />
        <mark key="." line="57" column="0" />
        <mark key="^" line="47" column="44" />
      </file>
      <file name="$USER_HOME$/Code/ShortestPath/readme.md" timestamp="1501913947781">
        <mark key="'" line="2" column="24" />
        <mark key="[" line="24" column="3" />
        <mark key="]" line="39" column="78" />
        <mark key="^" line="39" column="78" />
        <mark key="." line="39" column="78" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/app/Http/Controllers/PlusOneQuotaController.php" timestamp="1505799712370">
        <mark key="a" line="70" column="0" />
        <mark key="'" line="52" column="3" />
        <mark key="[" line="40" column="8" />
        <mark key="]" line="48" column="11" />
        <mark key="^" line="39" column="7" />
        <mark key="." line="40" column="0" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/app/Bid.php" timestamp="1505718851610">
        <mark key="'" line="18" column="32" />
        <mark key="[" line="27" column="5" />
        <mark key="]" line="31" column="49" />
        <mark key="." line="31" column="49" />
        <mark key="^" line="31" column="49" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/database/migrations/2017_09_06_015007_create_live_videos_table.php" timestamp="1505715721331">
        <mark key="'" line="6" column="6" />
        <mark key="[" line="18" column="0" />
        <mark key="]" line="18" column="55" />
        <mark key="." line="21" column="28" />
        <mark key="^" line="21" column="28" />
      </file>
      <file name="$USER_HOME$/go/src/gowiki/wiki.go" timestamp="1503556217281">
        <mark key="'" line="85" column="0" />
        <mark key="[" line="7" column="0" />
        <mark key="]" line="7" column="0" />
        <mark key="^" line="66" column="8" />
        <mark key="." line="7" column="0" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/app/Http/Controllers/OrderController.php" timestamp="1505874689818">
        <mark key="[" line="78" column="17" />
        <mark key="]" line="78" column="17" />
        <mark key="." line="78" column="17" />
        <mark key="^" line="81" column="25" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/app/Http/Controllers/DashboardController.php" timestamp="1504924335211">
        <mark key="'" line="35" column="0" />
        <mark key="[" line="21" column="23" />
        <mark key="]" line="21" column="24" />
        <mark key="." line="21" column="24" />
        <mark key="^" line="21" column="22" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/resources/views/get-token.blade.php" timestamp="1504250840741">
        <mark key="'" line="1" column="13" />
        <mark key="[" line="7" column="11" />
        <mark key="]" line="7" column="12" />
        <mark key="^" line="7" column="12" />
        <mark key="." line="7" column="12" />
      </file>
      <file name="$USER_HOME$/CodeBK/durian2/src/BB/DurianBundle/Controller/RemitController.php" timestamp="1496416637178">
        <mark key="'" line="54" column="5" />
        <mark key="[" line="98" column="0" />
        <mark key="]" line="98" column="0" />
        <mark key="." line="98" column="0" />
        <mark key="^" line="98" column="6" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/ui-route-views/get-organized/guest-list.html" timestamp="1505551197378">
        <mark key="[" line="187" column="33" />
        <mark key="]" line="187" column="55" />
        <mark key="." line="193" column="20" />
        <mark key="^" line="193" column="19" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/resources/views/bids/stop.blade.php" timestamp="1505287968311">
        <mark key="[" line="0" column="0" />
        <mark key="]" line="0" column="35" />
        <mark key="." line="1" column="0" />
        <mark key="^" line="0" column="35" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/ui-route-views/budget/budget.new.html" timestamp="1505544274707">
        <mark key="'" line="29" column="104" />
        <mark key="[" line="93" column="0" />
        <mark key="]" line="97" column="30" />
        <mark key="." line="95" column="52" />
        <mark key="^" line="95" column="52" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/tests/Unit/GuesserTest.php" timestamp="1500166987806">
        <mark key="'" line="2" column="0" />
        <mark key="[" line="6" column="0" />
        <mark key="]" line="6" column="0" />
        <mark key="." line="6" column="0" />
        <mark key="^" line="25" column="28" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/routes/web.php" timestamp="1505794777677">
        <mark key="'" line="13" column="0" />
        <mark key="[" line="29" column="72" />
        <mark key="]" line="29" column="84" />
        <mark key="." line="33" column="150" />
        <mark key="^" line="33" column="150" />
      </file>
      <file name="$USER_HOME$/Code/idx/.gitlab-ci.yml" timestamp="1504412138686">
        <mark key="'" line="3" column="0" />
        <mark key="[" line="65" column="28" />
        <mark key="]" line="65" column="31" />
        <mark key="." line="65" column="31" />
        <mark key="^" line="65" column="31" />
      </file>
      <file name="$USER_HOME$/CodeBK/durian2/src/BB/DurianBundle/Controller/UserController.php" timestamp="1496550990278">
        <mark key="'" line="35" column="6" />
        <mark key="[" line="6092" column="44" />
        <mark key="]" line="6092" column="42" />
        <mark key="." line="6092" column="42" />
        <mark key="^" line="6092" column="42" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/app/Http/Controllers/WebhookController.php" timestamp="1500697007008">
        <mark key="'" line="126" column="20" />
        <mark key="[" line="129" column="48" />
        <mark key="]" line="129" column="60" />
        <mark key="." line="129" column="60" />
        <mark key="^" line="129" column="60" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/style/scss/events.scss" timestamp="1505549529366">
        <mark key="[" line="0" column="0" />
        <mark key="]" line="0" column="26" />
        <mark key="^" line="40" column="5" />
        <mark key="." line="34" column="32" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/ui-route-views/get-organized/guest-list/flight-report.html" timestamp="1505213048208">
        <mark key="[" line="50" column="80" />
        <mark key="]" line="50" column="81" />
        <mark key="^" line="50" column="81" />
        <mark key="." line="50" column="81" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/vendor/laravel/framework/src/Illuminate/Database/Connection.php" timestamp="1505364815772">
        <mark key="[" line="331" column="19" />
        <mark key="]" line="331" column="19" />
        <mark key="^" line="331" column="21" />
        <mark key="." line="331" column="19" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/app/Order.php" timestamp="1505372696554">
        <mark key="[" line="10" column="4" />
        <mark key="]" line="12" column="43" />
        <mark key="." line="12" column="43" />
        <mark key="^" line="12" column="43" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/app/Http/Controllers/BidController.php" timestamp="1505794994893">
        <mark key="'" line="32" column="68" />
        <mark key="[" line="44" column="0" />
        <mark key="]" line="48" column="21" />
        <mark key="." line="32" column="68" />
        <mark key="^" line="32" column="68" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/app/Http/Controllers/PlusOneDurationController.php" timestamp="1505184921331">
        <mark key="'" line="14" column="34" />
        <mark key="[" line="74" column="37" />
        <mark key="]" line="74" column="52" />
        <mark key="." line="74" column="52" />
        <mark key="^" line="74" column="52" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/database/factories/BidFactory.php" timestamp="1504941059572">
        <mark key="'" line="18" column="30" />
        <mark key="[" line="65" column="25" />
        <mark key="]" line="65" column="25" />
        <mark key="." line="65" column="25" />
        <mark key="^" line="65" column="25" />
      </file>
      <file name="$USER_HOME$/Code/project-boomer/app/Http/Routes/Workflows.php" timestamp="1496757828281">
        <mark key="'" line="13" column="30" />
        <mark key="[" line="14" column="56" />
        <mark key="]" line="14" column="135" />
        <mark key="^" line="14" column="135" />
        <mark key="." line="14" column="135" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/app/Delivery.php" timestamp="1505372668362">
        <mark key="[" line="12" column="9" />
        <mark key="]" line="12" column="45" />
        <mark key="." line="12" column="45" />
        <mark key="^" line="12" column="45" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/database/migrations/2017_09_06_040105_create_pages_table.php" timestamp="1504670493374">
        <mark key="'" line="1" column="0" />
        <mark key="[" line="18" column="42" />
        <mark key="]" line="18" column="53" />
        <mark key="^" line="18" column="53" />
        <mark key="." line="18" column="53" />
      </file>
      <file name="$USER_HOME$/Code/ShortestPath/index.php" timestamp="1501913548946">
        <mark key="'" line="10" column="15" />
        <mark key="[" line="6" column="5" />
        <mark key="]" line="6" column="6" />
        <mark key="^" line="83" column="60" />
        <mark key="." line="6" column="6" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/ui-route-views/modal-views/budget-edit-modal.html" timestamp="1505548620275">
        <mark key="[" line="21" column="52" />
        <mark key="]" line="21" column="52" />
        <mark key="." line="21" column="52" />
        <mark key="^" line="20" column="66" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/tests/Feature/TelegramWebhookTest.php" timestamp="1500697049517">
        <mark key="'" line="259" column="0" />
        <mark key="[" line="321" column="12" />
        <mark key="]" line="321" column="13" />
        <mark key="." line="321" column="13" />
        <mark key="^" line="322" column="0" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/app/PlusOneQuota.php" timestamp="1505715785522">
        <mark key="[" line="8" column="4" />
        <mark key="]" line="8" column="27" />
        <mark key="." line="8" column="27" />
        <mark key="^" line="8" column="27" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/app/Jobs/FindBidWinners.php" timestamp="1505793283897">
        <mark key="'" line="18" column="4" />
        <mark key="[" line="123" column="38" />
        <mark key="]" line="124" column="33" />
        <mark key="." line="124" column="33" />
        <mark key="^" line="124" column="33" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/app/Http/Controllers/PageController.php" timestamp="1504682525701">
        <mark key="'" line="48" column="84" />
        <mark key="[" line="48" column="0" />
        <mark key="]" line="48" column="86" />
        <mark key="." line="36" column="61" />
        <mark key="^" line="36" column="61" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/app/Page.php" timestamp="1505189416993">
        <mark key="[" line="12" column="39" />
        <mark key="]" line="12" column="50" />
        <mark key="^" line="12" column="50" />
        <mark key="." line="12" column="50" />
      </file>
      <file name="$USER_HOME$/CodeBK/durian2/src/BB/DurianBundle/Resources/doc/exception_map.md" timestamp="1496474022024">
        <mark key="'" line="345" column="28" />
        <mark key="[" line="19" column="39" />
        <mark key="]" line="19" column="49" />
        <mark key="^" line="19" column="49" />
        <mark key="." line="19" column="49" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/app/Jobs/PageNotify.php" timestamp="1505720467288">
        <mark key="'" line="56" column="0" />
        <mark key="[" line="72" column="0" />
        <mark key="]" line="72" column="0" />
        <mark key="." line="72" column="0" />
        <mark key="^" line="66" column="56" />
      </file>
      <file name="$USER_HOME$/Code/project-boomer/resources/assets/js/main.js" timestamp="1496753397779">
        <mark key="'" line="3" column="24" />
        <mark key="[" line="30" column="23" />
        <mark key="]" line="31" column="26" />
        <mark key="." line="31" column="26" />
        <mark key="^" line="31" column="26" />
      </file>
      <file name="$USER_HOME$/go/src/github.com/shavenking/go.shavenking.me/main.go" timestamp="1503891121748">
        <mark key="'" line="28" column="5" />
        <mark key="[" line="24" column="13" />
        <mark key="]" line="26" column="15" />
        <mark key="." line="26" column="15" />
        <mark key="^" line="26" column="15" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/database/factories/TelegramFactory.php" timestamp="1500291565183">
        <mark key="'" line="97" column="0" />
        <mark key="[" line="3" column="0" />
        <mark key="]" line="3" column="0" />
        <mark key="." line="3" column="0" />
        <mark key="^" line="104" column="22" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/tests/Feature/UserTest.php" timestamp="1499581078964">
        <mark key="'" line="40" column="4" />
        <mark key="[" line="24" column="40" />
        <mark key="]" line="24" column="40" />
        <mark key="^" line="24" column="20" />
        <mark key="." line="24" column="40" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/ui-route-views/get-organized/guest-list/seating-report.html" timestamp="1505212817341">
        <mark key="[" line="69" column="89" />
        <mark key="]" line="69" column="90" />
        <mark key="^" line="69" column="89" />
        <mark key="." line="69" column="90" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/ui-route-views/get-organized/guest-list/airline-report.html" timestamp="1505213052221">
        <mark key="[" line="66" column="80" />
        <mark key="]" line="66" column="81" />
        <mark key="^" line="66" column="81" />
        <mark key="." line="66" column="81" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/database/seeds/PlatformSeeder.php" timestamp="1498739484407">
        <mark key="'" line="19" column="28" />
        <mark key="[" line="21" column="53" />
        <mark key="]" line="21" column="57" />
        <mark key="." line="21" column="57" />
        <mark key="^" line="21" column="57" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/app/PlatformFactory.php" timestamp="1498739519189">
        <mark key="'" line="13" column="10" />
        <mark key="[" line="39" column="29" />
        <mark key="]" line="39" column="46" />
        <mark key="." line="39" column="46" />
        <mark key="^" line="39" column="46" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/javascripts/directive/add-new-event-modal-directive.js" timestamp="1505302609177">
        <mark key="'" line="66" column="36" />
        <mark key="[" line="9" column="53" />
        <mark key="]" line="9" column="53" />
        <mark key="." line="9" column="53" />
        <mark key="^" line="30" column="7" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/app/User.php" timestamp="1498738289747">
        <mark key="'" line="7" column="6" />
        <mark key="[" line="28" column="0" />
        <mark key="]" line="28" column="0" />
        <mark key="^" line="28" column="0" />
        <mark key="." line="28" column="0" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/tests/Feature/DashboardTest.php" timestamp="1504924378006">
        <mark key="'" line="21" column="29" />
        <mark key="[" line="43" column="42" />
        <mark key="]" line="43" column="62" />
        <mark key="." line="43" column="62" />
        <mark key="^" line="43" column="62" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/vendor/laravel/framework/src/Illuminate/Database/Connection.php" timestamp="1500554948624">
        <mark key="'" line="20" column="6" />
        <mark key="[" line="443" column="0" />
        <mark key="]" line="443" column="0" />
        <mark key="^" line="443" column="3" />
        <mark key="." line="443" column="0" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/ui-route-views/modal-views/event-modal.html" timestamp="1505391280661">
        <mark key="'" line="41" column="34" />
        <mark key="[" line="48" column="68" />
        <mark key="]" line="48" column="78" />
        <mark key="^" line="48" column="78" />
        <mark key="." line="48" column="78" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/resources/views/bids/winners.blade.php" timestamp="1505288440539">
        <mark key="[" line="0" column="65" />
        <mark key="]" line="0" column="65" />
        <mark key="." line="0" column="65" />
        <mark key="^" line="0" column="65" />
      </file>
      <file name="$USER_HOME$/Code/project-pidgey-web/scripts/table/index.js" timestamp="1497083235137">
        <mark key="'" line="6" column="38" />
        <mark key="[" line="0" column="38" />
        <mark key="]" line="1" column="0" />
        <mark key="^" line="1" column="0" />
        <mark key="." line="1" column="0" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/app/Jobs/FindPlusOneWinners.php" timestamp="1505186295093">
        <mark key="'" line="43" column="16" />
        <mark key="[" line="96" column="75" />
        <mark key="]" line="96" column="85" />
        <mark key="." line="96" column="85" />
        <mark key="^" line="96" column="85" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php" timestamp="1505364919379">
        <mark key="[" line="1693" column="35" />
        <mark key="]" line="1686" column="37" />
        <mark key="." line="1686" column="37" />
        <mark key="^" line="1686" column="37" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/app/Services/Facebook.php" timestamp="1505723882967">
        <mark key="'" line="9" column="6" />
        <mark key="[" line="36" column="8" />
        <mark key="]" line="36" column="19" />
        <mark key="^" line="36" column="19" />
        <mark key="." line="36" column="19" />
      </file>
      <file name="$USER_HOME$/Code/project-boomer/resources/assets/js/components/workflow-nodes.vue" timestamp="1496838219933">
        <mark key="'" line="6" column="9" />
        <mark key="[" line="12" column="64" />
        <mark key="]" line="12" column="64" />
        <mark key="^" line="12" column="70" />
        <mark key="." line="12" column="64" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/database/migrations/2017_09_14_054407_create_orders_table.php" timestamp="1505791996073">
        <mark key="[" line="18" column="49" />
        <mark key="]" line="19" column="42" />
        <mark key="^" line="19" column="42" />
        <mark key="." line="19" column="42" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/style/scss/guest-household-detail.scss" timestamp="1505550387824">
        <mark key="'" line="0" column="0" />
        <mark key="[" line="288" column="28" />
        <mark key="]" line="289" column="23" />
        <mark key="." line="289" column="23" />
        <mark key="^" line="289" column="23" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/ui-route-views/modal-views/travel-accommodations.html" timestamp="1505542820859">
        <mark key="[" line="284" column="54" />
        <mark key="]" line="284" column="54" />
        <mark key="." line="284" column="54" />
        <mark key="^" line="284" column="53" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/resources/views/bids/plus-one-link.blade.php" timestamp="1505795181724">
        <mark key="[" line="0" column="30" />
        <mark key="]" line="1" column="0" />
        <mark key="." line="1" column="0" />
        <mark key="^" line="1" column="0" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/app/PlusOneDuration.php" timestamp="1505184293533">
        <mark key="[" line="14" column="52" />
        <mark key="]" line="18" column="43" />
        <mark key="^" line="18" column="43" />
        <mark key="." line="18" column="43" />
      </file>
      <file name="$USER_HOME$/Code/project-boomer/app/Http/Controllers/WorkflowsController.php" timestamp="1496838914531">
        <mark key="'" line="221" column="103" />
        <mark key="[" line="224" column="125" />
        <mark key="]" line="224" column="156" />
        <mark key="." line="224" column="156" />
        <mark key="^" line="224" column="156" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/lib/GoogleNaturalLanguageProcessor.php" timestamp="1498967571543">
        <mark key="'" line="35" column="12" />
        <mark key="[" line="17" column="42" />
        <mark key="]" line="17" column="24" />
        <mark key="." line="17" column="24" />
        <mark key="^" line="17" column="24" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/style/scss/wedding-detail.scss" timestamp="1505547124978">
        <mark key="'" line="82" column="16" />
        <mark key="[" line="0" column="0" />
        <mark key="]" line="0" column="26" />
        <mark key="." line="11" column="6" />
        <mark key="^" line="11" column="6" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/resources/views/bids/start.blade.php" timestamp="1505287184847">
        <mark key="[" line="3" column="5" />
        <mark key="]" line="3" column="4" />
        <mark key="^" line="3" column="4" />
        <mark key="." line="3" column="4" />
      </file>
      <file name="$USER_HOME$/CodeBK/durian2/src/BB/DurianBundle/Repository/MerchantStatRepository.php" timestamp="1496456015754">
        <mark key="'" line="37" column="12" />
        <mark key="[" line="58" column="0" />
        <mark key="]" line="58" column="0" />
        <mark key="." line="58" column="0" />
        <mark key="^" line="58" column="0" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/config/app.php" timestamp="1504574898753">
        <mark key="'" line="152" column="8" />
        <mark key="[" line="180" column="0" />
        <mark key="]" line="180" column="0" />
        <mark key="^" line="179" column="51" />
        <mark key="." line="180" column="0" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/ui-route-views/plan/events.html" timestamp="1505548768046">
        <mark key="'" line="54" column="20" />
        <mark key="[" line="11" column="37" />
        <mark key="]" line="11" column="54" />
        <mark key="." line="11" column="37" />
        <mark key="^" line="83" column="20" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/app/TransactionTypeFactory.php" timestamp="1499349035476">
        <mark key="'" line="59" column="22" />
        <mark key="[" line="59" column="38" />
        <mark key="]" line="59" column="44" />
        <mark key="." line="59" column="44" />
        <mark key="^" line="59" column="44" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/ui-route-views/get-organized/guest-list/sub-menu.html" timestamp="1505550823375">
        <mark key="'" line="2" column="40" />
        <mark key="[" line="10" column="0" />
        <mark key="]" line="14" column="10" />
        <mark key="." line="4" column="44" />
        <mark key="^" line="30" column="29" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/ui-route-views/my-account/profile-edit.html" timestamp="1504266600696">
        <mark key="'" line="0" column="12" />
        <mark key="[" line="18" column="82" />
        <mark key="]" line="18" column="82" />
        <mark key="." line="18" column="82" />
        <mark key="^" line="18" column="102" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/database/migrations/2017_06_28_115135_create_platform_user_table.php" timestamp="1499598716257">
        <mark key="'" line="20" column="0" />
        <mark key="[" line="16" column="0" />
        <mark key="]" line="20" column="32" />
        <mark key="." line="19" column="57" />
        <mark key="^" line="19" column="57" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/database/migrations/2017_09_11_023355_create_plus_one_durations_table.php" timestamp="1505100373041">
        <mark key="[" line="21" column="20" />
        <mark key="]" line="21" column="28" />
        <mark key="^" line="21" column="28" />
        <mark key="." line="21" column="28" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/app/Providers/FacebookServiceProvider.php" timestamp="1504577386211">
        <mark key="'" line="4" column="4" />
        <mark key="[" line="25" column="27" />
        <mark key="]" line="25" column="29" />
        <mark key="." line="25" column="29" />
        <mark key="^" line="25" column="29" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/resources/views/orders/create-plus-one.blade.php" timestamp="1505800043168">
        <mark key="'" line="17" column="8" />
        <mark key="[" line="46" column="12" />
        <mark key="]" line="55" column="23" />
        <mark key="." line="45" column="0" />
      </file>
      <file name="$USER_HOME$/Code/idx/backend/routes/rEvents.js" timestamp="1505820448874">
        <mark key="[" line="43" column="2" />
        <mark key="]" line="42" column="1" />
        <mark key="." line="42" column="1" />
        <mark key="^" line="42" column="1" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/database/migrations/2017_09_14_033656_create_deliveries_table.php" timestamp="1505456961067">
        <mark key="[" line="40" column="33" />
        <mark key="]" line="42" column="49" />
        <mark key="." line="42" column="49" />
        <mark key="^" line="42" column="49" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/tests/Feature/IncomeTest.php" timestamp="1500552781309">
        <mark key="'" line="25" column="7" />
        <mark key="[" line="51" column="12" />
        <mark key="]" line="51" column="12" />
        <mark key="^" line="51" column="72" />
        <mark key="." line="51" column="12" />
      </file>
      <file name="/Dummy.txt" timestamp="1505819959388">
        <mark key="[" line="0" column="0" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/routes/api.php" timestamp="1500121142414">
        <mark key="'" line="2" column="0" />
        <mark key="[" line="5" column="31" />
        <mark key="]" line="5" column="46" />
        <mark key="." line="5" column="46" />
        <mark key="^" line="5" column="46" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/ui-route-views/directive-templates/submenu-report-menu.html" timestamp="1505549398484">
        <mark key="[" line="2" column="0" />
        <mark key="]" line="6" column="10" />
        <mark key="." line="5" column="26" />
        <mark key="^" line="5" column="26" />
      </file>
      <file name="$USER_HOME$/Code/idx/backend/app.js" timestamp="1505817448866">
        <mark key="'" line="95" column="27" />
        <mark key="[" line="37" column="48" />
        <mark key="]" line="38" column="41" />
        <mark key="^" line="38" column="41" />
        <mark key="." line="38" column="41" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/javascripts/ang-app.js" timestamp="1504765778077">
        <mark key="'" line="233" column="92" />
        <mark key="[" line="0" column="210" />
        <mark key="]" line="0" column="221" />
        <mark key="." line="0" column="221" />
        <mark key="^" line="0" column="221" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/tests/Feature/ExpenseTest.php" timestamp="1499581166582">
        <mark key="'" line="45" column="16" />
        <mark key="[" line="93" column="42" />
        <mark key="]" line="93" column="42" />
        <mark key="^" line="93" column="20" />
        <mark key="." line="93" column="42" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/resources/views/dashboard.blade.php" timestamp="1505795358062">
        <mark key="'" line="134" column="180" />
        <mark key="[" line="329" column="0" />
        <mark key="]" line="329" column="24" />
        <mark key="." line="329" column="24" />
        <mark key="^" line="318" column="26" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/database/migrations/2017_09_18_062133_create_plus_one_quotas_table.php" timestamp="1505717446063">
        <mark key="'" line="6" column="6" />
        <mark key="[" line="23" column="0" />
        <mark key="]" line="23" column="0" />
        <mark key="." line="23" column="0" />
        <mark key="^" line="22" column="53" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/javascripts/controllers/paged-table-controller.js" timestamp="1504767101132">
        <mark key="'" line="2" column="76" />
        <mark key="[" line="52" column="26" />
        <mark key="]" line="52" column="26" />
        <mark key="^" line="52" column="34" />
        <mark key="." line="52" column="26" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/database/migrations/2017_07_09_111108_create_pending_messages_table.php" timestamp="1499599127230">
        <mark key="'" line="33" column="0" />
        <mark key="[" line="17" column="0" />
        <mark key="]" line="19" column="35" />
        <mark key="." line="19" column="35" />
        <mark key="^" line="19" column="35" />
      </file>
      <file name="$USER_HOME$/Code/idx/dev.sh" timestamp="1502531293903">
        <mark key="'" line="6" column="39" />
        <mark key="[" line="6" column="10" />
        <mark key="]" line="6" column="15" />
        <mark key="^" line="6" column="15" />
        <mark key="." line="6" column="15" />
      </file>
      <file name="$USER_HOME$/Code/money-mom/app/Http/Middleware/LogResponse.php" timestamp="1500121011047">
        <mark key="'" line="21" column="0" />
        <mark key="[" line="19" column="0" />
        <mark key="]" line="19" column="0" />
        <mark key="." line="19" column="0" />
        <mark key="^" line="22" column="24" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/ui-route-views/get-organized/guest-list/hotel-report.html" timestamp="1505213043366">
        <mark key="[" line="46" column="80" />
        <mark key="]" line="46" column="81" />
        <mark key="^" line="46" column="81" />
        <mark key="." line="46" column="81" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/ui-route-views/modal-views/gift-received.html" timestamp="1505543015935">
        <mark key="[" line="67" column="51" />
        <mark key="]" line="67" column="55" />
        <mark key="." line="67" column="55" />
        <mark key="^" line="67" column="55" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/style/scss/guest-list.scss" timestamp="1505551440933">
        <mark key="[" line="645" column="14" />
        <mark key="]" line="644" column="14" />
        <mark key="^" line="645" column="13" />
        <mark key="." line="644" column="14" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/resources/views/bids/cancel.blade.php" timestamp="1505285500069">
        <mark key="[" line="1" column="0" />
        <mark key="]" line="1" column="0" />
        <mark key="." line="1" column="0" />
        <mark key="^" line="0" column="25" />
      </file>
      <file name="$USER_HOME$/Code/idx/frontend/public/ui-route-views/modal-views/add-new-event-modal.html" timestamp="1505542285732">
        <mark key="'" line="44" column="69" />
        <mark key="[" line="44" column="45" />
        <mark key="]" line="44" column="45" />
        <mark key="." line="44" column="45" />
        <mark key="^" line="44" column="65" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/app/Http/Controllers/WebhookController.php" timestamp="1504933252018">
        <mark key="'" line="24" column="0" />
        <mark key="[" line="36" column="37" />
        <mark key="]" line="36" column="43" />
        <mark key="." line="36" column="43" />
        <mark key="^" line="36" column="43" />
      </file>
      <file name="$USER_HOME$/Code/live-pika/app/Http/Controllers/LiveVideoController.php" timestamp="1505792307905">
        <mark key="[" line="11" column="12" />
        <mark key="]" line="11" column="12" />
        <mark key="." line="11" column="12" />
        <mark key="^" line="11" column="12" />
      </file>
    </filemarks>
    <jumps>
      <jump line="58" column="0" filename="$USER_HOME$/Code/live-pika/app/Jobs/FindBidWinners.php" />
      <jump line="13" column="0" filename="$USER_HOME$/Code/live-pika/app/Http/Controllers/PlusOneDurationController.php" />
      <jump line="24" column="58" filename="$USER_HOME$/Code/live-pika/app/Http/Controllers/PlusOneDurationController.php" />
      <jump line="61" column="0" filename="$USER_HOME$/Code/live-pika/app/Http/Controllers/PlusOneDurationController.php" />
      <jump line="0" column="0" filename="$USER_HOME$/Code/live-pika/resources/views/dashboard.blade.php" />
      <jump line="83" column="0" filename="$USER_HOME$/Code/live-pika/app/Http/Controllers/BidController.php" />
      <jump line="202" column="0" filename="$USER_HOME$/Code/live-pika/resources/views/dashboard.blade.php" />
      <jump line="12" column="34" filename="$USER_HOME$/Code/live-pika/app/Http/Controllers/PlusOneDurationController.php" />
      <jump line="82" column="50" filename="$USER_HOME$/Code/live-pika/resources/views/dashboard.blade.php" />
      <jump line="40" column="14" filename="$USER_HOME$/Code/idx/frontend/public/dependencies/materialize/bower_components/materialize/sass/components/_form.scss" />
      <jump line="90" column="240" filename="$USER_HOME$/Code/live-pika/resources/views/dashboard.blade.php" />
      <jump line="16" column="4" filename="$USER_HOME$/Code/live-pika/app/Jobs/FindBidWinners.php" />
      <jump line="32" column="4" filename="$USER_HOME$/Code/live-pika/app/Jobs/FindPlusOneWinners.php" />
      <jump line="42" column="16" filename="$USER_HOME$/Code/live-pika/app/Jobs/FindPlusOneWinners.php" />
      <jump line="82" column="45" filename="$USER_HOME$/Code/live-pika/app/Http/Controllers/BidController.php" />
      <jump line="35" column="0" filename="$USER_HOME$/Code/live-pika/app/Http/Controllers/BidController.php" />
      <jump line="18" column="32" filename="$USER_HOME$/Code/live-pika/app/Bid.php" />
      <jump line="128" column="48" filename="$USER_HOME$/Code/live-pika/resources/views/dashboard.blade.php" />
      <jump line="43" column="24" filename="$USER_HOME$/Code/live-pika/app/Http/Controllers/BidController.php" />
      <jump line="66" column="36" filename="$USER_HOME$/Code/idx/frontend/public/javascripts/directive/add-new-event-modal-directive.js" />
      <jump line="76" column="0" filename="$USER_HOME$/Code/live-pika/app/Http/Controllers/BidController.php" />
      <jump line="10" column="79" filename="$USER_HOME$/Code/idx/frontend/public/ui-route-views/plan/events.html" />
      <jump line="130" column="5" filename="$USER_HOME$/Code/idx/frontend/public/javascripts/controllers/events-controller.js" />
      <jump line="129" column="0" filename="$USER_HOME$/Code/idx/frontend/public/javascripts/controllers/events-controller.js" />
      <jump line="40" column="34" filename="$USER_HOME$/Code/idx/frontend/public/ui-route-views/modal-views/event-modal.html" />
      <jump line="0" column="14" filename="$USER_HOME$/Code/idx/frontend/public/javascripts/directive/event-modal-directive.js" />
      <jump line="52" column="20" filename="$USER_HOME$/Code/idx/frontend/public/ui-route-views/plan/events.html" />
      <jump line="55" column="0" filename="$USER_HOME$/Code/live-pika/app/Http/Controllers/BidController.php" />
      <jump line="98" column="31" filename="$USER_HOME$/Code/live-pika/resources/views/dashboard.blade.php" />
      <jump line="8" column="0" filename="$USER_HOME$/Code/live-pika/resources/views/dashboard.blade.php" />
      <jump line="25" column="0" filename="$USER_HOME$/Code/live-pika/database/migrations/2017_09_05_113759_create_winners_table.php" />
      <jump line="112" column="11" filename="$USER_HOME$/Code/live-pika/resources/views/dashboard.blade.php" />
      <jump line="52" column="76" filename="$USER_HOME$/Code/live-pika/resources/views/live-videos/show.blade.php" />
      <jump line="70" column="20" filename="$USER_HOME$/Code/live-pika/resources/views/dashboard.blade.php" />
      <jump line="49" column="61" filename="$USER_HOME$/Code/live-pika/resources/views/live-videos/show.blade.php" />
      <jump line="64" column="119" filename="$USER_HOME$/Code/live-pika/resources/views/live-videos/show.blade.php" />
      <jump line="31" column="23" filename="$USER_HOME$/Code/live-pika/app/Http/Controllers/DeliveryController.php" />
      <jump line="124" column="0" filename="$USER_HOME$/Code/live-pika/resources/views/live-videos/show.blade.php" />
      <jump line="0" column="0" filename="$USER_HOME$/Code/live-pika/.env.example" />
      <jump line="0" column="0" filename="$USER_HOME$/Code/live-pika/.env" />
      <jump line="46" column="82" filename="$USER_HOME$/Code/live-pika/resources/views/live-videos/show.blade.php" />
      <jump line="459" column="8" filename="$USER_HOME$/Code/live-pika/vendor/geocoder-php/google-maps-provider/Model/GoogleAddress.php" />
      <jump line="0" column="0" filename="$USER_HOME$/Code/live-pika/vendor/geocoder-php/google-maps-provider/Model/GoogleAddress.php" />
      <jump line="19" column="40" filename="$USER_HOME$/Code/live-pika/vendor/geocoder-php/google-maps-provider/Model/GoogleAddress.php" />
      <jump line="38" column="53" filename="$USER_HOME$/Code/live-pika/resources/views/live-videos/show.blade.php" />
      <jump line="9" column="141" filename="$USER_HOME$/Code/live-pika/resources/views/live-videos/show.blade.php" />
      <jump line="374" column="0" filename="$USER_HOME$/Code/idx/frontend/public/javascripts/directive/guest-household-detail-modal-directive.js" />
      <jump line="104" column="10" filename="$USER_HOME$/Code/idx/frontend/public/javascripts/directive/event-modal-directive.js" />
      <jump line="5" column="67" filename="$USER_HOME$/Code/idx/frontend/public/javascripts/directive/event-modal-directive.js" />
      <jump line="39" column="24" filename="$USER_HOME$/Code/idx/frontend/public/javascripts/controllers/events-controller.js" />
      <jump line="108" column="0" filename="$USER_HOME$/Code/idx/frontend/public/javascripts/directive/event-modal-directive.js" />
      <jump line="86" column="120" filename="$USER_HOME$/Code/live-pika/resources/views/live-videos/show.blade.php" />
      <jump line="234" column="0" filename="$USER_HOME$/Code/live-pika/resources/views/live-videos/show.blade.php" />
      <jump line="84" column="66" filename="$USER_HOME$/Code/live-pika/resources/views/live-videos/show.blade.php" />
      <jump line="83" column="49" filename="$USER_HOME$/Code/live-pika/resources/views/live-videos/show.blade.php" />
      <jump line="82" column="211" filename="$USER_HOME$/Code/live-pika/resources/views/live-videos/show.blade.php" />
      <jump line="69" column="0" filename="$USER_HOME$/Code/live-pika/resources/views/live-videos/show.blade.php" />
      <jump line="70" column="240" filename="$USER_HOME$/Code/live-pika/resources/views/live-videos/show.blade.php" />
      <jump line="74" column="103" filename="$USER_HOME$/Code/live-pika/resources/views/live-videos/show.blade.php" />
      <jump line="643" column="13" filename="$USER_HOME$/Code/idx/frontend/public/style/scss/paymentAndBudget.scss" />
      <jump line="715" column="27" filename="$USER_HOME$/Code/idx/frontend/public/style/scss/paymentAndBudget.scss" />
      <jump line="678" column="0" filename="$USER_HOME$/Code/idx/frontend/public/style/scss/paymentAndBudget.scss" />
      <jump line="15" column="1" filename="$USER_HOME$/Code/idx/frontend/public/style/scss/idx-common.scss" />
      <jump line="222" column="22" filename="$USER_HOME$/Code/idx/frontend/public/style/scss/guest-list.scss" />
      <jump line="0" column="0" filename="$USER_HOME$/Code/idx/frontend/public/style/scss/guest-list.scss" />
      <jump line="223" column="22" filename="$USER_HOME$/Code/idx/frontend/public/style/scss/guest-list.scss" />
      <jump line="264" column="0" filename="$USER_HOME$/Code/idx/frontend/public/style/scss/guest-list.scss" />
      <jump line="2" column="40" filename="$USER_HOME$/Code/idx/frontend/public/ui-route-views/get-organized/guest-list/sub-menu.html" />
      <jump line="120" column="31" filename="$USER_HOME$/Code/idx/frontend/public/style/raw-css/custom.css" />
      <jump line="61" column="0" filename="$USER_HOME$/Code/idx/frontend/public/style/raw-css/custom.css" />
      <jump line="1" column="13" filename="$USER_HOME$/Code/idx/frontend/public/style/scss/guest-household-detail.scss" />
      <jump line="293" column="29" filename="$USER_HOME$/Code/idx/frontend/public/style/scss/guest-household-detail.scss" />
      <jump line="0" column="0" filename="$USER_HOME$/Code/idx/frontend/public/style/scss/guest-household-detail.scss" />
      <jump line="100" column="31" filename="$USER_HOME$/Code/idx/frontend/public/style/scss/custom-report.scss" />
      <jump line="1" column="0" filename="$USER_HOME$/Code/idx/frontend/public/style/scss/custom-report.scss" />
      <jump line="6" column="6" filename="$USER_HOME$/Code/live-pika/database/migrations/2017_09_18_062133_create_plus_one_quotas_table.php" />
      <jump line="6" column="6" filename="$USER_HOME$/Code/live-pika/database/migrations/2017_09_06_015007_create_live_videos_table.php" />
      <jump line="85" column="36" filename="$USER_HOME$/Code/live-pika/resources/views/dashboard.blade.php" />
      <jump line="115" column="155" filename="$USER_HOME$/Code/live-pika/resources/views/dashboard.blade.php" />
      <jump line="127" column="44" filename="$USER_HOME$/Code/live-pika/resources/views/dashboard.blade.php" />
      <jump line="296" column="17" filename="$USER_HOME$/Code/live-pika/resources/views/dashboard.blade.php" />
      <jump line="124" column="91" filename="$USER_HOME$/Code/live-pika/resources/views/dashboard.blade.php" />
      <jump line="56" column="0" filename="$USER_HOME$/Code/live-pika/app/Jobs/PageNotify.php" />
      <jump line="44" column="0" filename="$USER_HOME$/Code/live-pika/app/Http/Controllers/PlusOneQuotaController.php" />
      <jump line="295" column="34" filename="$USER_HOME$/Code/live-pika/resources/views/orders/create-plus-one.blade.php" />
      <jump line="152" column="22" filename="$USER_HOME$/Code/live-pika/resources/views/orders/create-plus-one.blade.php" />
      <jump line="116" column="58" filename="$USER_HOME$/Code/live-pika/resources/views/dashboard.blade.php" />
      <jump line="28" column="19" filename="$USER_HOME$/Code/live-pika/.env" />
      <jump line="17" column="8" filename="$USER_HOME$/Code/live-pika/resources/views/orders/create-plus-one.blade.php" />
      <jump line="29" column="0" filename="$USER_HOME$/Code/live-pika/app/Http/Controllers/PlusOneQuotaController.php" />
      <jump line="32" column="68" filename="$USER_HOME$/Code/live-pika/app/Http/Controllers/BidController.php" />
      <jump line="34" column="3" filename="$USER_HOME$/Code/live-pika/app/Http/Controllers/PlusOneQuotaController.php" />
      <jump line="151" column="0" filename="$USER_HOME$/Code/live-pika/resources/views/dashboard.blade.php" />
      <jump line="134" column="180" filename="$USER_HOME$/Code/live-pika/resources/views/dashboard.blade.php" />
      <jump line="94" column="27" filename="$USER_HOME$/Code/idx/backend/app.js" />
      <jump line="1598" column="0" filename="$USER_HOME$/Code/idx/backend/routes/rEvents.js" />
      <jump line="15" column="16" filename="$USER_HOME$/Code/idx/backend/routes/rEvents.js" />
      <jump line="1137" column="37" filename="$USER_HOME$/Code/idx/backend/routes/rEvents.js" />
      <jump line="315" column="0" filename="$USER_HOME$/Code/idx/backend/routes/rEvents.js" />
      <jump line="56" column="1" filename="$USER_HOME$/Code/idx/backend/routes/rEvents.js" />
    </jumps>
    <registers>
      <register name="&quot;" type="4">
        <text>a</text>
      </register>
      <register name="d" type="4">
        <text>w</text>
      </register>
      <register name="-" type="4">
        <text>a</text>
      </register>
      <register name="/" type="4">
        <text encoding="base64">XDx1cGRhdGVMYXN0QWN0aXZlXD4=</text>
      </register>
      <register name="0" type="2">
        <text encoding="base64">ICAgICAgICAkbWVzc2FnZSA9IHRyaW0odmlldygnYmlkcy5wbHVzLW9uZS1saW5rJywgWwogICAgICAgICAgICAnbnVtYmVyT2ZCaWQnID0+IEJpZDo6d2hlcmVMaXZlVmlkZW9JZCgkYmlkLT5saXZlX3ZpZGVvX2lkKS0+d2hlcmUoJ2lkJywgJzwnLCAkYmlkLT5pZCktPmNvdW50KCkgKyAxLAogICAgICAgICAgICAncGx1c09uZUxpbmsnID0+IHJvdXRlKCdvcmRlcnMuY3JlYXRlJywgJGJpZC0+aWQpCiAgICAgICAgXSktPnJlbmRlcigpKTsKCiAgICAgICAgJHRoaXMtPmZiLT5jb21tZW50T25WaWRlbygkbWVzc2FnZSwgWwogICAgICAgICAgICAnaWQnID0+ICRiaWQtPnZpZGVvX2lkLAogICAgICAgICAgICAnYWNjZXNzX3Rva2VuJyA9PiBzZXNzaW9uKCJwYWdlcy57JGJpZC0+cGFnZV9pZH0uYWNjZXNzX3Rva2VuIikKICAgICAgICBdKTsK</text>
      </register>
      <register name="1" type="2">
        <text encoding="base64">ICAgICAgICAvKiogQHZhciBUWVBFX05BTUUgJGJpZCAqLwo=</text>
      </register>
      <register name="2" type="2">
        <text encoding="base64">ICByZXR1cm4gbmV4dCgpOwo=</text>
      </register>
      <register name="3" type="2">
        <text encoding="base64">CmZ1bmN0aW9uIHZhbGlkYXRlUGFyYW1zKHJlcSwgeyBwYXJhbVNjaGVtYSwgYm9keVNjaGVtYSB9KSB7CiAgaWYgKCFfLmlzTmlsKHBhcmFtU2NoZW1hKSkgewogICAgcmVxLmNoZWNrUGFyYW1zKHBhcmFtU2NoZW1hKTsKICB9CgogIGlmICghXy5pc05pbChib2R5U2NoZW1hKSkgewogICAgcmVxLmNoZWNrQm9keShib2R5U2NoZW1hKTsKICB9CgogIHJldHVybiByZXEuZ2V0VmFsaWRhdGlvblJlc3VsdCgpCiAgICAudGhlbigocmVzdWx0KSA9PiB7CiAgICAgIGlmICghcmVzdWx0LmlzRW1wdHkoKSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IGVycm9yczogcmVzdWx0LmFycmF5KCkgfSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHBhcmFtcyA9IHNhbml0aXplKHJlcS5wYXJhbXMsIHBhcmFtU2NoZW1hKTsKICAgICAgY29uc3QgYm9keSA9IHNhbml0aXplKHJlcS5ib2R5LCBib2R5U2NoZW1hKTsKCiAgICAgIHJldHVybiB7IHBhcmFtcywgYm9keSB9OwogICAgfSk7Cn0K</text>
      </register>
      <register name="4" type="2">
        <text encoding="base64">cm91dGVyLmdldCgnL3VzZXJzLzp1c2VySWQvZXZlbnRzJyk7Cg==</text>
      </register>
      <register name="5" type="2">
        <text encoding="base64">Ly8gdXBkYQo=</text>
      </register>
      <register name="6" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="7" type="2">
        <text encoding="base64">cm91dGVyLmdldCgnL2dldEd1ZXN0TGlzdCcsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCkgewogIHZhciBxdWVyeVN0cmluZyA9ICJTRUxFQ1QgKiBGUk9NIGd1ZXN0X2xpc3QgV0hFUkUgdXNlcl9pZCA9ICIrcmVxLnVzZXIuaWQrIiI7CgogIGRhdGFiYXNlLnJ1blF1ZXJ5KHF1ZXJ5U3RyaW5nLCBmdW5jdGlvbiAoZXJyb3IsIHJlc3VsdHMpewogICAgaWYgKCFlcnJvcikgewogICAgICByZXMuanNvbihyZXN1bHRzKTsKICAgIH1lbHNlewogICAgICByZXMuc2VuZFN0YXR1cyg1MDApOwogICAgfQogIH0pOwp9KTsKCnJvdXRlci5nZXQoJy9ndWVzdF9saXN0JywgZW5zdXJlQXV0aGVudGljYXRlZCwgZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0KSB7CgogIHZhciBnbF9xdWVyaWVzID0gWwoKICAgIC8vIFRPRE8gY2FsY3VsYXRlIHRyYXZlbCBkZXRhaWxzIHJlcXVpcmVtZW50cywgb3IgcmVtb3ZlIGZyb20gYXBpIGFuZCBkbyBjbGllbnQgc2lkZQoKICAgIC8vIFJldHVybnMgZm9yIHRoaXMgaG91c2Vob2xkIElEIHdoaWNoIGlzIGFzc29jaWF0ZWQgdG8gdXNlciBJRCAoY2FuIG9ubHkgaGF2ZSBvbmUpCiAgICBrbmV4KCdpZHhfdXNlcnMnKQogICAgICAud2hlcmUoeydpZHhfdXNlcnMuaWQnOnJlcS51c2VyLmlkfSkKICAgICAgLmpvaW4oJ2dsX2hvdXNlaG9sZF9kZXRhaWxzJywgeydnbF9ob3VzZWhvbGRfZGV0YWlscy51c2VyX2lkJzogJ2lkeF91c2Vycy5pZCd9KQogICAgICAubGVmdEpvaW4oJ2dsX2d1ZXN0cycsIHsnZ2xfZ3Vlc3RzLmhvdXNlaG9sZF9kZXRhaWxzX2lkJzogJ2dsX2hvdXNlaG9sZF9kZXRhaWxzLmlkJ30pCiAgICAgIC5sZWZ0Sm9pbignZ2xfZ2lmdHMnLCB7J2dsX2dpZnRzLmhvdXNlaG9sZF9kZXRhaWxzX2lkJzogJ2dsX2hvdXNlaG9sZF9kZXRhaWxzLmlkJ30pCiAgICAgIC5sZWZ0Sm9pbignZ2xfZXZlbnRfcnN2cHMnLCB7J2dsX2V2ZW50X3JzdnBzLmd1ZXN0X2lkJzogJ2dsX2d1ZXN0cy5pZCd9KQogICAgICAubGVmdEpvaW4oJ2dsX2V2ZW50cycsIHsnZ2xfZXZlbnRzLmlkJyA6ICdnbF9ldmVudF9yc3Zwcy5ldmVudF9pZCd9KQogICAgICAubGVmdEpvaW4oJ2dsX2V2ZW50X3R5cGVzJywgeydnbF9ldmVudF90eXBlcy5pZCcgOiAnZ2xfZXZlbnRzLmV2ZW50X3R5cGVfaWQnfSkKICAgICAgLnNlbGVjdCgnZ2xfaG91c2Vob2xkX2RldGFpbHMuaWQgYXMgaG91c2Vob2xkX2RldGFpbHNfaWQnLCAnZ2xfaG91c2Vob2xkX2RldGFpbHMuaG91c2Vob2xkX25hbWUgYXMgaG91c2Vob2xkX25hbWUnLCAnYWRkcmVzc18xJywgJ2FkZHJlc3NfMicsICdhZGRyZXNzXzMnLCAnY291bnRyeScsCiAgICAgICAgLy8gUXVpY2sgbG9naWMgdG8gZGV0ZXJtaW5lIGlmIHRoZSBhZGRyZXNzIGlzIGNvbXBsZXRlCiAgICAgICAgLy8gQ29tcGxldGUgSUY6IEFkZHJlc3NfMSwgQWRyZXNzXzIgYW5kIENvdW50cnkgYWxsIGhhdmUgYSBzdHJpbmcgd2l0aCBsZW5ndGggPiAyCiAgICAgICAga25leC5yYXcoJ2NvYWxlc2NlKGNoYXJfbGVuZ3RoKGFkZHJlc3NfMSk+MiBBTkQgY2hhcl9sZW5ndGgoYWRkcmVzc18yKT4yIGFuZCBjaGFyX2xlbmd0aChjb3VudHJ5KSA+IDEsIGZhbHNlKSBhcyBhZGRyZXNzX2NvbXBsZXRlLCBpbnZpdGVkJyksCiAgICAgICAgLy8gU3VicXVlcnkgY291bnRzIGhvdyBtYW55IGd1ZXN0cyBhcmUgYXR0ZW5kaW5nIHRoZSBjZXJlbW9ueSBmb3IgaG91c2Vob2xkX2lkIG9mIHRoZSBwYXJlbnQgcm93CiAgICAgICAga25leCgnZ2xfZ3Vlc3RzJykKICAgICAgICAgIC5sZWZ0Sm9pbignZ2xfZXZlbnRfcnN2cHMnLCB7J2dsX2V2ZW50X3JzdnBzLmd1ZXN0X2lkJzogJ2dsX2d1ZXN0cy5pZCd9KQogICAgICAgICAgLmxlZnRKb2luKCdnbF9ldmVudHMnLCB7J2dsX2V2ZW50cy5pZCcgOiAnZ2xfZXZlbnRfcnN2cHMuZXZlbnRfaWQnfSkKICAgICAgICAgIC5sZWZ0Sm9pbignZ2xfZXZlbnRfdHlwZXMnLCB7J2dsX2V2ZW50X3R5cGVzLmlkJyA6ICdnbF9ldmVudHMuZXZlbnRfdHlwZV9pZCd9KQogICAgICAgICAgLnNlbGVjdChrbmV4LnJhdygnY291bnQoKiknKSkKICAgICAgICAgIC53aGVyZVJhdygnZ2xfZ3Vlc3RzLmhvdXNlaG9sZF9kZXRhaWxzX2lkID0gZ2xfaG91c2Vob2xkX2RldGFpbHMuaWQnKQogICAgICAgICAgLmFuZFdoZXJlKHsnZ2xfZXZlbnRfdHlwZXMudHlwZSc6J2NlcmVtb255JywgJ2dsX2V2ZW50X3JzdnBzLmF0dGVuZGluZ190cnVlJyA6IHRydWV9KQogICAgICAgICAgLmFzKCdhdHRlbmRpbmdfY2VyZW1vbnknKSwKICAgICAgICAvLyBTdWJxdWVyeSBjb3VudHMgaG93IG1hbnkgZ3Vlc3RzIGFyZSBhdHRlbmRpbmcgdGhlIHJlY2VwdGlvbiBmb3IgaG91c2Vob2xkX2lkIG9mIHRoZSBwYXJlbnQgcm93CiAgICAgICAga25leCgnZ2xfZ3Vlc3RzJykKICAgICAgICAgIC5sZWZ0Sm9pbignZ2xfZXZlbnRfcnN2cHMnLCB7J2dsX2V2ZW50X3JzdnBzLmd1ZXN0X2lkJzogJ2dsX2d1ZXN0cy5pZCd9KQogICAgICAgICAgLmxlZnRKb2luKCdnbF9ldmVudHMnLCB7J2dsX2V2ZW50cy5pZCcgOiAnZ2xfZXZlbnRfcnN2cHMuZXZlbnRfaWQnfSkKICAgICAgICAgIC5sZWZ0Sm9pbignZ2xfZXZlbnRfdHlwZXMnLCB7J2dsX2V2ZW50X3R5cGVzLmlkJyA6ICdnbF9ldmVudHMuZXZlbnRfdHlwZV9pZCd9KQogICAgICAgICAgLnNlbGVjdChrbmV4LnJhdygnY291bnQoKiknKSkKICAgICAgICAgIC53aGVyZVJhdygnZ2xfZ3Vlc3RzLmhvdXNlaG9sZF9kZXRhaWxzX2lkID0gZ2xfaG91c2Vob2xkX2RldGFpbHMuaWQnKQogICAgICAgICAgLmFuZFdoZXJlKHsnZ2xfZXZlbnRfdHlwZXMudHlwZSc6J3JlaGVhcnNhbCcsICdnbF9ldmVudF9yc3Zwcy5hdHRlbmRpbmdfdHJ1ZScgOiB0cnVlfSkKICAgICAgICAgIC5hcygnYXR0ZW5kaW5nX3JlaGVhcnNhbCcpLAogICAgICAgIC8vICJUaGFua2VkIiBsb2dpYzogMDogTm8gZ2lmdHMgd2VyZSByZWNvcmRlZCAxOiBHaWZ0cyByZWNvcmRlZCBidXQgbm90IHRoYW5rZWQgMjogR2lmdHMgd2VyZSByZWNvcmRlZCBhbmQgdGhhbmtlZCA9IHRydWUKICAgICAgICBrbmV4LnJhdygnQ0FTRSBXSEVOIGdsX2hvdXNlaG9sZF9kZXRhaWxzLmdpZnRzX3RoYW5rZWQgPSB0cnVlIFRIRU4gMiBXSEVOIGNvdW50KGdsX2dpZnRzLm5hbWUpID4gMCBUSEVOIDEgRUxTRSAwIEVORCBhcyBnaWZ0X3N0YXR1cycpLAogICAgICAgIC8vIFRPRE86IE5lZWQgc3BlYyBvbiB3aGF0IGlzIGNvbnNpZGVyZWQgY29tcGxldGUsIG9yIG1vdmUgdG8gY2xpZW50IHNpZGUKICAgICAgICBrbmV4LnJhdygnZmFsc2UgYXMgdHJhdmVsX2RldGFpbHNfY29tcGxldGUnKQogICAgICApCiAgICAgIC5ncm91cEJ5KCdnbF9ob3VzZWhvbGRfZGV0YWlscy5pZCcpCiAgICAgIC5vcmRlckJ5KCdob3VzZWhvbGRfbmFtZScpLAoKICAgIC8vIFJldHVybnMgbnVtYmVyIG9mIGhvdXNlaG9sZHMgd2hvIGhhdmUgYXQgbGVhc3Qgb25lIGd1ZXN0IGF0dGVuZGluZyBjZXJlbW9ueQogICAga25leCgnaWR4X3VzZXJzJykKICAgICAgLmpvaW4oJ2dsX2hvdXNlaG9sZF9kZXRhaWxzJywgeydnbF9ob3VzZWhvbGRfZGV0YWlscy51c2VyX2lkJzogJ2lkeF91c2Vycy5pZCd9KQogICAgICAubGVmdEpvaW4oJ2dsX2d1ZXN0cycsIHsnZ2xfZ3Vlc3RzLmhvdXNlaG9sZF9kZXRhaWxzX2lkJyA6ICdnbF9ob3VzZWhvbGRfZGV0YWlscy5pZCd9KQogICAgICAubGVmdEpvaW4oJ2dsX2V2ZW50X3JzdnBzJywgeydnbF9ldmVudF9yc3Zwcy5ndWVzdF9pZCc6ICdnbF9ndWVzdHMuaWQnfSkKICAgICAgLmxlZnRKb2luKCdnbF9ldmVudHMnLCB7J2dsX2V2ZW50cy5pZCcgOiAnZ2xfZXZlbnRfcnN2cHMuZXZlbnRfaWQnfSkKICAgICAgLmxlZnRKb2luKCdnbF9ldmVudF90eXBlcycsIHsnZ2xfZXZlbnRfdHlwZXMuaWQnIDogJ2dsX2V2ZW50cy5ldmVudF90eXBlX2lkJ30pCiAgICAgIC5zZWxlY3Qoa25leC5yYXcoJ0NPVU5UKERJU1RJTkNUIGdsX2hvdXNlaG9sZF9kZXRhaWxzLmlkKSBhcyBjb3VudF9yc3ZwJykpCiAgICAgIC53aGVyZSh7J2lkeF91c2Vycy5pZCc6cmVxLnVzZXIuaWQsICdnbF9ldmVudF90eXBlcy50eXBlJzonY2VyZW1vbnknfSkKICAgICAgLmdyb3VwQnkoJ2lkeF91c2Vycy5pZCcpLAoKICAgIC8vIFJldHVybnMgbnVtYmVyIG9mIGhvdXNlaG9sZHMgd2hlcmUgaW52aXRlZCBpcyB0cnVlCiAgICBrbmV4KCdpZHhfdXNlcnMnKQogICAgICAuam9pbignZ2xfaG91c2Vob2xkX2RldGFpbHMnLCB7J2dsX2hvdXNlaG9sZF9kZXRhaWxzLnVzZXJfaWQnOiAnaWR4X3VzZXJzLmlkJ30pCiAgICAgIC5zZWxlY3Qoa25leC5yYXcoJ0NPVU5UKCopIGFzIGNvdW50X2ludml0ZWQnKSkKICAgICAgLndoZXJlKHsnaWR4X3VzZXJzLmlkJzpyZXEudXNlci5pZCwgJ2dsX2hvdXNlaG9sZF9kZXRhaWxzLmludml0ZWQnOnRydWV9KQoKICBdOwoKICBQcm9taXNlLmFsbChnbF9xdWVyaWVzKQogICAgLnRoZW4oZnVuY3Rpb24ocmVzdWx0cykgewogICAgICB2YXIgcmV0dXJuX3ZhbHVlID0gewogICAgICAgIGhvdXNlaG9sZHMgOiByZXN1bHRzWzBdLAogICAgICAgIGNvdW50X3JzdnAgOiByZXN1bHRzWzFdLmxlbmd0aD4wICYmICJjb3VudF9yc3ZwIiBpbiByZXN1bHRzWzFdWzBdP3Jlc3VsdHNbMV1bMF0uY291bnRfcnN2cDowLAogICAgICAgIGNvdW50X2ludml0ZWQ6IHJlc3VsdHNbMl0ubGVuZ3RoPjAgJiYgImNvdW50X2ludml0ZWQiIGluIHJlc3VsdHNbMl1bMF0/cmVzdWx0c1syXVswXS5jb3VudF9pbnZpdGVkOjAKICAgICAgfQogICAgICByZXMuc2VuZChyZXR1cm5fdmFsdWUpOwogICAgfSkKICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHsKICAgICAgY29uc29sZS5lcnJvcihlcnIpOwogICAgICByZXMuc2VuZFN0YXR1cyg1MDApOwogICAgfSk7Cgp9KTsKCnJvdXRlci5wb3N0KCcvaG91c2Vob2xkcycsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcykgewogIGtuZXgoJ2dsX2hvdXNlaG9sZF9kZXRhaWxzJykKICAgIC5yZXR1cm5pbmcoJ2lkJykKICAgIC5pbnNlcnQoeyB1c2VyX2lkOiByZXEudXNlci5pZCB9KQogICAgLnRoZW4oKFtob3VzZWhvbGRJZF0pID0+IHJlcy5zZW5kKHsgaG91c2Vob2xkX2lkOiBob3VzZWhvbGRJZCB9KSkKICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgIH0pOwp9KTsKCnJvdXRlci5nZXQoJy9ob3VzZWhvbGRzLzpob3VzZWhvbGRJZCcsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCkgewogIHJlcS5jaGVja1BhcmFtcygnaG91c2Vob2xkSWQnLCAnSW52YWxpZCBob3VzZWhvbGQgSUQnKS5ub3RFbXB0eSgpLmlzSW50KCk7CiAgcmVxLnNhbml0aXplUGFyYW1zKCdob3VzZWhvbGRJZCcpLnRvSW50KCk7CgogIHJlcS5nZXRWYWxpZGF0aW9uUmVzdWx0KCkKICAgIC50aGVuKChyZXN1bHQpID0+IHsKICAgICAgaWYgKCFyZXN1bHQuaXNFbXB0eSgpKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHsgZXJyb3I6ICdpbnZhbGlkIGhvdXNlaG9sZCBpZCcgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlcS5wYXJhbXMuaG91c2Vob2xkSWQ7CiAgICB9KQogICAgLnRoZW4oKGhvdXNlaG9sZElkKSA9PiB7CiAgICAgIGNvbnN0IHByb21pc2VzID0gUHJvbWlzZS5hbGwoCiAgICAgICAgWwogICAgICAgICAga25leCgnZ2xfaG91c2Vob2xkX2RldGFpbHMnKQogICAgICAgICAgICAud2hlcmUoeyBpZDogaG91c2Vob2xkSWQsIHVzZXJfaWQ6IHJlcS51c2VyLmlkIH0pCiAgICAgICAgICAgIC5zZWxlY3QoCiAgICAgICAgICAgICAgJ2lkIEFTIGhvdXNlaG9sZF9kZXRhaWxzX2lkJywKICAgICAgICAgICAgICAnaG91c2Vob2xkX25hbWUnLAogICAgICAgICAgICAgICdhZGRyZXNzXzEnLAogICAgICAgICAgICAgICdhZGRyZXNzXzInLAogICAgICAgICAgICAgICdhZGRyZXNzXzMnLAogICAgICAgICAgICAgICdjb3VudHJ5JywKICAgICAgICAgICAgICAnaW52aXRlZCBBUyBpbnZpdGF0aW9uX3NlbnQnKSwKICAgICAgICAgIGtuZXgoJ2dsX2V2ZW50cycpCiAgICAgICAgICAgIC53aGVyZSh7IHVzZXJfaWQ6IHJlcS51c2VyLmlkIH0pCiAgICAgICAgICAgIC5sZWZ0Sm9pbignZ2xfZXZlbnRfdHlwZXMnLCB7J2dsX2V2ZW50X3R5cGVzLmlkJyA6ICdnbF9ldmVudHMuZXZlbnRfdHlwZV9pZCd9KQogICAgICAgICAgICAuc2VsZWN0KCdnbF9ldmVudHMuaWQgQVMgZXZlbnRfaWQnLCAnZ2xfZXZlbnRzLm5hbWUgQVMgZXZlbnRfbmFtZScsICdnbF9ldmVudF90eXBlcy50eXBlIGFzIGV2ZW50X3R5cGUnKSwKICAgICAgICAgIGtuZXgoJ2dsX2d1ZXN0cycpCiAgICAgICAgICAgIC53aGVyZSh7IGhvdXNlaG9sZF9kZXRhaWxzX2lkOiBob3VzZWhvbGRJZCB9KQogICAgICAgICAgICAub3JkZXJCeSgnaWQnLCAnQVNDJykKICAgICAgICAgICAgLnNlbGVjdCgKICAgICAgICAgICAgICAnaWQgQVMgZ3Vlc3RfaWQnLAogICAgICAgICAgICAgICdmaXJzdF9uYW1lJywKICAgICAgICAgICAgICAnbWlkZGxlX25hbWUnLAogICAgICAgICAgICAgICdsYXN0X25hbWUnLAogICAgICAgICAgICAgICdlbWFpbCcsCiAgICAgICAgICAgICAgJ3Bob25lJywKICAgICAgICAgICAgICAnYWR1bHRfdHJ1ZSBBUyBpc19hZHVsdCcsCiAgICAgICAgICAgICAgJ2FnZScsCiAgICAgICAgICAgICAgJ2NoYWlyX3JlcXVlc3QgQVMgcmVxdWVzdHNfY2hhaXInLAogICAgICAgICAgICAgICdyZXN0cmljdGlvbnMgQVMgZGlldF9yZXN0cmljdGlvbnMnLAogICAgICAgICAgICAgICdvdGhlcl9yZXF1ZXN0cyBBUyByZXF1ZXN0c19vdGhlcicKICAgICAgICAgICAgKSwKICAgICAgICBdCiAgICAgICk7CiAgICAgIHJldHVybiBwcm9taXNlczsKICAgIH0pCiAgICAudGhlbigoW2hvdXNlaG9sZCwgZXZlbnRzLCBndWVzdHNdKSA9PiB7CiAgICAgIGlmIChfLmlzTmlsKGhvdXNlaG9sZCkgfHwgXy5pc05pbChob3VzZWhvbGRbMF0pKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHsgZXJyb3I6ICdob3VzZWhvbGQgY2Fubm90IGJlIGZvdW5kLicgfSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGV2ZW50SWRzID0gZXZlbnRzLm1hcChldmVudCA9PiBldmVudC5ldmVudF9pZCk7CiAgICAgIGNvbnN0IGd1ZXN0SWRzID0gZ3Vlc3RzLm1hcChndWVzdCA9PiBndWVzdC5ndWVzdF9pZCk7CgogICAgICByZXR1cm4gUHJvbWlzZS5hbGwoCiAgICAgICAgWwogICAgICAgICAgaG91c2Vob2xkWzBdLAogICAgICAgICAgZXZlbnRzLAogICAgICAgICAgZ3Vlc3RzLAogICAgICAgICAga25leCgnZ2xfZXZlbnRfcnN2cHMnKQogICAgICAgICAgICAud2hlcmVJbignZ3Vlc3RfaWQnLCBndWVzdElkcykKICAgICAgICAgICAgLnNlbGVjdCgnZ3Vlc3RfaWQnLCAnZXZlbnRfaWQnLCAnYXR0ZW5kaW5nX3RydWUgQVMgaXNfYXR0ZW5kaW5nJywgJ21lYWxfaWQgQVMgc2VsZWN0ZWRfbWVhbF9pZCcpLAogICAgICAgICAga25leCgnZ2xfbWVhbHMnKQogICAgICAgICAgICAud2hlcmVJbignZXZlbnRfaWQnLCBldmVudElkcyksCiAgICAgICAgXQogICAgICApOwogICAgfSkKICAgIC50aGVuKChbaG91c2Vob2xkLCBldmVudHMsIGd1ZXN0cywgcnN2cHMsIG1lYWxzXSkgPT4gewogICAgICBjb25zdCBtZWFsc0J5RXZlbnQgPSBfLmdyb3VwQnkobWVhbHMsICdldmVudF9pZCcpOwogICAgICBldmVudHMuZm9yRWFjaCgoZXZlbnQpID0+IHsKICAgICAgICBldmVudC5tZWFsX29wdGlvbnMgPSAobWVhbHNCeUV2ZW50W2V2ZW50LmV2ZW50X2lkXSB8fCBbXSkubWFwKChtZWFsKSA9PiB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpZDogbWVhbC5pZCwKICAgICAgICAgICAgbmFtZTogbWVhbC5uYW1lCiAgICAgICAgICB9OwogICAgICAgIH0pOwogICAgICB9KTsKCiAgICAgIGNvbnN0IHJzdnBzQnlHdWVzdCA9IF8uZ3JvdXBCeShyc3ZwcywgJ2d1ZXN0X2lkJyk7CiAgICAgIGNvbnN0IG1lYWxzQnlJZCA9IG1lYWxzLnJlZHVjZSgobWVtLCBlbGUpID0+IHsKICAgICAgICBtZW1bZWxlLmlkXSA9IGVsZTsKICAgICAgICByZXR1cm4gbWVtOwogICAgICB9LCB7fSk7CgogICAgICBndWVzdHMuZm9yRWFjaCgoZ3Vlc3QpID0+IHsKICAgICAgICBjb25zdCByc3Zwc0J5RXZlbnQgPSAocnN2cHNCeUd1ZXN0W2d1ZXN0Lmd1ZXN0X2lkXSB8fCBbXSkucmVkdWNlKChtZW0sIGVsZSkgPT4gewogICAgICAgICAgbWVtW2VsZS5ldmVudF9pZF0gPSBlbGU7CiAgICAgICAgICByZXR1cm4gbWVtOwogICAgICAgIH0sIHt9KTsKCiAgICAgICAgZ3Vlc3QucnN2cHMgPSBldmVudHMubWFwKChldmVudCkgPT4gewogICAgICAgICAgY29uc3QgcnN2cCA9IHJzdnBzQnlFdmVudFtldmVudC5ldmVudF9pZF0gfHwge307CiAgICAgICAgICBjb25zdCBzZWxlY3RlZE1lYWxJZCA9IHJzdnAuc2VsZWN0ZWRfbWVhbF9pZCB8fCAwOwoKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGV2ZW50X2lkOiBldmVudC5ldmVudF9pZCwKICAgICAgICAgICAgaXNfYXR0ZW5kaW5nOiByc3ZwLmlzX2F0dGVuZGluZywKICAgICAgICAgICAgc2VsZWN0ZWRfbWVhbF9pZDogc2VsZWN0ZWRNZWFsSWQsCiAgICAgICAgICAgIHNlbGVjdGVkX21lYWw6IF8ucmVzdWx0KG1lYWxzQnlJZCwgYFske3NlbGVjdGVkTWVhbElkfV0ubmFtZWAsIG51bGwpLAogICAgICAgICAgfTsKICAgICAgICB9KTsKICAgICAgfSk7CgogICAgICBob3VzZWhvbGQuZ3Vlc3RzID0gZ3Vlc3RzOwogICAgICBob3VzZWhvbGQuZXZlbnRzID0gZXZlbnRzOwoKICAgICAgcmV0dXJuIHJlcy5zZW5kKGhvdXNlaG9sZCk7CiAgICB9KQogICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgLy8gVE9ETzogYWRkIG1vcmUgZGVzY3JpcHRpdmUgZXJyb3IgbWVzc2FnZXMKICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgIH0pOwp9KTsKCnJvdXRlci5wdXQoJy9ob3VzZWhvbGRzLzpob3VzZWhvbGRJZCcsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcykgewogIHJlcS5jaGVja1BhcmFtcygnaG91c2Vob2xkSWQnLCAnSW52YWxpZCBob3VzZWhvbGQgSUQnKS5ub3RFbXB0eSgpLmlzSW50KCk7CiAgcmVxLnNhbml0aXplUGFyYW1zKCdob3VzZWhvbGRJZCcpLnRvSW50KCk7CgogIGNvbnN0IGJvZHlTY2hlbWEgPSB7CiAgICBob3VzZWhvbGRfbmFtZTogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICBhZGRyZXNzXzE6IHsKICAgICAgb3B0aW9uYWw6IHsKICAgICAgICBvcHRpb25zOiB7IGNoZWNrRmFsc3k6IHRydWUgfQogICAgICB9CiAgICB9LAogICAgYWRkcmVzc18yOiB7CiAgICAgIG9wdGlvbmFsOiB7CiAgICAgICAgb3B0aW9uczogeyBjaGVja0ZhbHN5OiB0cnVlIH0KICAgICAgfQogICAgfSwKICAgIGFkZHJlc3NfMzogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICBjb3VudHJ5OiB7CiAgICAgIG9wdGlvbmFsOiB7CiAgICAgICAgb3B0aW9uczogeyBjaGVja0ZhbHN5OiB0cnVlIH0KICAgICAgfQogICAgfSwKICAgIGludml0YXRpb25fc2VudDogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0sCiAgICAgIGlzQm9vbGVhbjogewogICAgICAgIGVycm9yTWVzc2FnZTogJ0ludmFsaWQgdmFsdWUgZm9yIGludml0YXRpb25fc2VudCcKICAgICAgfQogICAgfQogIH07CgogIHJlcS5jaGVja0JvZHkoYm9keVNjaGVtYSk7CgogIHJlcS5nZXRWYWxpZGF0aW9uUmVzdWx0KCkKICAgIC50aGVuKChyZXN1bHQpID0+IHsKICAgICAgaWYgKCFyZXN1bHQuaXNFbXB0eSgpKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0LmFycmF5KCkpOwogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IGVycm9yOiAnaW52YWxpZCBwYXJhbXMnIH0pOwogICAgICB9CgogICAgICBjb25zdCB1bnBlcm1pdHRlZFBhcmFtcyA9IF8uZGlmZmVyZW5jZShfLmtleXMocmVxLmJvZHkpLCBfLmtleXMoYm9keVNjaGVtYSkpOwoKICAgICAgY29uc3QgcGFyYW1zID0gXy5tYXBLZXlzKAogICAgICAgIF8ocmVxLmJvZHkpLm9taXQodW5wZXJtaXR0ZWRQYXJhbXMpLm9taXRCeShfLmlzVW5kZWZpbmVkKS52YWx1ZSgpLAogICAgICAgICh2YWx1ZSwga2V5KSA9PiB7CiAgICAgICAgICBpZiAoa2V5ID09PSAnaW52aXRhdGlvbl9zZW50JykgewogICAgICAgICAgICByZXR1cm4gJ2ludml0ZWQnOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGtleTsKICAgICAgICB9CiAgICAgICk7CgogICAgICBpZiAoXy5pc0VtcHR5KHBhcmFtcykpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBzdGF0dXM6IDQwMCwgZXJyb3I6ICd1bmV4cGVjdGVkIGVtcHR5IHBhcmFtcycgfSkKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBob3VzZWhvbGRJZDogcmVxLnBhcmFtcy5ob3VzZWhvbGRJZCwKICAgICAgICBwYXJhbXMKICAgICAgfTsKICAgIH0pCiAgICAudGhlbigoeyBob3VzZWhvbGRJZCwgcGFyYW1zIH0pID0+IHsKICAgICAgcmV0dXJuIGtuZXgoJ2dsX2hvdXNlaG9sZF9kZXRhaWxzJykKICAgICAgICAud2hlcmUoeyBpZDogaG91c2Vob2xkSWQsIHVzZXJfaWQ6IHJlcS51c2VyLmlkIH0pCiAgICAgICAgLnVwZGF0ZShwYXJhbXMpOwogICAgfSkKICAgIC50aGVuKChudW1Sb3dzVXBkYXRlZCkgPT4gewogICAgICBpZiAobnVtUm93c1VwZGF0ZWQgPT09IDApIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBzdGF0dXM6IDQwNCwgZXJyb3I6ICdob3VzZWhvbGQgY2Fubm90IGJlIGZvdW5kJyB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoMjAwKTsKICAgICAgfQogICAgfSkKICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICBpZiAoIV8uaXNOaWwoZXJyb3Iuc3RhdHVzKSkgewogICAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyhlcnJvci5zdGF0dXMpOwogICAgICB9CiAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyg1MDApOwogICAgfSk7Cn0pOwoKCnJvdXRlci5kZWxldGUoJy9ob3VzZWhvbGRzLzpob3VzZWhvbGRJZCcsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcykgewogIHJlcS5jaGVja1BhcmFtcygnaG91c2Vob2xkSWQnLCAnSW52YWxpZCBob3VzZWhvbGQgSUQnKS5ub3RFbXB0eSgpLmlzSW50KCk7CiAgcmVxLnNhbml0aXplUGFyYW1zKCdob3VzZWhvbGRJZCcpLnRvSW50KCk7CgogIHJlcS5nZXRWYWxpZGF0aW9uUmVzdWx0KCkKICAgIC50aGVuKChyZXN1bHQpID0+IHsKICAgICAgaWYgKCFyZXN1bHQuaXNFbXB0eSgpKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHsgc3RhdHVzOiA0MDAsIGVycm9yOiAnaW52YWxpZCBob3VzZWhvbGQgaWQnIH0pOwogICAgICB9CiAgICAgIHJldHVybiByZXEucGFyYW1zLmhvdXNlaG9sZElkOwogICAgfSkKICAgIC50aGVuKChob3VzZWhvbGRJZCkgPT4gewogICAgICByZXR1cm4ga25leCgnZ2xfaG91c2Vob2xkX2RldGFpbHMnKQogICAgICAgIC53aGVyZSh7IGlkOiBob3VzZWhvbGRJZCwgdXNlcl9pZDogcmVxLnVzZXIuaWQgfSkKICAgICAgICAuZGVsKCk7CiAgICB9KQogICAgLnRoZW4oKG51bVJvd3NEZWxldGVkKSA9PiB7CiAgICAgIGlmIChudW1Sb3dzRGVsZXRlZCA9PT0gMCkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IHN0YXR1czogNDAwLCBlcnJvcjogJ2ludmFsaWQgaG91c2Vob2xkJyB9KTsKICAgICAgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoMjAwKTsKICAgIH0pCiAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgaWYgKCFfLmlzTmlsKGVycm9yLnN0YXR1cykpIHsKICAgICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoZXJyb3Iuc3RhdHVzKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgIH0pOwp9KTsKCnJvdXRlci5wb3N0KCcvaG91c2Vob2xkcy86aG91c2Vob2xkSWQvZ3Vlc3RzJywgZW5zdXJlQXV0aGVudGljYXRlZCwgZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0KSB7CiAgcmVxLmNoZWNrUGFyYW1zKCdob3VzZWhvbGRJZCcsICdJbnZhbGlkIGhvdXNlaG9sZCBJRCcpLm5vdEVtcHR5KCkuaXNJbnQoKTsKICByZXEuc2FuaXRpemVQYXJhbXMoJ2hvdXNlaG9sZElkJykudG9JbnQoKTsKCiAgcmVxLmdldFZhbGlkYXRpb25SZXN1bHQoKQogICAgLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICBpZiAoIXJlc3VsdC5pc0VtcHR5KCkpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBlcnJvcjogJ2ludmFsaWQgaG91c2Vob2xkIGlkJyB9KTsKICAgICAgfQogICAgICByZXR1cm4gcmVxLnBhcmFtcy5ob3VzZWhvbGRJZDsKICAgIH0pCiAgICAudGhlbigoaG91c2Vob2xkSWQpID0+IHsKICAgICAgcmV0dXJuIGtuZXgoJ2dsX2hvdXNlaG9sZF9kZXRhaWxzJykud2hlcmUoeyBpZDogaG91c2Vob2xkSWQsIHVzZXJfaWQ6IHJlcS51c2VyLmlkIH0pOwogICAgfSkKICAgIC50aGVuKChob3VzZWhvbGRzKSA9PiB7CiAgICAgIGlmIChfLmlzTmlsKGhvdXNlaG9sZHMpIHx8IF8uaXNOaWwoaG91c2Vob2xkc1swXSkpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBlcnJvcjogJ2hvdXNlaG9sZCBjYW5ub3QgYmUgZm91bmQuJyB9KTsKICAgICAgfQoKICAgICAgY29uc3QgaG91c2Vob2xkID0gaG91c2Vob2xkc1swXTsKICAgICAgcmV0dXJuIGtuZXgoJ2dsX2d1ZXN0cycpLnJldHVybmluZygnaWQnKS5pbnNlcnQoeyBob3VzZWhvbGRfZGV0YWlsc19pZDogaG91c2Vob2xkLmlkIH0pOwogICAgfSkKICAgIC50aGVuKChbZ3Vlc3RJZF0pID0+IHsKICAgICAgcmVzLnNlbmQoeyBndWVzdF9pZDogZ3Vlc3RJZCB9KTsKICAgIH0pCiAgICAuY2F0Y2goKGVycikgPT4gewogICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICByZXMuc2VuZFN0YXR1cyg1MDApOwogICAgfSk7Cn0pOwoKcm91dGVyLmRlbGV0ZSgnL2hvdXNlaG9sZHMvOmhvdXNlaG9sZElkL2d1ZXN0cy86Z3Vlc3RJZCcsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCkgewogIHJlcS5jaGVja1BhcmFtcygnaG91c2Vob2xkSWQnLCAnSW52YWxpZCBob3VzZWhvbGQgSUQnKS5ub3RFbXB0eSgpLmlzSW50KCk7CiAgcmVxLnNhbml0aXplUGFyYW1zKCdob3VzZWhvbGRJZCcpLnRvSW50KCk7CgogIHJlcS5jaGVja1BhcmFtcygnZ3Vlc3RJZCcsICdJbnZhbGlkIGd1ZXN0IElEJykubm90RW1wdHkoKS5pc0ludCgpOwogIHJlcS5zYW5pdGl6ZVBhcmFtcygnZ3Vlc3RJZCcpLnRvSW50KCk7CgogIHJlcS5nZXRWYWxpZGF0aW9uUmVzdWx0KCkKICAgIC50aGVuKChyZXN1bHQpID0+IHsKICAgICAgaWYgKCFyZXN1bHQuaXNFbXB0eSgpKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHsgZXJyb3I6ICdpbnZhbGlkIHBhcmFtcycgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIFtyZXEucGFyYW1zLmhvdXNlaG9sZElkLCByZXEucGFyYW1zLmd1ZXN0SWRdOwogICAgfSkKICAgIC50aGVuKChbaG91c2Vob2xkSWQsIGd1ZXN0SWRdKSA9PiB7CiAgICAgIHJldHVybiBrbmV4KCdnbF9ndWVzdHMnKQogICAgICAgIC53aGVyZSgKICAgICAgICAgICdpZCcsCiAgICAgICAgICBrbmV4KCdnbF9ndWVzdHMnKQogICAgICAgICAgICAuam9pbignZ2xfaG91c2Vob2xkX2RldGFpbHMnLCB7ICdnbF9ob3VzZWhvbGRfZGV0YWlscy5pZCc6ICdnbF9ndWVzdHMuaG91c2Vob2xkX2RldGFpbHNfaWQnIH0pCiAgICAgICAgICAgIC53aGVyZSh7CiAgICAgICAgICAgICAgJ2dsX2hvdXNlaG9sZF9kZXRhaWxzLmlkJzogaG91c2Vob2xkSWQsCiAgICAgICAgICAgICAgJ2dsX2hvdXNlaG9sZF9kZXRhaWxzLnVzZXJfaWQnOiByZXEudXNlci5pZCwKICAgICAgICAgICAgICAnZ2xfZ3Vlc3RzLmlkJzogZ3Vlc3RJZAogICAgICAgICAgICB9KQogICAgICAgICAgICAuc2VsZWN0KCdnbF9ndWVzdHMuaWQnKQogICAgICAgICAgICAubGltaXQoMSkKICAgICAgICApLmRlbCgpOwogICAgfSkKICAgIC50aGVuKChudW1Sb3dzRGVsZXRlZCkgPT4gewogICAgICBpZiAobnVtUm93c0RlbGV0ZWQgPT09IDEpIHsKICAgICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoMjAwKTsKICAgICAgfQogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBzdGF0dXM6IDQwMCwgZXJyb3I6ICdubyByZWNvcmQgaXMgZGVsZXRlZC4nIH0pOwogICAgfSkKICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICBpZiAoIV8uaXNOaWwoZXJyb3Iuc3RhdHVzKSkgewogICAgICAgIHJlcy5zZW5kU3RhdHVzKGVycm9yLnN0YXR1cyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgICAgfQogICAgfSk7Cn0pOwoKcm91dGVyLmdldCgnL2hvdXNlaG9sZHMvOmhvdXNlaG9sZElkL2dpZnRzJywgZW5zdXJlQXV0aGVudGljYXRlZCwgZnVuY3Rpb24gKHJlcSwgcmVzKXsKICByZXEuY2hlY2tQYXJhbXMoJ2hvdXNlaG9sZElkJywgJ0ludmFsaWQgaG91c2Vob2xkIElEJykubm90RW1wdHkoKS5pc0ludCgpOwogIHJlcS5zYW5pdGl6ZVBhcmFtcygnaG91c2Vob2xkSWQnKS50b0ludCgpOwoKICByZXEuZ2V0VmFsaWRhdGlvblJlc3VsdCgpCiAgICAudGhlbigocmVzdWx0KSA9PiB7CiAgICAgIGlmICghcmVzdWx0LmlzRW1wdHkoKSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IHN0YXR1czogNDAwLCBlcnJvcjogJ2ludmFsaWQgaG91c2Vob2xkIGlkJyB9KTsKICAgICAgfQogICAgICByZXR1cm4gcmVxLnBhcmFtcy5ob3VzZWhvbGRJZDsKICAgIH0pCiAgICAudGhlbigoaG91c2Vob2xkSWQpID0+IHsKICAgICAgcmV0dXJuIGtuZXgoJ2dsX2hvdXNlaG9sZF9kZXRhaWxzJykKICAgICAgICAubGVmdEpvaW4oJ2dsX2dpZnRzJywgeyAnZ2xfZ2lmdHMuaG91c2Vob2xkX2RldGFpbHNfaWQnOiAnZ2xfaG91c2Vob2xkX2RldGFpbHMuaWQnIH0pCiAgICAgICAgLndoZXJlKHsKICAgICAgICAgICdnbF9ob3VzZWhvbGRfZGV0YWlscy5pZCc6IGhvdXNlaG9sZElkLAogICAgICAgICAgJ2dsX2hvdXNlaG9sZF9kZXRhaWxzLnVzZXJfaWQnOiByZXEudXNlci5pZAogICAgICAgIH0pCiAgICAgICAgLnNlbGVjdCgKICAgICAgICAgICdnbF9naWZ0cy5pZCBBUyBnaWZ0X2lkJywKICAgICAgICAgICdnbF9naWZ0cy5uYW1lIEFTIGdpZnRfbmFtZScsCiAgICAgICAgICAnZ2xfaG91c2Vob2xkX2RldGFpbHMuZ2lmdHNfdGhhbmtlZCBBUyB0aGFua2VkJwogICAgICAgICkKICAgICAgICAub3JkZXJCeSgnZ2lmdF9pZCcsICdBU0MnKTsKICAgIH0pCiAgICAudGhlbigocmVzdWx0cykgPT4gewogICAgICBpZiAoXy5pc0VtcHR5KHJlc3VsdHMpKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHsgc3RhdHVzOiA0MDQsIGVycm9yOiAnaG91c2Vob2xkIGNhbm5vdCBiZSBmb3VuZCcgfSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHRoYW5rZWQgPSByZXN1bHRzWzBdLnRoYW5rZWQ7CiAgICAgIGNvbnN0IGdpZnRzID0gXyhyZXN1bHRzKS5maWx0ZXIocmVzdWx0ID0+ICFfLmlzTmlsKHJlc3VsdC5naWZ0X2lkKSkKICAgICAgICAubWFwKChyZXN1bHQpID0+IHsKICAgICAgICAgIGRlbGV0ZSByZXN1bHQudGhhbmtlZDsKICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfSk7CgogICAgICByZXR1cm4gcmVzLnNlbmQoeyBnaWZ0cywgdGhhbmtlZCB9KTsKICAgIH0pCiAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgaWYgKCFfLmlzTmlsKGVycm9yLnN0YXR1cykpIHsKICAgICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoZXJyb3Iuc3RhdHVzKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgIH0pOwp9KTsKCnJvdXRlci5wb3N0KCcvaG91c2Vob2xkcy86aG91c2Vob2xkSWQvZ2lmdHMnLCBlbnN1cmVBdXRoZW50aWNhdGVkLCBmdW5jdGlvbiAocmVxLCByZXMpIHsKICByZXEuY2hlY2tQYXJhbXMoJ2hvdXNlaG9sZElkJywgJ0ludmFsaWQgaG91c2Vob2xkIElEJykubm90RW1wdHkoKS5pc0ludCgpOwogIHJlcS5zYW5pdGl6ZVBhcmFtcygnaG91c2Vob2xkSWQnKS50b0ludCgpOwoKICByZXEuY2hlY2tCb2R5KCduYW1lJykubm90RW1wdHkoKTsKICByZXEuc2FuaXRpemVCb2R5KCduYW1lJykudHJpbSgpOwoKICByZXEuZ2V0VmFsaWRhdGlvblJlc3VsdCgpCiAgICAudGhlbigocmVzdWx0KSA9PiB7CiAgICAgIGlmICghcmVzdWx0LmlzRW1wdHkoKSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IGVycm9yOiAnaW52YWxpZCBwYXJhbXMnIH0pOwogICAgICB9CiAgICAgIHJldHVybiBbcmVxLnBhcmFtcy5ob3VzZWhvbGRJZCwgcmVxLmJvZHkubmFtZV07CiAgICB9KQogICAgLnRoZW4oKFtob3VzZWhvbGRJZCwgZ2lmdE5hbWVdKSA9PiB7CiAgICAgIHJldHVybiBrbmV4KCdnbF9naWZ0cycpCiAgICAgICAgLnJldHVybmluZygnaWQnKQogICAgICAgIC5pbnNlcnQoewogICAgICAgICAgbmFtZTogZ2lmdE5hbWUsCiAgICAgICAgICBob3VzZWhvbGRfZGV0YWlsc19pZDoga25leCgnZ2xfaG91c2Vob2xkX2RldGFpbHMnKQogICAgICAgICAgICAud2hlcmUoeyBpZDogaG91c2Vob2xkSWQsIHVzZXJfaWQ6IHJlcS51c2VyLmlkIH0pCiAgICAgICAgICAgIC5zZWxlY3QoJ2lkJykKICAgICAgICAgICAgLmxpbWl0KDEpCiAgICAgICAgfSk7CiAgICB9KQogICAgLnRoZW4oKGdpZnRJZCkgPT4gewogICAgICBjb25zb2xlLmxvZyhgR2lmdCAjJHtnaWZ0SWR9IGNyZWF0ZWQuYCk7CiAgICAgIHJldHVybiByZXMuc2VuZCh7IGdpZnQ6IHsgZ2lmdF9pZDogZ2lmdElkIH0gfSk7CiAgICB9KQogICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIGlmICghXy5pc05pbChlcnJvci5zdGF0dXMpKSB7CiAgICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKGVycm9yLnN0YXR1cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDUwMCk7CiAgICB9KTsKfSk7Cgpyb3V0ZXIucHV0KCcvaG91c2Vob2xkcy86aG91c2Vob2xkSWQvZ2lmdHMnLCBlbnN1cmVBdXRoZW50aWNhdGVkLCBmdW5jdGlvbiAocmVxLCByZXMpIHsKICByZXEuY2hlY2tQYXJhbXMoJ2hvdXNlaG9sZElkJywgJ0ludmFsaWQgaG91c2Vob2xkIElEJykubm90RW1wdHkoKS5pc0ludCgpOwogIHJlcS5zYW5pdGl6ZVBhcmFtcygnaG91c2Vob2xkSWQnKS50b0ludCgpOwoKICBjb25zdCBib2R5U2NoZW1hID0gewogICAgdGhhbmtlZDogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0sCiAgICAgIGlzQm9vbGVhbjogewogICAgICAgIGVycm9yTWVzc2FnZTogJ0ludmFsaWQgdmFsdWUgZm9yIHRoYW5rZWQnCiAgICAgIH0KICAgIH0KICB9OwoKICByZXEuY2hlY2tCb2R5KGJvZHlTY2hlbWEpOwoKICByZXEuZ2V0VmFsaWRhdGlvblJlc3VsdCgpCiAgICAudGhlbigocmVzdWx0KSA9PiB7CiAgICAgIGlmICghcmVzdWx0LmlzRW1wdHkoKSkgewogICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdC5hcnJheSgpKTsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBzdGF0dXM6IDQwMCwgZXJyb3I6ICdpbnZhbGlkIHBhcmFtZXRlcnMnIH0pOwogICAgICB9CgogICAgICBjb25zdCB1bnBlcm1pdHRlZFBhcmFtcyA9IF8uZGlmZmVyZW5jZShfLmtleXMocmVxLmJvZHkpLCBfLmtleXMoYm9keVNjaGVtYSkpOwoKICAgICAgY29uc3QgcGFyYW1zID0gXy5tYXBLZXlzKAogICAgICAgIF8ocmVxLmJvZHkpLm9taXQodW5wZXJtaXR0ZWRQYXJhbXMpLm9taXRCeShfLmlzVW5kZWZpbmVkKS52YWx1ZSgpLAogICAgICAgICh2YWx1ZSwga2V5KSA9PiB7CiAgICAgICAgICBpZiAoa2V5ID09PSAndGhhbmtlZCcpIHsKICAgICAgICAgICAgcmV0dXJuICdnaWZ0c190aGFua2VkJzsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBrZXk7CiAgICAgICAgfQogICAgICApOwoKICAgICAgaWYgKF8uaXNFbXB0eShwYXJhbXMpKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHsgc3RhdHVzOiA0MDAsIGVycm9yOiAndW5leHBlY3RlZCBlbXB0eSBwYXJhbXMnIH0pOwogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGhvdXNlaG9sZElkOiByZXEucGFyYW1zLmhvdXNlaG9sZElkLAogICAgICAgIHBhcmFtcwogICAgICB9OwogICAgfSkKICAgIC50aGVuKCh7IGhvdXNlaG9sZElkLCBwYXJhbXMgfSkgPT4gewogICAgICByZXR1cm4ga25leCgnZ2xfaG91c2Vob2xkX2RldGFpbHMnKQogICAgICAgIC53aGVyZSh7IGlkOiBob3VzZWhvbGRJZCwgdXNlcl9pZDogcmVxLnVzZXIuaWQgfSkKICAgICAgICAudXBkYXRlKHBhcmFtcyk7CiAgICB9KQogICAgLnRoZW4oKG51bVJvd3NVcGRhdGVkKSA9PiB7CiAgICAgIGlmIChudW1Sb3dzVXBkYXRlZCA9PT0gMCkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IHN0YXR1czogNDA0LCBlcnJvcjogJ25vIHJlY29yZCB1cGRhdGVkJyB9KTsKICAgICAgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoMjAwKTsKICAgIH0pCiAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgaWYgKCFfLmlzTmlsKGVycm9yLnN0YXR1cykpIHsKICAgICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoZXJyb3Iuc3RhdHVzKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgIH0pOwp9KTsKCnJvdXRlci5kZWxldGUoJy9ob3VzZWhvbGRzLzpob3VzZWhvbGRJZC9naWZ0cy86Z2lmdElkJywgZW5zdXJlQXV0aGVudGljYXRlZCwgZnVuY3Rpb24gKHJlcSwgcmVzKSB7CiAgcmVxLmNoZWNrUGFyYW1zKCdob3VzZWhvbGRJZCcsICdJbnZhbGlkIGhvdXNlaG9sZCBJRCcpLm5vdEVtcHR5KCkuaXNJbnQoKTsKICByZXEuc2FuaXRpemVQYXJhbXMoJ2hvdXNlaG9sZElkJykudG9JbnQoKTsKCiAgcmVxLmNoZWNrUGFyYW1zKCdnaWZ0SWQnLCAnSW52YWxpZCBnaWZ0IElEJykubm90RW1wdHkoKS5pc0ludCgpOwogIHJlcS5zYW5pdGl6ZVBhcmFtcygnZ2lmdElkJykudG9JbnQoKTsKCiAgcmVxLmdldFZhbGlkYXRpb25SZXN1bHQoKQogICAgLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICBpZiAoIXJlc3VsdC5pc0VtcHR5KCkpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBlcnJvcjogJ2ludmFsaWQgcGFyYW1zJyB9KTsKICAgICAgfQogICAgICByZXR1cm4gW3JlcS5wYXJhbXMuaG91c2Vob2xkSWQsIHJlcS5wYXJhbXMuZ2lmdElkXTsKICAgIH0pCiAgICAudGhlbigoW2hvdXNlaG9sZElkLCBnaWZ0SWRdKSA9PiB7CiAgICAgIHJldHVybiBrbmV4KCdnbF9naWZ0cycpCiAgICAgICAgLndoZXJlKHsKICAgICAgICAgIGlkOiBnaWZ0SWQsCiAgICAgICAgICBob3VzZWhvbGRfZGV0YWlsc19pZDoga25leCgnZ2xfaG91c2Vob2xkX2RldGFpbHMnKQogICAgICAgICAgICAud2hlcmUoeyBpZDogaG91c2Vob2xkSWQsIHVzZXJfaWQ6IHJlcS51c2VyLmlkIH0pCiAgICAgICAgICAgIC5zZWxlY3QoJ2lkJykKICAgICAgICAgICAgLmxpbWl0KDEpCiAgICAgICAgfSkKICAgICAgICAuZGVsKCk7CiAgICB9KQogICAgLnRoZW4oKG51bVJvd3NEZWxldGVkKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKGAke251bVJvd3NEZWxldGVkfSByb3dzIGRlbGV0ZWRgKTsKICAgICAgaWYgKG51bVJvd3NEZWxldGVkID09PSAwKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHsgc3RhdHVzOiA0MDQsIGVycm9yOiAnaG91c2Vob2xkIGFuZC9vciBnaWZ0IG5vdCBmb3VuZCcgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDIwMCk7CiAgICB9KQogICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIGlmICghXy5pc05pbChlcnJvci5zdGF0dXMpKSB7CiAgICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKGVycm9yLnN0YXR1cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDUwMCk7CiAgICB9KTsKfSk7Cgpyb3V0ZXIucHV0KCcvaG91c2Vob2xkcy86aG91c2Vob2xkSWQvZ2lmdHMvOmdpZnRJZCcsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcykgewogIGNvbnN0IHBhcmFtU2NoZW1hID0gewogICAgaG91c2Vob2xkSWQ6IHsKICAgICAgaXNJbnQ6IHsKICAgICAgICBlcnJvck1lc3NhZ2U6ICdJbnZhbGlkIGhvdXNlaG9sZCBJRCcKICAgICAgfQogICAgfSwKICAgIGdpZnRJZDogewogICAgICBpc0ludDogewogICAgICAgIGVycm9yTWVzc2FnZTogJ0ludmFsaWQgZ2lmdCBJRCcKICAgICAgfQogICAgfQogIH07CgogIGNvbnN0IGJvZHlTY2hlbWEgPSB7CiAgICBuYW1lOiB7CiAgICAgIG9wdGlvbmFsOiB7CiAgICAgICAgb3B0aW9uczogeyBjaGVja0ZhbHN5OiB0cnVlIH0KICAgICAgfQogICAgfQogIH07CgogIHZhbGlkYXRlUGFyYW1zKHJlcSwgeyBwYXJhbVNjaGVtYSwgYm9keVNjaGVtYSB9KQogICAgLnRoZW4oKHsgcGFyYW1zLCBib2R5IH0pID0+IHsKICAgICAgaWYgKF8uaXNFbXB0eShib2R5KSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IHN0YXR1czogNDAwLCBlcnJvcjogJ3VuZXhwZWN0ZWQgZW1wdHkgcGFyYW1zJyB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBob3VzZWhvbGRJZDogcGFyYW1zLmhvdXNlaG9sZElkLAogICAgICAgIGdpZnRJZDogcGFyYW1zLmdpZnRJZCwKICAgICAgICBwYXJhbXM6IGJvZHkKICAgICAgfQogICAgfSkKICAgIC50aGVuKCh7IGhvdXNlaG9sZElkLCBnaWZ0SWQsIHBhcmFtcyB9KSA9PiB7CiAgICAgIHJldHVybiBrbmV4KCdnbF9naWZ0cycpCiAgICAgICAgLndoZXJlKHsKICAgICAgICAgIGlkOiBnaWZ0SWQsCiAgICAgICAgICBob3VzZWhvbGRfZGV0YWlsc19pZDoga25leCgnZ2xfaG91c2Vob2xkX2RldGFpbHMnKQogICAgICAgICAgICAud2hlcmUoeyBpZDogaG91c2Vob2xkSWQsIHVzZXJfaWQ6IHJlcS51c2VyLmlkIH0pCiAgICAgICAgICAgIC5zZWxlY3QoJ2lkJykKICAgICAgICAgICAgLmxpbWl0KDEpCiAgICAgICAgfSkKICAgICAgICAudXBkYXRlKHBhcmFtcyk7CiAgICB9KQogICAgLnRoZW4oKG51bVJvd3NVcGRhdGVkKSA9PiB7CiAgICAgIGlmIChudW1Sb3dzVXBkYXRlZCA9PT0gMCkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IHN0YXR1czogNDA0LCBlcnJvcjogJ25vIHJlY29yZCB1cGRhdGVkJyB9KTsKICAgICAgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoMjAwKTsKICAgIH0pCiAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgaWYgKCFfLmlzTmlsKGVycm9yLnN0YXR1cykpIHsKICAgICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoZXJyb3Iuc3RhdHVzKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgIH0pOwp9KTsKCnJvdXRlci5wdXQoJy9ob3VzZWhvbGRzLzpob3VzZWhvbGRJZC9ndWVzdHMvOmd1ZXN0SWQnLCBlbnN1cmVBdXRoZW50aWNhdGVkLCBmdW5jdGlvbiAocmVxLCByZXMpIHsKICBjb25zdCBwYXJhbVNjaGVtYSA9IHsKICAgIGhvdXNlaG9sZElkOiB7CiAgICAgIGlzSW50OiB7CiAgICAgICAgZXJyb3JNZXNzYWdlOiAnSW52YWxpZCBob3VzZWhvbGQgSUQnCiAgICAgIH0KICAgIH0sCiAgICBndWVzdElkOiB7CiAgICAgIGlzSW50OiB7CiAgICAgICAgZXJyb3JNZXNzYWdlOiAnSW52YWxpZCBndWVzdCBJRCcKICAgICAgfQogICAgfQogIH07CgogIGNvbnN0IGJvZHlTY2hlbWEgPSB7CiAgICBmaXJzdF9uYW1lOiB7CiAgICAgIG9wdGlvbmFsOiB7CiAgICAgICAgb3B0aW9uczogeyBjaGVja0ZhbHN5OiB0cnVlIH0KICAgICAgfQogICAgfSwKICAgIG1pZGRsZV9uYW1lOiB7CiAgICAgIG9wdGlvbmFsOiB7CiAgICAgICAgb3B0aW9uczogeyBjaGVja0ZhbHN5OiB0cnVlIH0KICAgICAgfQogICAgfSwKICAgIGxhc3RfbmFtZTogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICBlbWFpbDogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0sCiAgICAgIGlzRW1haWw6IHsKICAgICAgICBlcnJvck1lc3NhZ2U6ICdJbnZhbGlkIEVtYWlsJwogICAgICB9CiAgICB9LAogICAgcGhvbmU6IHsKICAgICAgb3B0aW9uYWw6IHsKICAgICAgICBvcHRpb25zOiB7IGNoZWNrRmFsc3k6IHRydWUgfQogICAgICB9CiAgICB9LAogICAgaXNfYWR1bHQ6IHsKICAgICAgb3B0aW9uYWw6IHsKICAgICAgICBvcHRpb25zOiB7IGNoZWNrRmFsc3k6IHRydWUgfQogICAgICB9LAogICAgICBpc0Jvb2xlYW46IHsKICAgICAgICBlcnJvck1lc3NhZ2U6ICdJbnZhbGlkIHZhbHVlIGZvciBpc19hZHVsdCcKICAgICAgfQogICAgfSwKICAgIGFnZTogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICByZXF1ZXN0c19jaGFpcjogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICBkaWV0X3Jlc3RyaWN0aW9uczogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICByZXF1ZXN0c19vdGhlcjogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0KICB9OwoKICB2YWxpZGF0ZVBhcmFtcyhyZXEsIHsgcGFyYW1TY2hlbWEsIGJvZHlTY2hlbWEgfSkKICAgIC50aGVuKCh7IHBhcmFtcywgYm9keSB9KSA9PiB7CiAgICAgIGNvbnN0IHVwZGF0ZVBhcmFtcyA9IF8ubWFwS2V5cygKICAgICAgICBib2R5LAogICAgICAgICh2YWx1ZSwga2V5KSA9PiB7CiAgICAgICAgICBpZiAoa2V5ID09PSAncmVxdWVzdHNfY2hhaXInKSB7CiAgICAgICAgICAgIHJldHVybiAnY2hhaXJfcmVxdWVzdCc7CiAgICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2RpZXRfcmVzdHJpY3Rpb25zJykgewogICAgICAgICAgICByZXR1cm4gJ3Jlc3RyaWN0aW9ucyc7CiAgICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ3JlcXVlc3RzX290aGVyJykgewogICAgICAgICAgICByZXR1cm4gJ290aGVyX3JlcXVlc3RzJzsKICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnaXNfYWR1bHQnKSB7CiAgICAgICAgICAgIHJldHVybiAnYWR1bHRfdHJ1ZSc7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4ga2V5OwogICAgICAgIH0KICAgICAgKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBob3VzZWhvbGRJZDogcGFyYW1zLmhvdXNlaG9sZElkLAogICAgICAgIGd1ZXN0SWQ6IHBhcmFtcy5ndWVzdElkLAogICAgICAgIHBhcmFtczogdXBkYXRlUGFyYW1zCiAgICAgIH0KICAgIH0pCiAgICAudGhlbigoeyBob3VzZWhvbGRJZCwgZ3Vlc3RJZCwgcGFyYW1zIH0pID0+IHsKICAgICAgcmV0dXJuIGtuZXgoJ2dsX2d1ZXN0cycpCiAgICAgICAgLndoZXJlKHsKICAgICAgICAgIGlkOiBndWVzdElkLAogICAgICAgICAgaG91c2Vob2xkX2RldGFpbHNfaWQ6IGtuZXgoJ2dsX2hvdXNlaG9sZF9kZXRhaWxzJykKICAgICAgICAgICAgLndoZXJlKHsgaWQ6IGhvdXNlaG9sZElkLCB1c2VyX2lkOiByZXEudXNlci5pZCB9KQogICAgICAgICAgICAuc2VsZWN0KCdpZCcpCiAgICAgICAgICAgIC5saW1pdCgxKQogICAgICAgIH0pCiAgICAgICAgLnVwZGF0ZShwYXJhbXMpOwogICAgfSkKICAgIC50aGVuKChudW1Sb3dzVXBkYXRlZCkgPT4gewogICAgICBjb25zb2xlLmxvZyhgJHtudW1Sb3dzVXBkYXRlZH0gcm93cyB1cGRhdGVkYCk7CiAgICAgIGlmIChudW1Sb3dzVXBkYXRlZCA9PT0gMSkgewogICAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cygyMDApOwogICAgICB9CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IHN0YXR1czogNDA0LCBlcnJvcjogJ2hvdXNlaG9sZC9ndWVzdCBjYW5ub3QgYmUgZm91bmQnIH0pOwogICAgfSkKICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICBpZiAoIV8uaXNOaWwoZXJyb3Iuc3RhdHVzKSkgewogICAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyhlcnJvci5zdGF0dXMpOwogICAgICB9CiAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyg1MDApOwogICAgfSk7Cn0pOwoKcm91dGVyLnB1dCgnL2hvdXNlaG9sZHMvOmhvdXNlaG9sZElkL2d1ZXN0cy86Z3Vlc3RJZC9yc3Zwcy86ZXZlbnRJZCcsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcykgewogIHJlcS5jaGVja1BhcmFtcygnaG91c2Vob2xkSWQnLCAnSW52YWxpZCBob3VzZWhvbGQgSUQnKS5ub3RFbXB0eSgpLmlzSW50KCk7CiAgcmVxLnNhbml0aXplUGFyYW1zKCdob3VzZWhvbGRJZCcpLnRvSW50KCk7CgogIHJlcS5jaGVja1BhcmFtcygnZ3Vlc3RJZCcsICdJbnZhbGlkIGd1ZXN0IElEJykubm90RW1wdHkoKS5pc0ludCgpOwogIHJlcS5zYW5pdGl6ZVBhcmFtcygnZ3Vlc3RJZCcpLnRvSW50KCk7CgogIHJlcS5jaGVja1BhcmFtcygnZXZlbnRJZCcsICdJbnZhbGlkZSBldmVudCBpZCcpLm5vdEVtcHR5KCkuaXNJbnQoKTsKICByZXEuc2FuaXRpemVQYXJhbXMoJ2V2ZW50SWQnKS50b0ludCgpOwoKICBjb25zdCBib2R5U2NoZW1hID0gewogICAgaXNfYXR0ZW5kaW5nOiB7CiAgICAgIG9wdGlvbmFsOiB7CiAgICAgICAgb3B0aW9uczogeyBjaGVja0ZhbHN5OiB0cnVlIH0KICAgICAgfSwKICAgICAgaXNCb29sZWFuOiB7CiAgICAgICAgZXJyb3JNZXNzYWdlOiAnSW52YWxpZCB2YWx1ZSBmb3IgaXNfYXR0ZW5kaW5nJwogICAgICB9CiAgICB9LAogICAgbWVhbF9zZWxlY3Rpb25faWQ6IHsKICAgICAgb3B0aW9uYWw6IHsKICAgICAgICBvcHRpb25zOiB7IGNoZWNrRmFsc3k6IHRydWUgfQogICAgICB9LAogICAgICBpc0ludDogewogICAgICAgIGVycm9yTWVzc2FnZTogJ0ludmFsaWQgdmFsdWUgZm9yIG1lYWxfc2VsZWN0aW9uX2lkJwogICAgICB9CiAgICB9CiAgfTsKCiAgcmVxLmNoZWNrQm9keShib2R5U2NoZW1hKTsKCiAgcmVxLmdldFZhbGlkYXRpb25SZXN1bHQoKQogICAgLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICBpZiAoIXJlc3VsdC5pc0VtcHR5KCkpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBlcnJvcjogJ2ludmFsaWQgcGFyYW1zJyB9KTsKICAgICAgfQoKICAgICAgLy8gZmluZCB1bnBlcm1pdHRlZCBwYXJhbXMKICAgICAgY29uc3QgdW5wZXJtaXR0ZWRQYXJhbXMgPSBfLmRpZmZlcmVuY2UoXy5rZXlzKHJlcS5ib2R5KSwgXy5rZXlzKGJvZHlTY2hlbWEpKTsKCiAgICAgIGNvbnN0IHBhcmFtcyA9IF8ubWFwS2V5cygKICAgICAgICBfKHJlcS5ib2R5KS5vbWl0KHVucGVybWl0dGVkUGFyYW1zKS5vbWl0QnkoXy5pc1VuZGVmaW5lZCkudmFsdWUoKSwKICAgICAgICAodmFsdWUsIGtleSkgPT4gewogICAgICAgICAgaWYgKGtleSA9PT0gJ2lzX2F0dGVuZGluZycpIHsKICAgICAgICAgICAgcmV0dXJuICdhdHRlbmRpbmdfdHJ1ZSc7CiAgICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ21lYWxfc2VsZWN0aW9uX2lkJykgewogICAgICAgICAgICByZXR1cm4gJ21lYWxfaWQnOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGtleTsKICAgICAgICB9CiAgICAgICk7CgogICAgICByZXR1cm4gewogICAgICAgIGhvdXNlaG9sZElkOiByZXEucGFyYW1zLmhvdXNlaG9sZElkLAogICAgICAgIGd1ZXN0SWQ6IHJlcS5wYXJhbXMuZ3Vlc3RJZCwKICAgICAgICBldmVudElkOiByZXEucGFyYW1zLmV2ZW50SWQsCiAgICAgICAgcGFyYW1zCiAgICAgIH07CiAgICB9KQogICAgLnRoZW4oKHsgaG91c2Vob2xkSWQsIGd1ZXN0SWQsIGV2ZW50SWQsIHBhcmFtcyB9KSA9PiB7CiAgICAgIC8vIEVuc3VyZQogICAgICAvLyAgIDEuIGhvdXNlaG9sZCBpcyBpbnZpdGVkIHRvIHRoZSBldmVudAogICAgICAvLyAgIDIuIGhvdXNlaG9sZCBoYXMgdGhpcyBndWVzdAogICAgICAvLyAgIDMuIGV2ZW50IGhhcyB0aGUgbWVhbAogICAgICBsZXQgcXVlcnlCdWlsZGVyID0ga25leCgnZ2xfaG91c2Vob2xkX2RldGFpbHMnKQogICAgICAgIC5qb2luKCdnbF9ldmVudHMnLCB7ICdnbF9ldmVudHMudXNlcl9pZCc6ICdnbF9ob3VzZWhvbGRfZGV0YWlscy51c2VyX2lkJyB9KQogICAgICAgIC5qb2luKCdnbF9ndWVzdHMnLCB7ICdnbF9ndWVzdHMuaG91c2Vob2xkX2RldGFpbHNfaWQnOiAnZ2xfaG91c2Vob2xkX2RldGFpbHMuaWQnIH0pOwogICAgICBjb25zdCB3aGVyZUNsYXVzZSA9IHsKICAgICAgICAnZ2xfaG91c2Vob2xkX2RldGFpbHMuaWQnOiBob3VzZWhvbGRJZCwKICAgICAgICAnZ2xfaG91c2Vob2xkX2RldGFpbHMudXNlcl9pZCc6IHJlcS51c2VyLmlkLAogICAgICAgICdnbF9ndWVzdHMuaWQnOiBndWVzdElkLAogICAgICAgICdnbF9ldmVudHMuaWQnOiBldmVudElkCiAgICAgIH07CgogICAgICBjb25zdCBzZWxlY3RDb2x1bW5zID0gWydnbF9ndWVzdHMuaWQgQVMgZ3Vlc3RfaWQnLCAnZ2xfZXZlbnRzLmlkIEFTIGV2ZW50X2lkJ107CgogICAgICBpZiAoIV8uaXNVbmRlZmluZWQocGFyYW1zLm1lYWxfaWQpKSB7CiAgICAgICAgcXVlcnlCdWlsZGVyID0gcXVlcnlCdWlsZGVyLmpvaW4oJ2dsX21lYWxzJywgeyAnZ2xfbWVhbHMuZXZlbnRfaWQnOiAnZ2xfZXZlbnRzLmlkJyB9KTsKICAgICAgICB3aGVyZUNsYXVzZVsnZ2xfbWVhbHMuaWQnXSA9IHBhcmFtcy5tZWFsX2lkOwogICAgICAgIHNlbGVjdENvbHVtbnMucHVzaCgnZ2xfbWVhbHMuaWQgQVMgbWVhbF9pZCcpOwogICAgICB9CgogICAgICBpZiAoIV8uaXNOaWwocGFyYW1zLmF0dGVuZGluZ190cnVlKSkgewogICAgICAgIHNlbGVjdENvbHVtbnMucHVzaChrbmV4LnJhdyhgJHtwYXJhbXMuYXR0ZW5kaW5nX3RydWV9IEFTIGF0dGVuZGluZ190cnVlYCkpOwogICAgICB9CgogICAgICBxdWVyeUJ1aWxkZXIgPSBxdWVyeUJ1aWxkZXIud2hlcmUod2hlcmVDbGF1c2UpLnNlbGVjdChzZWxlY3RDb2x1bW5zKS5saW1pdCgxKTsKCiAgICAgIHJldHVybiBxdWVyeUJ1aWxkZXI7CiAgICB9KQogICAgLnRoZW4oKFtyZXN1bHRdKSA9PiB7CiAgICAgIGlmIChfLmlzTmlsKHJlc3VsdCkpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBzdGF0dXM6IDQwNCwgZXJyb3I6ICdob3VzZWhvbGQvZ3Vlc3QvZXZlbnQvbWVhbCBub3QgZm91bmQnIH0pOwogICAgICB9CgogICAgICAvLyBVcHNlcnQ6IElOU0VSVCBvciBVUERBVEUKICAgICAgY29uc3QgdXBkYXRlUGFyYW1zS2V5ID0gWydtZWFsX2lkJywgJ2F0dGVuZGluZ190cnVlJ107CiAgICAgIGNvbnN0IHVwZGF0ZVBhcmFtcyA9IF8ocmVzdWx0KS5waWNrQnkoKHZhbHVlLCBrZXkpID0+IHVwZGF0ZVBhcmFtc0tleS5pbmNsdWRlcyhrZXkpKS52YWx1ZSgpOwogICAgICBjb25zdCB1cGRhdGVTcWwgPSBfLmtleXModXBkYXRlUGFyYW1zKS5tYXAoa2V5ID0+IGtuZXgucmF3KCc/PyA9IEVYQ0xVREVELj8/JywgW2tleSwga2V5XSkudG9TdHJpbmcoKSkuam9pbignLCAnKTsKICAgICAgY29uc3QgaW5zZXJ0U3FsID0ga25leCgnZ2xfZXZlbnRfcnN2cHMnKS5pbnNlcnQoXy5kZWZhdWx0cyhyZXN1bHQsIHsgYXR0ZW5kaW5nX3RydWU6IGZhbHNlIH0pKS50b1N0cmluZygpOwogICAgICBjb25zdCB1cHNlcnRTcWwgPSBrbmV4LnJhdyhgIE9OIENPTkZMSUNUIChldmVudF9pZCwgZ3Vlc3RfaWQpIERPIFVQREFURSBTRVQgJHt1cGRhdGVTcWx9IFJFVFVSTklORyBpZDtgKS50b1N0cmluZygpOwogICAgICBjb25zdCBzcWwgPSBgJHtpbnNlcnRTcWx9ICR7dXBzZXJ0U3FsfWA7CgogICAgICByZXR1cm4ga25leC5yYXcoc3FsKTsKICAgIH0pCiAgICAudGhlbigoeyByb3dzOiBbcmVzdWx0XSB9KSA9PiB7CiAgICAgIGlmIChfLmlzTmlsKHJlc3VsdCkpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBzdGF0dXM6IDQyMiwgZXJyb3I6ICdlcnJvciBwcm9jZXNzaW5nIHRoZSByZWNvcmQnIH0pOwogICAgICB9CiAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cygyMDApOwogICAgfSkKICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICBpZiAoIV8uaXNOaWwoZXJyb3Iuc3RhdHVzKSkgewogICAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyhlcnJvci5zdGF0dXMpOwogICAgICB9CiAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyg1MDApOwogICAgfSk7Cn0pOwoKcm91dGVyLmdldCgnL3JlcG9ydHMvZmxpZ2h0JywgZW5zdXJlQXV0aGVudGljYXRlZCwgZnVuY3Rpb24gKHJlcSwgcmVzKSB7CiAgR3Vlc3RMaXN0LmdldEZsaWdodFJlcG9ydERhdGEocmVxLnVzZXIuaWQpCiAgICAudGhlbigocmVzdWx0cykgPT4gewogICAgICByZXR1cm4gcmVzLnNlbmQocmVzdWx0cyk7CiAgICB9KQogICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgaWYgKCFfLmlzTmlsKGVycm9yLnN0YXR1cykpIHsgcmV0dXJuIHJlcy5zZW5kKGVycm9yLnN0YXR1cyk7IH0KICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDUwMCk7CiAgICB9KTsKfSk7Cgpyb3V0ZXIuZ2V0KCcvcmVwb3J0cy9ob3RlbCcsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcykgewogIEd1ZXN0TGlzdC5nZXRIb3RlbFJlcG9ydERhdGEocmVxLnVzZXIuaWQpCiAgICAudGhlbigocmVzdWx0cykgPT4gewogICAgICByZXR1cm4gcmVzLnNlbmQocmVzdWx0cyk7CiAgICB9KQogICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgaWYgKCFfLmlzTmlsKGVycm9yLnN0YXR1cykpIHsgcmV0dXJuIHJlcy5zZW5kKGVycm9yLnN0YXR1cyk7IH0KICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDUwMCk7CiAgICB9KTsKfSk7Cgpyb3V0ZXIuZ2V0KCcvcmVwb3J0cy9haXJsaW5lX2dyb3VwX3JlcG9ydCcsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcykgewogIEd1ZXN0TGlzdC5nZXRBaXJsaW5lUmVwb3J0RGF0YShyZXEudXNlci5pZCkKICAgIC50aGVuKChyZXN1bHRzKSA9PiB7CiAgICAgIHJldHVybiByZXMuc2VuZChyZXN1bHRzKTsKICAgIH0pCiAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICBpZiAoIV8uaXNOaWwoZXJyb3Iuc3RhdHVzKSkgeyByZXR1cm4gcmVzLnNlbmQoZXJyb3Iuc3RhdHVzKTsgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgIH0pOwp9KTsKCnJvdXRlci5nZXQoJy9yZXBvcnRzL3NlYXRpbmcnLCBlbnN1cmVBdXRoZW50aWNhdGVkLCBmdW5jdGlvbiAocmVxLCByZXMpIHsKICBHdWVzdExpc3QuZ2V0U2VhdGluZ1JlcG9ydERhdGEocmVxLnVzZXIuaWQpCiAgICAudGhlbigocmVzdWx0cykgPT4gewogICAgICByZXR1cm4gcmVzLnNlbmQocmVzdWx0cyk7CiAgICB9KQogICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgaWYgKCFfLmlzTmlsKGVycm9yLnN0YXR1cykpIHsgcmV0dXJuIHJlcy5zZW5kKGVycm9yLnN0YXR1cyk7IH0KICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgIH0pOwp9KTsKCnJvdXRlci5wb3N0KCcvcmVwb3J0cy9jdXN0b20nLCBlbnN1cmVBdXRoZW50aWNhdGVkLCBmdW5jdGlvbiAocmVxLCByZXMpIHsKCiAgcmVxLmNoZWNrQm9keSgnbmFtZScpLm5vdEVtcHR5KCk7CiAgcmVxLnNhbml0aXplQm9keSgnbmFtZScpLnRyaW0oKTsKICByZXEuZ2V0VmFsaWRhdGlvblJlc3VsdCgpCiAgICAudGhlbigocmVzdWx0KSA9PiB7CgogICAgICBpZiAoIXJlc3VsdC5pc0VtcHR5KCkpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBlcnJvcjogJ2ludmFsaWQgcGFyYW1zJyB9KTsKICAgICAgfQoKICAgICAgaWYgKHJlcS5ib2R5LmNvbHVtbnMpIHsKICAgICAgICBpZighQXJyYXkuaXNBcnJheShyZXEuYm9keS5jb2x1bW5zKSkgewogICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHsgc3RhdHVzOiA0MDAsIGVycm9yOiAndW5leHBlY3RlZCBwYXJhbXMnIH0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAga25leCgnZ2xfY3VzdG9tX3JlcG9ydHMnKQogICAgICAgIC5yZXR1cm5pbmcoWydpZCcsICAnbmFtZScsICdjb2x1bW5zJ10pCiAgICAgICAgLmluc2VydCh7IHVzZXJfaWQ6IHJlcS51c2VyLmlkLCBuYW1lOiByZXEuYm9keS5uYW1lLCBjb2x1bW5zOiBKU09OLnN0cmluZ2lmeShyZXEuYm9keS5jb2x1bW5zKSwgdG9rZW46IHJhbmRUb2tlbi5nZW5lcmF0ZSg2KX0pCiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocm93KSB7CiAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoeyBjdXN0b21fcmVwb3J0X2lkOiByb3dbMF0uaWQsIG5hbWU6IHJvd1swXS5uYW1lLCBjb2x1bW5zOiByb3dbMF0uY29sdW1ucyB9KTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICAgICAgaWYgKCFfLmlzTmlsKGVycm9yLnN0YXR1cykpIHsgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKGVycm9yLnN0YXR1cyk7IH0KICAgICAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyg1MDApOwogICAgICAgIH0pOwogICAgfSk7Cn0pOwoKcm91dGVyLnB1dCgnL3JlcG9ydHMvY3VzdG9tLzpyZXBvcnRJZCcsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcykgewogIGNvbnN0IHBhcmFtU2NoZW1hID0gewogICAgcmVwb3J0SWQ6IHsKICAgICAgbm90RW1wdHk6IHRydWUKICAgIH0KICB9OwoKICBjb25zdCBib2R5U2NoZW1hID0gewogICAgbmFtZTogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICBjb2x1bW5zOiB7CiAgICAgIG9wdGlvbmFsOiB7CiAgICAgICAgb3B0aW9uczogeyBjaGVja0ZhbHN5OiB0cnVlIH0KICAgICAgfQogICAgfQogIH07CgogIFByb21pc2UuYWxsKFsKICAgIHZhbGlkYXRlUGFyYW1zKHJlcSwgeyBwYXJhbVNjaGVtYSwgYm9keVNjaGVtYSB9KSwKICAgIEd1ZXN0TGlzdC5nZXRDdXN0b21SZXBvcnRQYWdlTWVudShyZXEudXNlci5pZCkKICBdKQogICAgLnRoZW4oZnVuY3Rpb24ocmVzdWx0cykgewogICAgICB2YXIgYm9keSA9IHJlc3VsdHNbMF0uYm9keTsKICAgICAgaWYgKF8uaXNFbXB0eShib2R5KSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IHN0YXR1czogNDAwLCBlcnJvcjogJ3VuZXhwZWN0ZWQgZW1wdHkgcGFyYW1zJyB9KTsKICAgICAgfQoKICAgICAgaWYgKGJvZHkuY29sdW1ucykgewogICAgICAgIGlmKCFBcnJheS5pc0FycmF5KGJvZHkuY29sdW1ucykpIHsKICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IHN0YXR1czogNDAwLCBlcnJvcjogJ3VuZXhwZWN0ZWQgcGFyYW1zJyB9KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnN0IGNvbHMgPSByZXN1bHRzWzFdOwogICAgICB2YXIgY29sX2FyciA9IFtdOwogICAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBjb2xzKSB7CiAgICAgICAgY29sc1twcm9wZXJ0eV0uZm9yRWFjaChmdW5jdGlvbih4KXsKICAgICAgICAgIGNvbF9hcnIucHVzaCh4KTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgLy8gcmVtb3ZlIGFueSBjb2x1bW5zIHdlIGNhbid0IGFjdHVhbGx5IAogICAgICAvLyBwdXQgaW50byBhIHJlcG9ydCB3aGVuIHRoZXkgbG9hZCB0aGUgcGFnZQogICAgICB2YXIgZGlmZiA9IF8uZGlmZmVyZW5jZShib2R5LmNvbHVtbnMsIGNvbF9hcnIpOwogICAgICBkaWZmLmZvckVhY2goZnVuY3Rpb24gKGRpZmZfZWwpewogICAgICAgIF8ucHVsbChib2R5LmNvbHVtbnMsIGRpZmZfZWwpOwogICAgICB9KTsKCiAgICAgIC8vIHN0aWNrIGFueSB2YWxpZCBjb2x1bW5zIGJhY2sgaW4gdGhlIGJvZHkKICAgICAgYm9keS5jb2x1bW5zID0gSlNPTi5zdHJpbmdpZnkoYm9keS5jb2x1bW5zKTsKCiAgICAgIHJldHVybiB7CiAgICAgICAgcmVwb3J0SWQ6IHJlc3VsdHNbMF0ucGFyYW1zLnJlcG9ydElkLAogICAgICAgIHBhcmFtczogYm9keQogICAgICB9OwoKICAgIH0pCiAgICAudGhlbigoeyByZXBvcnRJZCwgcGFyYW1zIH0pID0+IHsKICAgICAgcmV0dXJuIGtuZXgoJ2dsX2N1c3RvbV9yZXBvcnRzJykKICAgICAgICAud2hlcmUoeyBpZDogcmVwb3J0SWQsIHVzZXJfaWQ6IHJlcS51c2VyLmlkIH0pCiAgICAgICAgLnVwZGF0ZShwYXJhbXMpOwogICAgfSkKICAgIC50aGVuKChudW1Sb3dzVXBkYXRlZCkgPT4gewogICAgICBpZiAobnVtUm93c1VwZGF0ZWQgPT09IDApIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBzdGF0dXM6IDQwNCwgZXJyb3I6ICdubyByZXBvcnQgZm91bmQnIH0pOwogICAgICB9CiAgICAgIHJldHVybiByZXMuc2VuZCgyMDApOwogICAgfSkKICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICBpZiAoIV8uaXNOaWwoZXJyb3Iuc3RhdHVzKSkgewogICAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyhlcnJvci5zdGF0dXMpOwogICAgICB9CiAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyg1MDApOwogICAgfSk7Cn0pOwoKcm91dGVyLmdldCgnL3JlcG9ydHMvY3VzdG9tLzpyZXBvcnRJRCcsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uKHJlcSwgcmVzKSB7CgogIGNvbnN0IHBhcmFtU2NoZW1hID0gewogICAgcmVwb3J0SUQ6IHsKICAgICAgbm90RW1wdHk6IHRydWUKICAgIH0KICB9OwoKICB2YWxpZGF0ZVBhcmFtcyhyZXEsIHsgcGFyYW1TY2hlbWEgfSkKICAgIC50aGVuKCh7IHBhcmFtcyB9KSA9PiB7CiAgICAgIGlmIChfLmlzRW1wdHkocGFyYW1zKSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IHN0YXR1czogNDAwLCBlcnJvcjogJ3VuZXhwZWN0ZWQgZW1wdHkgcGFyYW1zJyB9KTsKICAgICAgfQogICAgICByZXR1cm4gcGFyYW1zLnJlcG9ydElEOwogICAgfSkKICAgIC50aGVuKChyZXBvcnRJRCkgPT4gewogICAgICBHdWVzdExpc3QuZ2V0Q3VzdG9tUmVwb3J0U2V0dGluZ3MocmVxLnVzZXIuaWQsIHJlcG9ydElEKQogICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3VsdHMpIHsKICAgICAgICAgIHJldHVybiByZXMuc2VuZChyZXN1bHRzKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikgewogICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgICAgICBpZiAoIV8uaXNOaWwoZXJyb3Iuc3RhdHVzKSkgeyByZXR1cm4gcmVzLnNlbmQoZXJyb3Iuc3RhdHVzKTsgfQogICAgICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDUwMCk7CiAgICAgICAgfSk7CiAgICB9KTsKfSk7Cgpyb3V0ZXIuZGVsZXRlKCcvcmVwb3J0cy9jdXN0b20vOnJlcG9ydElkJywgZW5zdXJlQXV0aGVudGljYXRlZCwgZnVuY3Rpb24gKHJlcSwgcmVzKSB7CiAgY29uc3QgcGFyYW1TY2hlbWEgPSB7CiAgICByZXBvcnRJZDogewogICAgICBub3RFbXB0eTogdHJ1ZQogICAgfQogIH07CgogIHZhbGlkYXRlUGFyYW1zKHJlcSwgeyBwYXJhbVNjaGVtYSB9KQogICAgLnRoZW4oKHsgcGFyYW1zIH0pID0+IHsKICAgICAgaWYgKF8uaXNFbXB0eShwYXJhbXMpKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHsgc3RhdHVzOiA0MDAsIGVycm9yOiAndW5leHBlY3RlZCBlbXB0eSBwYXJhbXMnIH0pOwogICAgICB9CgogICAgICByZXR1cm4gcGFyYW1zLnJlcG9ydElkOwogICAgfSkKICAgIC50aGVuKChyZXBvcnRJZCkgPT4gewogICAgICByZXR1cm4ga25leCgnZ2xfY3VzdG9tX3JlcG9ydHMnKQogICAgICAgIC53aGVyZSh7IGlkOiByZXBvcnRJZCwgdXNlcl9pZDogcmVxLnVzZXIuaWQgfSkKICAgICAgICAuZGVsZXRlKCk7CiAgICB9KQogICAgLnRoZW4oKG51bVJvd3NEZWxldGVkKSA9PiB7CiAgICAgIGlmIChudW1Sb3dzRGVsZXRlZCA9PT0gMCkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IHN0YXR1czogNDA0LCBlcnJvcjogJ25vIHJlY29yZCBpcyBkZWxldGVkJyB9KTsKICAgICAgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoMjAwKTsKICAgIH0pCiAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgaWYgKCFfLmlzTmlsKGVycm9yLnN0YXR1cykpIHsKICAgICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoZXJyb3Iuc3RhdHVzKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgIH0pOwp9KTsKCnJvdXRlci5nZXQoJy9yZXBvcnRzL21lbnVfc2VsZWN0aW9ucycsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcykgewogIEd1ZXN0TGlzdC5nZXRNZW51U2VsZWN0aW9uc1JlcG9ydERhdGEocmVxLnVzZXIuaWQpCiAgICAudGhlbigocmVzdWx0cykgPT4gewogICAgICByZXR1cm4gcmVzLnNlbmQocmVzdWx0cyk7CiAgICB9KQogICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgaWYgKCFfLmlzTmlsKGVycm9yLnN0YXR1cykpIHsgcmV0dXJuIHJlcy5zZW5kKGVycm9yLnN0YXR1cyk7IH0KICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDUwMCk7CiAgICB9KTsKfSk7Cgpyb3V0ZXIuZ2V0KCcvb3Blbi1yZXBvcnRzLzpoYXNoZWRjb2RlJywgZnVuY3Rpb24gKHJlcSwgcmVzKSB7CgogIC8vIERlY29kZSB0aGUgaGFzaGVkY29kZSBmb3IgZmV0Y2hpbmcgcmlnaHQgZGF0YQogIHZhciBoYXNoaWRzID0gbmV3IEhhc2hpZHMoJycsIDgsICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWjEyMzQ1Njc4OTAnKTsKICB2YXIgY29kZXMgPSBoYXNoaWRzLmRlY29kZShyZXEucGFyYW1zLmhhc2hlZGNvZGUpOwogIHZhciB1c2VySWQgPSBjb2Rlc1swXTsKICB2YXIgcmVwb3J0Q29kZSA9IGNvZGVzWzFdOwogIHZhciByZXBvcnQgPSBudWxsOwoKICBzd2l0Y2gocmVwb3J0Q29kZSkgewogICAgY2FzZSAxOgogICAgICByZXBvcnQgPSBHdWVzdExpc3QuZ2V0RmxpZ2h0UmVwb3J0RGF0YSh1c2VySWQpOwogICAgICBicmVhazsKICAgIGNhc2UgMjoKICAgICAgcmVwb3J0ID0gR3Vlc3RMaXN0LmdldEhvdGVsUmVwb3J0RGF0YSh1c2VySWQpOwogICAgICBicmVhazsKICAgIGNhc2UgMzoKICAgICAgcmVwb3J0ID0gR3Vlc3RMaXN0LmdldEFpcmxpbmVSZXBvcnREYXRhKHVzZXJJZCk7CiAgICAgIGJyZWFrOwogICAgY2FzZSA0OgogICAgICByZXBvcnQgPSBHdWVzdExpc3QuZ2V0TWVudVNlbGVjdGlvbnNSZXBvcnREYXRhKHVzZXJJZCk7CiAgICAgIGJyZWFrOwogICAgY2FzZSA1OgogICAgICByZXBvcnQgPSBHdWVzdExpc3QuZ2V0U2VhdGluZ1JlcG9ydERhdGEodXNlcklkKTsKICAgICAgYnJlYWs7CiAgICBjYXNlIDY6CiAgICAgIHZhciByZXBvcnRJZCA9IGNvZGVzWzJdOwogICAgICByZXBvcnQgPSBHdWVzdExpc3QuZ2V0Q3VzdG9tUmVwb3J0QWxsRGF0YSh1c2VySWQsIHJlcG9ydElkKTsKICAgICAgYnJlYWs7CiAgICBkZWZhdWx0OgogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNTAwKTsKICB9CgogIC8vIEZldGNoIGRhdGEgYW5kIHJldHVybiB0byB0aGUgY2xpZW50CiAgcmVwb3J0LnRoZW4oKHJlc3VsdHMpID0+IHsKICAgIHJldHVybiByZXMuc2VuZChyZXN1bHRzKTsKICB9KQogICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgaWYgKCFfLmlzTmlsKGVycm9yLnN0YXR1cykpIHsgcmV0dXJuIHJlcy5zZW5kKGVycm9yLnN0YXR1cyk7IH0KICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDUwMCk7CiAgICB9KTsKfSk7Cgpyb3V0ZXIuZ2V0KCcvaG91c2Vob2xkcy86aG91c2Vob2xkSWQvZ3Vlc3RzL3RyYXZlbF9hY2NvbW1vZGF0aW9ucycsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcykgewogIGNvbnN0IHBhcmFtU2NoZW1hID0gewogICAgaG91c2Vob2xkSWQ6IHsKICAgICAgaXNJbnQ6IHsKICAgICAgICBlcnJvck1lc3NhZ2U6ICdJbnZhbGlkIGhvdXNlaG9sZCBJRCcKICAgICAgfQogICAgfQogIH07CgogIHZhbGlkYXRlUGFyYW1zKHJlcSwgeyBwYXJhbVNjaGVtYSB9KQogICAgLnRoZW4oKHsgcGFyYW1zIH0pID0+IHsKICAgICAgaWYgKF8uaXNFbXB0eShwYXJhbXMpKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHsgc3RhdHVzOiA0MDAsIGVycm9yOiAnaW52YWxpZCBob3VzZWhvbGQgSUQnIH0pOwogICAgICB9CgogICAgICByZXR1cm4gcGFyYW1zLmhvdXNlaG9sZElkOwogICAgfSkKICAgIC50aGVuKChob3VzZWhvbGRJZCkgPT4gewogICAgICByZXR1cm4ga25leCgnZ2xfaG91c2Vob2xkX2RldGFpbHMnKQogICAgICAgIC5qb2luKCdnbF9ndWVzdHMnLCB7ICdnbF9ndWVzdHMuaG91c2Vob2xkX2RldGFpbHNfaWQnOiAnZ2xfaG91c2Vob2xkX2RldGFpbHMuaWQnIH0pCiAgICAgICAgLmxlZnRKb2luKCdnbF9mbGlnaHRfZGV0YWlscycsIHsgJ2dsX2ZsaWdodF9kZXRhaWxzLmd1ZXN0X2lkJzogJ2dsX2d1ZXN0cy5pZCcgfSkKICAgICAgICAubGVmdEpvaW4oJ2dsX2hvdGVsX2RldGFpbHMnLCB7ICdnbF9ob3RlbF9kZXRhaWxzLmd1ZXN0X2lkJyA6ICdnbF9ndWVzdHMuaWQnIH0pCiAgICAgICAgLnNlbGVjdCgKICAgICAgICAgICdnbF9ndWVzdHMuaWQgQVMgZ3Vlc3RfaWQnLAogICAgICAgICAgJ2dsX2d1ZXN0cy5maXJzdF9uYW1lIEFTIGZpcnN0X25hbWUnLAogICAgICAgICAgJ2dsX2d1ZXN0cy5taWRkbGVfbmFtZSBBUyBtaWRkbGVfbmFtZScsCiAgICAgICAgICAnZ2xfZ3Vlc3RzLmxhc3RfbmFtZSBBUyBsYXN0X25hbWUnLAogICAgICAgICAgJ2dsX2hvdGVsX2RldGFpbHMuaG90ZWxfbmFtZSBBUyBob3RlbF9uYW1lJywKICAgICAgICAgICdnbF9ob3RlbF9kZXRhaWxzLnJvb21fbnVtYmVyIEFTIHJvb21fbnVtYmVyJywKICAgICAgICAgICdnbF9ob3RlbF9kZXRhaWxzLmFycml2YWxfZGF0ZV90aW1lIEFTIGhvdGVsX2Fycml2YWwnLAogICAgICAgICAgJ2dsX2hvdGVsX2RldGFpbHMuZGVwYXJ0dXJlX2RhdGVfdGltZSBBUyBob3RlbF9kZXBhcnR1cmUnLAogICAgICAgICAgJ2dsX2hvdGVsX2RldGFpbHMuc3BlY2lhbF9yZXF1ZXN0cyBBUyBob3RlbF9zcGVjaWFsX3JlcXVlc3RzJywKICAgICAgICAgICdnbF9mbGlnaHRfZGV0YWlscy5iaXJ0aGRheSBBUyBiaXJ0aGRheScsCiAgICAgICAgICAnZ2xfZmxpZ2h0X2RldGFpbHMuYWlybGluZSBBUyBhaXJsaW5lJywKICAgICAgICAgICdnbF9mbGlnaHRfZGV0YWlscy5hcnJpdmFsX2RhdGVfdGltZSBBUyBmbGlnaHRfYXJyaXZhbCcsCiAgICAgICAgICAnZ2xfZmxpZ2h0X2RldGFpbHMuZGVwYXJ0dXJlX2RhdGVfdGltZSBBUyBmbGlnaHRfZGVwYXJ0dXJlJywKICAgICAgICAgICdnbF9mbGlnaHRfZGV0YWlscy5hcnJpdmFsX2ZsaWdodF9ubyBBUyBhcnJpdmFsX2ZsaWdodF9udW1iZXInLAogICAgICAgICAgJ2dsX2ZsaWdodF9kZXRhaWxzLmRlcGFydHVyZV9mbGlnaHRfbm8gQVMgZGVwYXJ0dXJlX2ZsaWdodF9udW1iZXInLAogICAgICAgICAgJ2dsX2ZsaWdodF9kZXRhaWxzLmV4dHJhX2luZm8gQVMgZXh0cmFfZmxpZ2h0X2luZm8nLAogICAgICAgICAgJ2dsX2ZsaWdodF9kZXRhaWxzLnNwZWNpYWxfcmVxdWVzdHMgQVMgZmxpZ2h0X3NwZWNpYWxfcmVxdWVzdHMnLAogICAgICAgICAgJ2dsX2ZsaWdodF9kZXRhaWxzLmNpdGl6ZW5zaGlwIEFTIGNpdGl6ZW5zaGlwJywKICAgICAgICAgICdnbF9mbGlnaHRfZGV0YWlscy5GRl9ubyBBUyBmcmVxdWVudF9mbHllcl9udW1iZXInLAogICAgICAgICAga25leC5yYXcoIkNBU0UgV0hFTiBnbF9mbGlnaHRfZGV0YWlscy5tYWxlX3RydWUgPSB0cnVlIFRIRU4gJ21hbGUnIFdIRU4gZ2xfZmxpZ2h0X2RldGFpbHMubWFsZV90cnVlID0gZmFsc2UgVEhFTiAnZmVtYWxlJyBFTFNFIG51bGwgRU5EIEFTIGdlbmRlciIpCiAgICAgICAgKQogICAgICAgIC53aGVyZSh7ICdnbF9ob3VzZWhvbGRfZGV0YWlscy5pZCc6IGhvdXNlaG9sZElkLCAnZ2xfaG91c2Vob2xkX2RldGFpbHMudXNlcl9pZCc6IHJlcS51c2VyLmlkIH0pCiAgICAgICAgLm9yZGVyQnkoJ2d1ZXN0X2lkJywgJ0FTQycpOwogICAgfSkKICAgIC50aGVuKChkYXRhKSA9PiB7CiAgICAgIHJldHVybiByZXMuc2VuZChkYXRhKTsKICAgIH0pCiAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgaWYgKCFfLmlzTmlsKGVycm9yLnN0YXR1cykpIHsKICAgICAgICByZXR1cm4gcmVzLnNlbmQoZXJyb3Iuc3RhdHVzKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgIH0pOwp9KTsKCnJvdXRlci5wdXQoJy9ob3VzZWhvbGRzLzpob3VzZWhvbGRJZC9ndWVzdHMvOmd1ZXN0SWQvdHJhdmVsJywgZW5zdXJlQXV0aGVudGljYXRlZCwgZnVuY3Rpb24gKHJlcSwgcmVzKSB7CiAgY29uc3QgcGFyYW1TY2hlbWEgPSB7CiAgICBob3VzZWhvbGRJZDogewogICAgICBpc0ludDogewogICAgICAgIGVycm9yTWVzc2FnZTogJ0ludmFsaWQgaG91c2Vob2xkIElEJwogICAgICB9CiAgICB9LAogICAgZ3Vlc3RJZDogewogICAgICBpc0ludDogewogICAgICAgIGVycm9yTWVzc2FnZTogJ0ludmFsaWQgZ3Vlc3QgSUQnCiAgICAgIH0KICAgIH0KICB9OwoKICBjb25zdCBib2R5U2NoZW1hID0gewogICAgYmlydGhkYXk6IHsKICAgICAgb3B0aW9uYWw6IHsKICAgICAgICBvcHRpb25zOiB7IGNoZWNrRmFsc3k6IHRydWUgfQogICAgICB9CiAgICB9LAogICAgYWlybGluZTogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICBmbGlnaHRfYXJyaXZhbDogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICBmbGlnaHRfZGVwYXJ0dXJlOiB7CiAgICAgIG9wdGlvbmFsOiB7CiAgICAgICAgb3B0aW9uczogeyBjaGVja0ZhbHN5OiB0cnVlIH0KICAgICAgfQogICAgfSwKICAgIGFycml2YWxfZmxpZ2h0X251bWJlcjogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICBkZXBhcnR1cmVfZmxpZ2h0X251bWJlcjogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICBleHRyYV9mbGlnaHRfaW5mbzogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICBmbGlnaHRfc3BlY2lhbF9yZXF1ZXN0czogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICBjaXRpemVuc2hpcDogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICBmcmVxdWVudF9mbHllcl9udW1iZXI6IHsKICAgICAgb3B0aW9uYWw6IHsKICAgICAgICBvcHRpb25zOiB7IGNoZWNrRmFsc3k6IHRydWUgfQogICAgICB9CiAgICB9LAogICAgZ2VuZGVyOiB7CiAgICAgIG9wdGlvbmFsOiB7CiAgICAgICAgb3B0aW9uczogeyBjaGVja0ZhbHN5OiB0cnVlIH0KICAgICAgfQogICAgfQogIH07CgogIHZhbGlkYXRlUGFyYW1zKHJlcSwgeyBwYXJhbVNjaGVtYSwgYm9keVNjaGVtYSB9KQogICAgLnRoZW4oKHsgcGFyYW1zLCBib2R5IH0pID0+IHsKICAgICAgaWYgKF8uaXNFbXB0eShib2R5KSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IHN0YXR1czogNDAwLCBlcnJvcjogJ3VuZXhwZWN0ZWQgZW1wdHkgcGFyYW1zJyB9KTsKICAgICAgfQoKICAgICAgY29uc3QgZmllbGRzTWFwID0gewogICAgICAgIGZsaWdodF9hcnJpdmFsOiAnYXJyaXZhbF9kYXRlX3RpbWUnLAogICAgICAgIGZsaWdodF9kZXBhcnR1cmU6ICdkZXBhcnR1cmVfZGF0ZV90aW1lJywKICAgICAgICBhcnJpdmFsX2ZsaWdodF9udW1iZXI6ICdhcnJpdmFsX2ZsaWdodF9ubycsCiAgICAgICAgZGVwYXJ0dXJlX2ZsaWdodF9udW1iZXI6ICdkZXBhcnR1cmVfZmxpZ2h0X25vJywKICAgICAgICBleHRyYV9mbGlnaHRfaW5mbzogJ2V4dHJhX2luZm8nLAogICAgICAgIGZsaWdodF9zcGVjaWFsX3JlcXVlc3RzOiAnc3BlY2lhbF9yZXF1ZXN0cycsCiAgICAgICAgZnJlcXVlbnRfZmx5ZXJfbnVtYmVyOiAnRkZfbm8nLAogICAgICAgIGdlbmRlcjogJ21hbGVfdHJ1ZScKICAgICAgfTsKCiAgICAgIGNvbnN0IHVwZGF0ZVBhcmFtcyA9IF8ubWFwS2V5cyhib2R5LCAodmFsLCBrZXkpID0+IHsKICAgICAgICByZXR1cm4gZmllbGRzTWFwW2tleV0gfHwga2V5OwogICAgICB9KTsKCiAgICAgIGlmICh1cGRhdGVQYXJhbXMubWFsZV90cnVlKSB7CiAgICAgICAgdXBkYXRlUGFyYW1zLm1hbGVfdHJ1ZSA9ICh1cGRhdGVQYXJhbXMubWFsZV90cnVlID09PSAnbWFsZScpID8gdHJ1ZSA6IGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGhvdXNlaG9sZElkOiBwYXJhbXMuaG91c2Vob2xkSWQsCiAgICAgICAgZ3Vlc3RJZDogcGFyYW1zLmd1ZXN0SWQsCiAgICAgICAgcGFyYW1zOiB1cGRhdGVQYXJhbXMKICAgICAgfQogICAgfSkKICAgIC50aGVuKCh7IGhvdXNlaG9sZElkLCBndWVzdElkLCBwYXJhbXMgfSkgPT4gewogICAgICAvLyBVcHNlcnQ6IElOU0VSVCBvciBVUERBVEUKICAgICAgY29uc3QgdXBkYXRlU3FsID0gXy5rZXlzKHBhcmFtcykubWFwKGtleSA9PiBrbmV4LnJhdygnPz8gPSBFWENMVURFRC4/PycsIFtrZXksIGtleV0pLnRvU3RyaW5nKCkpLmpvaW4oJywgJyk7CiAgICAgIGNvbnN0IGluc2VydFNxbCA9IGtuZXgoJ2dsX2ZsaWdodF9kZXRhaWxzJykKICAgICAgICAuaW5zZXJ0KAogICAgICAgICAgXy5kZWZhdWx0cygKICAgICAgICAgICAgcGFyYW1zLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgZ3Vlc3RfaWQ6IGtuZXgoJ2dsX2hvdXNlaG9sZF9kZXRhaWxzJykKICAgICAgICAgICAgICAgIC5qb2luKCdnbF9ndWVzdHMnLCB7ICdnbF9ndWVzdHMuaG91c2Vob2xkX2RldGFpbHNfaWQnOiAnZ2xfaG91c2Vob2xkX2RldGFpbHMuaWQnIH0pCiAgICAgICAgICAgICAgICAuc2VsZWN0KCdnbF9ndWVzdHMuaWQnKQogICAgICAgICAgICAgICAgLndoZXJlKHsKICAgICAgICAgICAgICAgICAgJ2dsX2hvdXNlaG9sZF9kZXRhaWxzLmlkJzogaG91c2Vob2xkSWQsCiAgICAgICAgICAgICAgICAgICdnbF9ob3VzZWhvbGRfZGV0YWlscy51c2VyX2lkJzogcmVxLnVzZXIuaWQsCiAgICAgICAgICAgICAgICAgICdnbF9ndWVzdHMuaWQnOiBndWVzdElkCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmxpbWl0KDEpCiAgICAgICAgICAgIH0KICAgICAgICAgICkKICAgICAgICApLnRvU3RyaW5nKCk7CiAgICAgIGNvbnN0IHVwc2VydFNxbCA9IGtuZXgucmF3KGAgT04gQ09ORkxJQ1QgKGd1ZXN0X2lkKSBETyBVUERBVEUgU0VUICR7dXBkYXRlU3FsfSBSRVRVUk5JTkcgaWQ7YCkudG9TdHJpbmcoKTsKICAgICAgY29uc3Qgc3FsID0gYCR7aW5zZXJ0U3FsfSAke3Vwc2VydFNxbH1gOwoKICAgICAgcmV0dXJuIGtuZXgucmF3KHNxbCk7CiAgICB9KQogICAgLnRoZW4oKHsgcm93czogW3Jlc3VsdF0gfSkgPT4gewogICAgICBpZiAoXy5pc05pbChyZXN1bHQpKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHsgc3RhdHVzOiA0MjIsIGVycm9yOiAnZXJyb3IgcHJvY2Vzc2luZyB0aGUgcmVjb3JkJyB9KTsKICAgICAgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoMjAwKTsKICAgIH0pCiAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgaWYgKCFfLmlzTmlsKGVycm9yLnN0YXR1cykpIHsKICAgICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoZXJyb3Iuc3RhdHVzKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgIH0pOwp9KTsKCnJvdXRlci5wdXQoJy9ob3VzZWhvbGRzLzpob3VzZWhvbGRJZC9ndWVzdHMvOmd1ZXN0SWQvYWNjb21tb2RhdGlvbicsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcykgewogIGNvbnN0IHBhcmFtU2NoZW1hID0gewogICAgaG91c2Vob2xkSWQ6IHsKICAgICAgaXNJbnQ6IHsKICAgICAgICBlcnJvck1lc3NhZ2U6ICdJbnZhbGlkIGhvdXNlaG9sZCBJRCcKICAgICAgfQogICAgfSwKICAgIGd1ZXN0SWQ6IHsKICAgICAgaXNJbnQ6IHsKICAgICAgICBlcnJvck1lc3NhZ2U6ICdJbnZhbGlkIGd1ZXN0IElEJwogICAgICB9CiAgICB9CiAgfTsKCiAgY29uc3QgYm9keVNjaGVtYSA9IHsKICAgIGhvdGVsX25hbWU6IHsKICAgICAgb3B0aW9uYWw6IHsKICAgICAgICBvcHRpb25zOiB7IGNoZWNrRmFsc3k6IHRydWUgfQogICAgICB9CiAgICB9LAogICAgcm9vbV9udW1iZXI6IHsKICAgICAgb3B0aW9uYWw6IHsKICAgICAgICBvcHRpb25zOiB7IGNoZWNrRmFsc3k6IHRydWUgfQogICAgICB9CiAgICB9LAogICAgaG90ZWxfYXJyaXZhbDogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICBob3RlbF9kZXBhcnR1cmU6IHsKICAgICAgb3B0aW9uYWw6IHsKICAgICAgICBvcHRpb25zOiB7IGNoZWNrRmFsc3k6IHRydWUgfQogICAgICB9CiAgICB9LAogICAgaG90ZWxfc3BlY2lhbF9yZXF1ZXN0czogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0KICB9OwoKICB2YWxpZGF0ZVBhcmFtcyhyZXEsIHsgcGFyYW1TY2hlbWEsIGJvZHlTY2hlbWEgfSkKICAgIC50aGVuKCh7IHBhcmFtcywgYm9keSB9KSA9PiB7CiAgICAgIGlmIChfLmlzRW1wdHkoYm9keSkpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBzdGF0dXM6IDQwMCwgZXJyb3I6ICd1bmV4cGVjdGVkIGVtcHR5IHBhcmFtcycgfSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGZpZWxkc01hcCA9IHsKICAgICAgICBob3RlbF9hcnJpdmFsOiAnYXJyaXZhbF9kYXRlX3RpbWUnLAogICAgICAgIGhvdGVsX2RlcGFydHVyZTogJ2RlcGFydHVyZV9kYXRlX3RpbWUnLAogICAgICAgIGhvdGVsX3NwZWNpYWxfcmVxdWVzdHM6ICdzcGVjaWFsX3JlcXVlc3RzJwogICAgICB9OwoKICAgICAgY29uc3QgdXBkYXRlUGFyYW1zID0gXy5tYXBLZXlzKGJvZHksICh2YWwsIGtleSkgPT4gewogICAgICAgIHJldHVybiBmaWVsZHNNYXBba2V5XSB8fCBrZXk7CiAgICAgIH0pOwoKICAgICAgaWYgKHVwZGF0ZVBhcmFtcy5tYWxlX3RydWUpIHsKICAgICAgICB1cGRhdGVQYXJhbXMubWFsZV90cnVlID0gKHVwZGF0ZVBhcmFtcy5tYWxlX3RydWUgPT09ICdtYWxlJykgPyB0cnVlIDogZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgaG91c2Vob2xkSWQ6IHBhcmFtcy5ob3VzZWhvbGRJZCwKICAgICAgICBndWVzdElkOiBwYXJhbXMuZ3Vlc3RJZCwKICAgICAgICBwYXJhbXM6IHVwZGF0ZVBhcmFtcwogICAgICB9CiAgICB9KQogICAgLnRoZW4oKHsgaG91c2Vob2xkSWQsIGd1ZXN0SWQsIHBhcmFtcyB9KSA9PiB7CiAgICAgIC8vIFVwc2VydDogSU5TRVJUIG9yIFVQREFURQogICAgICBjb25zdCB1cGRhdGVTcWwgPSBfLmtleXMocGFyYW1zKS5tYXAoa2V5ID0+IGtuZXgucmF3KCc/PyA9IEVYQ0xVREVELj8/JywgW2tleSwga2V5XSkudG9TdHJpbmcoKSkuam9pbignLCAnKTsKICAgICAgY29uc3QgaW5zZXJ0U3FsID0ga25leCgnZ2xfaG90ZWxfZGV0YWlscycpCiAgICAgICAgLmluc2VydCgKICAgICAgICAgIF8uZGVmYXVsdHMoCiAgICAgICAgICAgIHBhcmFtcywKICAgICAgICAgICAgewogICAgICAgICAgICAgIGd1ZXN0X2lkOiBrbmV4KCdnbF9ob3VzZWhvbGRfZGV0YWlscycpCiAgICAgICAgICAgICAgICAuam9pbignZ2xfZ3Vlc3RzJywgeyAnZ2xfZ3Vlc3RzLmhvdXNlaG9sZF9kZXRhaWxzX2lkJzogJ2dsX2hvdXNlaG9sZF9kZXRhaWxzLmlkJyB9KQogICAgICAgICAgICAgICAgLnNlbGVjdCgnZ2xfZ3Vlc3RzLmlkJykKICAgICAgICAgICAgICAgIC53aGVyZSh7CiAgICAgICAgICAgICAgICAgICdnbF9ob3VzZWhvbGRfZGV0YWlscy5pZCc6IGhvdXNlaG9sZElkLAogICAgICAgICAgICAgICAgICAnZ2xfaG91c2Vob2xkX2RldGFpbHMudXNlcl9pZCc6IHJlcS51c2VyLmlkLAogICAgICAgICAgICAgICAgICAnZ2xfZ3Vlc3RzLmlkJzogZ3Vlc3RJZAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5saW1pdCgxKQogICAgICAgICAgICB9CiAgICAgICAgICApCiAgICAgICAgKS50b1N0cmluZygpOwogICAgICBjb25zdCB1cHNlcnRTcWwgPSBrbmV4LnJhdyhgIE9OIENPTkZMSUNUIChndWVzdF9pZCkgRE8gVVBEQVRFIFNFVCAke3VwZGF0ZVNxbH0gUkVUVVJOSU5HIGlkO2ApLnRvU3RyaW5nKCk7CiAgICAgIGNvbnN0IHNxbCA9IGAke2luc2VydFNxbH0gJHt1cHNlcnRTcWx9YDsKCiAgICAgIHJldHVybiBrbmV4LnJhdyhzcWwpOwogICAgfSkKICAgIC50aGVuKCh7IHJvd3M6IFtyZXN1bHRdIH0pID0+IHsKICAgICAgaWYgKF8uaXNOaWwocmVzdWx0KSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IHN0YXR1czogNDIyLCBlcnJvcjogJ2Vycm9yIHByb2Nlc3NpbmcgdGhlIHJlY29yZCcgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDIwMCk7CiAgICB9KQogICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIGlmICghXy5pc05pbChlcnJvci5zdGF0dXMpKSB7CiAgICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKGVycm9yLnN0YXR1cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDUwMCk7CiAgICB9KTsKfSk7Cgpyb3V0ZXIuZ2V0KCcvcmVwb3J0cy9jdXN0b20tcmVwb3J0LWRhdGEnLCBlbnN1cmVBdXRoZW50aWNhdGVkLCBmdW5jdGlvbihyZXEsIHJlcykgewogIEd1ZXN0TGlzdC5nZXRDdXN0b21SZXBvcnRCYXNlRGF0YShyZXEudXNlci5pZCkKICAgIC50aGVuKChyZXN1bHRzKSA9PiB7CiAgICAgIHJldHVybiByZXMuc2VuZChyZXN1bHRzKTsKICAgIH0pCiAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgIGlmICghXy5pc05pbChlcnJvci5zdGF0dXMpKSB7IHJldHVybiByZXMuc2VuZChlcnJvci5zdGF0dXMpOyB9CiAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyg1MDApOwogICAgfSk7Cn0pOwoKcm91dGVyLmdldCgnL3JlcG9ydHMvY3VzdG9tLXJlcG9ydC1hbGwtZGF0YS86cmVwb3J0SWQqPycsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uKHJlcSwgcmVzKSB7CiAgR3Vlc3RMaXN0LmdldEN1c3RvbVJlcG9ydEFsbERhdGEocmVxLnVzZXIuaWQsIHJlcS5wYXJhbXMucmVwb3J0SWQpCiAgICAudGhlbigocmVzdWx0cykgPT4gewogICAgICByZXR1cm4gcmVzLnNlbmQocmVzdWx0cyk7CiAgICB9KQogICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICBpZiAoIV8uaXNOaWwoZXJyb3Iuc3RhdHVzKSkgeyByZXR1cm4gcmVzLnNlbmQoZXJyb3Iuc3RhdHVzKTsgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgIH0pOwp9KTsKCnJvdXRlci5nZXQoJy9yZXBvcnRzL2N1c3RvbS1yZXBvcnQtbGlzdCcsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcykgewogIEd1ZXN0TGlzdC5nZXRDdXN0b21SZXBvcnRMaXN0KHJlcS51c2VyLmlkKQogICAgLnRoZW4oKHJlc3VsdHMpID0+IHsKICAgICAgcmV0dXJuIHJlcy5zZW5kKHsicmVwb3J0cyI6cmVzdWx0c30pOwogICAgfSkKICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgIGlmICghXy5pc05pbChlcnJvci5zdGF0dXMpKSB7IHJldHVybiByZXMuc2VuZChlcnJvci5zdGF0dXMpOyB9CiAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyg1MDApOwogICAgfSk7Cn0pOwoKCg==</text>
      </register>
      <register name="w" type="4">
        <text>ddddddd</text>
      </register>
      <register name="8" type="2">
        <text encoding="base64">cm91dGVyLmdldCgnL2dldEd1ZXN0TGlzdCcsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCkgewogIHZhciBxdWVyeVN0cmluZyA9ICJTRUxFQ1QgKiBGUk9NIGd1ZXN0X2xpc3QgV0hFUkUgdXNlcl9pZCA9ICIrcmVxLnVzZXIuaWQrIiI7CgogIGRhdGFiYXNlLnJ1blF1ZXJ5KHF1ZXJ5U3RyaW5nLCBmdW5jdGlvbiAoZXJyb3IsIHJlc3VsdHMpewogICAgaWYgKCFlcnJvcikgewogICAgICByZXMuanNvbihyZXN1bHRzKTsKICAgIH1lbHNlewogICAgICByZXMuc2VuZFN0YXR1cyg1MDApOwogICAgfQogIH0pOwp9KTsKCnJvdXRlci5nZXQoJy9ndWVzdF9saXN0JywgZW5zdXJlQXV0aGVudGljYXRlZCwgZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0KSB7CgogIHZhciBnbF9xdWVyaWVzID0gWwoKICAgIC8vIFRPRE8gY2FsY3VsYXRlIHRyYXZlbCBkZXRhaWxzIHJlcXVpcmVtZW50cywgb3IgcmVtb3ZlIGZyb20gYXBpIGFuZCBkbyBjbGllbnQgc2lkZQoKICAgIC8vIFJldHVybnMgZm9yIHRoaXMgaG91c2Vob2xkIElEIHdoaWNoIGlzIGFzc29jaWF0ZWQgdG8gdXNlciBJRCAoY2FuIG9ubHkgaGF2ZSBvbmUpCiAgICBrbmV4KCdpZHhfdXNlcnMnKQogICAgICAud2hlcmUoeydpZHhfdXNlcnMuaWQnOnJlcS51c2VyLmlkfSkKICAgICAgLmpvaW4oJ2dsX2hvdXNlaG9sZF9kZXRhaWxzJywgeydnbF9ob3VzZWhvbGRfZGV0YWlscy51c2VyX2lkJzogJ2lkeF91c2Vycy5pZCd9KQogICAgICAubGVmdEpvaW4oJ2dsX2d1ZXN0cycsIHsnZ2xfZ3Vlc3RzLmhvdXNlaG9sZF9kZXRhaWxzX2lkJzogJ2dsX2hvdXNlaG9sZF9kZXRhaWxzLmlkJ30pCiAgICAgIC5sZWZ0Sm9pbignZ2xfZ2lmdHMnLCB7J2dsX2dpZnRzLmhvdXNlaG9sZF9kZXRhaWxzX2lkJzogJ2dsX2hvdXNlaG9sZF9kZXRhaWxzLmlkJ30pCiAgICAgIC5sZWZ0Sm9pbignZ2xfZXZlbnRfcnN2cHMnLCB7J2dsX2V2ZW50X3JzdnBzLmd1ZXN0X2lkJzogJ2dsX2d1ZXN0cy5pZCd9KQogICAgICAubGVmdEpvaW4oJ2dsX2V2ZW50cycsIHsnZ2xfZXZlbnRzLmlkJyA6ICdnbF9ldmVudF9yc3Zwcy5ldmVudF9pZCd9KQogICAgICAubGVmdEpvaW4oJ2dsX2V2ZW50X3R5cGVzJywgeydnbF9ldmVudF90eXBlcy5pZCcgOiAnZ2xfZXZlbnRzLmV2ZW50X3R5cGVfaWQnfSkKICAgICAgLnNlbGVjdCgnZ2xfaG91c2Vob2xkX2RldGFpbHMuaWQgYXMgaG91c2Vob2xkX2RldGFpbHNfaWQnLCAnZ2xfaG91c2Vob2xkX2RldGFpbHMuaG91c2Vob2xkX25hbWUgYXMgaG91c2Vob2xkX25hbWUnLCAnYWRkcmVzc18xJywgJ2FkZHJlc3NfMicsICdhZGRyZXNzXzMnLCAnY291bnRyeScsCiAgICAgICAgLy8gUXVpY2sgbG9naWMgdG8gZGV0ZXJtaW5lIGlmIHRoZSBhZGRyZXNzIGlzIGNvbXBsZXRlCiAgICAgICAgLy8gQ29tcGxldGUgSUY6IEFkZHJlc3NfMSwgQWRyZXNzXzIgYW5kIENvdW50cnkgYWxsIGhhdmUgYSBzdHJpbmcgd2l0aCBsZW5ndGggPiAyCiAgICAgICAga25leC5yYXcoJ2NvYWxlc2NlKGNoYXJfbGVuZ3RoKGFkZHJlc3NfMSk+MiBBTkQgY2hhcl9sZW5ndGgoYWRkcmVzc18yKT4yIGFuZCBjaGFyX2xlbmd0aChjb3VudHJ5KSA+IDEsIGZhbHNlKSBhcyBhZGRyZXNzX2NvbXBsZXRlLCBpbnZpdGVkJyksCiAgICAgICAgLy8gU3VicXVlcnkgY291bnRzIGhvdyBtYW55IGd1ZXN0cyBhcmUgYXR0ZW5kaW5nIHRoZSBjZXJlbW9ueSBmb3IgaG91c2Vob2xkX2lkIG9mIHRoZSBwYXJlbnQgcm93CiAgICAgICAga25leCgnZ2xfZ3Vlc3RzJykKICAgICAgICAgIC5sZWZ0Sm9pbignZ2xfZXZlbnRfcnN2cHMnLCB7J2dsX2V2ZW50X3JzdnBzLmd1ZXN0X2lkJzogJ2dsX2d1ZXN0cy5pZCd9KQogICAgICAgICAgLmxlZnRKb2luKCdnbF9ldmVudHMnLCB7J2dsX2V2ZW50cy5pZCcgOiAnZ2xfZXZlbnRfcnN2cHMuZXZlbnRfaWQnfSkKICAgICAgICAgIC5sZWZ0Sm9pbignZ2xfZXZlbnRfdHlwZXMnLCB7J2dsX2V2ZW50X3R5cGVzLmlkJyA6ICdnbF9ldmVudHMuZXZlbnRfdHlwZV9pZCd9KQogICAgICAgICAgLnNlbGVjdChrbmV4LnJhdygnY291bnQoKiknKSkKICAgICAgICAgIC53aGVyZVJhdygnZ2xfZ3Vlc3RzLmhvdXNlaG9sZF9kZXRhaWxzX2lkID0gZ2xfaG91c2Vob2xkX2RldGFpbHMuaWQnKQogICAgICAgICAgLmFuZFdoZXJlKHsnZ2xfZXZlbnRfdHlwZXMudHlwZSc6J2NlcmVtb255JywgJ2dsX2V2ZW50X3JzdnBzLmF0dGVuZGluZ190cnVlJyA6IHRydWV9KQogICAgICAgICAgLmFzKCdhdHRlbmRpbmdfY2VyZW1vbnknKSwKICAgICAgICAvLyBTdWJxdWVyeSBjb3VudHMgaG93IG1hbnkgZ3Vlc3RzIGFyZSBhdHRlbmRpbmcgdGhlIHJlY2VwdGlvbiBmb3IgaG91c2Vob2xkX2lkIG9mIHRoZSBwYXJlbnQgcm93CiAgICAgICAga25leCgnZ2xfZ3Vlc3RzJykKICAgICAgICAgIC5sZWZ0Sm9pbignZ2xfZXZlbnRfcnN2cHMnLCB7J2dsX2V2ZW50X3JzdnBzLmd1ZXN0X2lkJzogJ2dsX2d1ZXN0cy5pZCd9KQogICAgICAgICAgLmxlZnRKb2luKCdnbF9ldmVudHMnLCB7J2dsX2V2ZW50cy5pZCcgOiAnZ2xfZXZlbnRfcnN2cHMuZXZlbnRfaWQnfSkKICAgICAgICAgIC5sZWZ0Sm9pbignZ2xfZXZlbnRfdHlwZXMnLCB7J2dsX2V2ZW50X3R5cGVzLmlkJyA6ICdnbF9ldmVudHMuZXZlbnRfdHlwZV9pZCd9KQogICAgICAgICAgLnNlbGVjdChrbmV4LnJhdygnY291bnQoKiknKSkKICAgICAgICAgIC53aGVyZVJhdygnZ2xfZ3Vlc3RzLmhvdXNlaG9sZF9kZXRhaWxzX2lkID0gZ2xfaG91c2Vob2xkX2RldGFpbHMuaWQnKQogICAgICAgICAgLmFuZFdoZXJlKHsnZ2xfZXZlbnRfdHlwZXMudHlwZSc6J3JlaGVhcnNhbCcsICdnbF9ldmVudF9yc3Zwcy5hdHRlbmRpbmdfdHJ1ZScgOiB0cnVlfSkKICAgICAgICAgIC5hcygnYXR0ZW5kaW5nX3JlaGVhcnNhbCcpLAogICAgICAgIC8vICJUaGFua2VkIiBsb2dpYzogMDogTm8gZ2lmdHMgd2VyZSByZWNvcmRlZCAxOiBHaWZ0cyByZWNvcmRlZCBidXQgbm90IHRoYW5rZWQgMjogR2lmdHMgd2VyZSByZWNvcmRlZCBhbmQgdGhhbmtlZCA9IHRydWUKICAgICAgICBrbmV4LnJhdygnQ0FTRSBXSEVOIGdsX2hvdXNlaG9sZF9kZXRhaWxzLmdpZnRzX3RoYW5rZWQgPSB0cnVlIFRIRU4gMiBXSEVOIGNvdW50KGdsX2dpZnRzLm5hbWUpID4gMCBUSEVOIDEgRUxTRSAwIEVORCBhcyBnaWZ0X3N0YXR1cycpLAogICAgICAgIC8vIFRPRE86IE5lZWQgc3BlYyBvbiB3aGF0IGlzIGNvbnNpZGVyZWQgY29tcGxldGUsIG9yIG1vdmUgdG8gY2xpZW50IHNpZGUKICAgICAgICBrbmV4LnJhdygnZmFsc2UgYXMgdHJhdmVsX2RldGFpbHNfY29tcGxldGUnKQogICAgICApCiAgICAgIC5ncm91cEJ5KCdnbF9ob3VzZWhvbGRfZGV0YWlscy5pZCcpCiAgICAgIC5vcmRlckJ5KCdob3VzZWhvbGRfbmFtZScpLAoKICAgIC8vIFJldHVybnMgbnVtYmVyIG9mIGhvdXNlaG9sZHMgd2hvIGhhdmUgYXQgbGVhc3Qgb25lIGd1ZXN0IGF0dGVuZGluZyBjZXJlbW9ueQogICAga25leCgnaWR4X3VzZXJzJykKICAgICAgLmpvaW4oJ2dsX2hvdXNlaG9sZF9kZXRhaWxzJywgeydnbF9ob3VzZWhvbGRfZGV0YWlscy51c2VyX2lkJzogJ2lkeF91c2Vycy5pZCd9KQogICAgICAubGVmdEpvaW4oJ2dsX2d1ZXN0cycsIHsnZ2xfZ3Vlc3RzLmhvdXNlaG9sZF9kZXRhaWxzX2lkJyA6ICdnbF9ob3VzZWhvbGRfZGV0YWlscy5pZCd9KQogICAgICAubGVmdEpvaW4oJ2dsX2V2ZW50X3JzdnBzJywgeydnbF9ldmVudF9yc3Zwcy5ndWVzdF9pZCc6ICdnbF9ndWVzdHMuaWQnfSkKICAgICAgLmxlZnRKb2luKCdnbF9ldmVudHMnLCB7J2dsX2V2ZW50cy5pZCcgOiAnZ2xfZXZlbnRfcnN2cHMuZXZlbnRfaWQnfSkKICAgICAgLmxlZnRKb2luKCdnbF9ldmVudF90eXBlcycsIHsnZ2xfZXZlbnRfdHlwZXMuaWQnIDogJ2dsX2V2ZW50cy5ldmVudF90eXBlX2lkJ30pCiAgICAgIC5zZWxlY3Qoa25leC5yYXcoJ0NPVU5UKERJU1RJTkNUIGdsX2hvdXNlaG9sZF9kZXRhaWxzLmlkKSBhcyBjb3VudF9yc3ZwJykpCiAgICAgIC53aGVyZSh7J2lkeF91c2Vycy5pZCc6cmVxLnVzZXIuaWQsICdnbF9ldmVudF90eXBlcy50eXBlJzonY2VyZW1vbnknfSkKICAgICAgLmdyb3VwQnkoJ2lkeF91c2Vycy5pZCcpLAoKICAgIC8vIFJldHVybnMgbnVtYmVyIG9mIGhvdXNlaG9sZHMgd2hlcmUgaW52aXRlZCBpcyB0cnVlCiAgICBrbmV4KCdpZHhfdXNlcnMnKQogICAgICAuam9pbignZ2xfaG91c2Vob2xkX2RldGFpbHMnLCB7J2dsX2hvdXNlaG9sZF9kZXRhaWxzLnVzZXJfaWQnOiAnaWR4X3VzZXJzLmlkJ30pCiAgICAgIC5zZWxlY3Qoa25leC5yYXcoJ0NPVU5UKCopIGFzIGNvdW50X2ludml0ZWQnKSkKICAgICAgLndoZXJlKHsnaWR4X3VzZXJzLmlkJzpyZXEudXNlci5pZCwgJ2dsX2hvdXNlaG9sZF9kZXRhaWxzLmludml0ZWQnOnRydWV9KQoKICBdOwoKICBQcm9taXNlLmFsbChnbF9xdWVyaWVzKQogICAgLnRoZW4oZnVuY3Rpb24ocmVzdWx0cykgewogICAgICB2YXIgcmV0dXJuX3ZhbHVlID0gewogICAgICAgIGhvdXNlaG9sZHMgOiByZXN1bHRzWzBdLAogICAgICAgIGNvdW50X3JzdnAgOiByZXN1bHRzWzFdLmxlbmd0aD4wICYmICJjb3VudF9yc3ZwIiBpbiByZXN1bHRzWzFdWzBdP3Jlc3VsdHNbMV1bMF0uY291bnRfcnN2cDowLAogICAgICAgIGNvdW50X2ludml0ZWQ6IHJlc3VsdHNbMl0ubGVuZ3RoPjAgJiYgImNvdW50X2ludml0ZWQiIGluIHJlc3VsdHNbMl1bMF0/cmVzdWx0c1syXVswXS5jb3VudF9pbnZpdGVkOjAKICAgICAgfQogICAgICByZXMuc2VuZChyZXR1cm5fdmFsdWUpOwogICAgfSkKICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHsKICAgICAgY29uc29sZS5lcnJvcihlcnIpOwogICAgICByZXMuc2VuZFN0YXR1cyg1MDApOwogICAgfSk7Cgp9KTsKCnJvdXRlci5wb3N0KCcvaG91c2Vob2xkcycsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcykgewogIGtuZXgoJ2dsX2hvdXNlaG9sZF9kZXRhaWxzJykKICAgIC5yZXR1cm5pbmcoJ2lkJykKICAgIC5pbnNlcnQoeyB1c2VyX2lkOiByZXEudXNlci5pZCB9KQogICAgLnRoZW4oKFtob3VzZWhvbGRJZF0pID0+IHJlcy5zZW5kKHsgaG91c2Vob2xkX2lkOiBob3VzZWhvbGRJZCB9KSkKICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgIH0pOwp9KTsKCnJvdXRlci5nZXQoJy9ob3VzZWhvbGRzLzpob3VzZWhvbGRJZCcsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCkgewogIHJlcS5jaGVja1BhcmFtcygnaG91c2Vob2xkSWQnLCAnSW52YWxpZCBob3VzZWhvbGQgSUQnKS5ub3RFbXB0eSgpLmlzSW50KCk7CiAgcmVxLnNhbml0aXplUGFyYW1zKCdob3VzZWhvbGRJZCcpLnRvSW50KCk7CgogIHJlcS5nZXRWYWxpZGF0aW9uUmVzdWx0KCkKICAgIC50aGVuKChyZXN1bHQpID0+IHsKICAgICAgaWYgKCFyZXN1bHQuaXNFbXB0eSgpKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHsgZXJyb3I6ICdpbnZhbGlkIGhvdXNlaG9sZCBpZCcgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlcS5wYXJhbXMuaG91c2Vob2xkSWQ7CiAgICB9KQogICAgLnRoZW4oKGhvdXNlaG9sZElkKSA9PiB7CiAgICAgIGNvbnN0IHByb21pc2VzID0gUHJvbWlzZS5hbGwoCiAgICAgICAgWwogICAgICAgICAga25leCgnZ2xfaG91c2Vob2xkX2RldGFpbHMnKQogICAgICAgICAgICAud2hlcmUoeyBpZDogaG91c2Vob2xkSWQsIHVzZXJfaWQ6IHJlcS51c2VyLmlkIH0pCiAgICAgICAgICAgIC5zZWxlY3QoCiAgICAgICAgICAgICAgJ2lkIEFTIGhvdXNlaG9sZF9kZXRhaWxzX2lkJywKICAgICAgICAgICAgICAnaG91c2Vob2xkX25hbWUnLAogICAgICAgICAgICAgICdhZGRyZXNzXzEnLAogICAgICAgICAgICAgICdhZGRyZXNzXzInLAogICAgICAgICAgICAgICdhZGRyZXNzXzMnLAogICAgICAgICAgICAgICdjb3VudHJ5JywKICAgICAgICAgICAgICAnaW52aXRlZCBBUyBpbnZpdGF0aW9uX3NlbnQnKSwKICAgICAgICAgIGtuZXgoJ2dsX2V2ZW50cycpCiAgICAgICAgICAgIC53aGVyZSh7IHVzZXJfaWQ6IHJlcS51c2VyLmlkIH0pCiAgICAgICAgICAgIC5sZWZ0Sm9pbignZ2xfZXZlbnRfdHlwZXMnLCB7J2dsX2V2ZW50X3R5cGVzLmlkJyA6ICdnbF9ldmVudHMuZXZlbnRfdHlwZV9pZCd9KQogICAgICAgICAgICAuc2VsZWN0KCdnbF9ldmVudHMuaWQgQVMgZXZlbnRfaWQnLCAnZ2xfZXZlbnRzLm5hbWUgQVMgZXZlbnRfbmFtZScsICdnbF9ldmVudF90eXBlcy50eXBlIGFzIGV2ZW50X3R5cGUnKSwKICAgICAgICAgIGtuZXgoJ2dsX2d1ZXN0cycpCiAgICAgICAgICAgIC53aGVyZSh7IGhvdXNlaG9sZF9kZXRhaWxzX2lkOiBob3VzZWhvbGRJZCB9KQogICAgICAgICAgICAub3JkZXJCeSgnaWQnLCAnQVNDJykKICAgICAgICAgICAgLnNlbGVjdCgKICAgICAgICAgICAgICAnaWQgQVMgZ3Vlc3RfaWQnLAogICAgICAgICAgICAgICdmaXJzdF9uYW1lJywKICAgICAgICAgICAgICAnbWlkZGxlX25hbWUnLAogICAgICAgICAgICAgICdsYXN0X25hbWUnLAogICAgICAgICAgICAgICdlbWFpbCcsCiAgICAgICAgICAgICAgJ3Bob25lJywKICAgICAgICAgICAgICAnYWR1bHRfdHJ1ZSBBUyBpc19hZHVsdCcsCiAgICAgICAgICAgICAgJ2FnZScsCiAgICAgICAgICAgICAgJ2NoYWlyX3JlcXVlc3QgQVMgcmVxdWVzdHNfY2hhaXInLAogICAgICAgICAgICAgICdyZXN0cmljdGlvbnMgQVMgZGlldF9yZXN0cmljdGlvbnMnLAogICAgICAgICAgICAgICdvdGhlcl9yZXF1ZXN0cyBBUyByZXF1ZXN0c19vdGhlcicKICAgICAgICAgICAgKSwKICAgICAgICBdCiAgICAgICk7CiAgICAgIHJldHVybiBwcm9taXNlczsKICAgIH0pCiAgICAudGhlbigoW2hvdXNlaG9sZCwgZXZlbnRzLCBndWVzdHNdKSA9PiB7CiAgICAgIGlmIChfLmlzTmlsKGhvdXNlaG9sZCkgfHwgXy5pc05pbChob3VzZWhvbGRbMF0pKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHsgZXJyb3I6ICdob3VzZWhvbGQgY2Fubm90IGJlIGZvdW5kLicgfSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGV2ZW50SWRzID0gZXZlbnRzLm1hcChldmVudCA9PiBldmVudC5ldmVudF9pZCk7CiAgICAgIGNvbnN0IGd1ZXN0SWRzID0gZ3Vlc3RzLm1hcChndWVzdCA9PiBndWVzdC5ndWVzdF9pZCk7CgogICAgICByZXR1cm4gUHJvbWlzZS5hbGwoCiAgICAgICAgWwogICAgICAgICAgaG91c2Vob2xkWzBdLAogICAgICAgICAgZXZlbnRzLAogICAgICAgICAgZ3Vlc3RzLAogICAgICAgICAga25leCgnZ2xfZXZlbnRfcnN2cHMnKQogICAgICAgICAgICAud2hlcmVJbignZ3Vlc3RfaWQnLCBndWVzdElkcykKICAgICAgICAgICAgLnNlbGVjdCgnZ3Vlc3RfaWQnLCAnZXZlbnRfaWQnLCAnYXR0ZW5kaW5nX3RydWUgQVMgaXNfYXR0ZW5kaW5nJywgJ21lYWxfaWQgQVMgc2VsZWN0ZWRfbWVhbF9pZCcpLAogICAgICAgICAga25leCgnZ2xfbWVhbHMnKQogICAgICAgICAgICAud2hlcmVJbignZXZlbnRfaWQnLCBldmVudElkcyksCiAgICAgICAgXQogICAgICApOwogICAgfSkKICAgIC50aGVuKChbaG91c2Vob2xkLCBldmVudHMsIGd1ZXN0cywgcnN2cHMsIG1lYWxzXSkgPT4gewogICAgICBjb25zdCBtZWFsc0J5RXZlbnQgPSBfLmdyb3VwQnkobWVhbHMsICdldmVudF9pZCcpOwogICAgICBldmVudHMuZm9yRWFjaCgoZXZlbnQpID0+IHsKICAgICAgICBldmVudC5tZWFsX29wdGlvbnMgPSAobWVhbHNCeUV2ZW50W2V2ZW50LmV2ZW50X2lkXSB8fCBbXSkubWFwKChtZWFsKSA9PiB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpZDogbWVhbC5pZCwKICAgICAgICAgICAgbmFtZTogbWVhbC5uYW1lCiAgICAgICAgICB9OwogICAgICAgIH0pOwogICAgICB9KTsKCiAgICAgIGNvbnN0IHJzdnBzQnlHdWVzdCA9IF8uZ3JvdXBCeShyc3ZwcywgJ2d1ZXN0X2lkJyk7CiAgICAgIGNvbnN0IG1lYWxzQnlJZCA9IG1lYWxzLnJlZHVjZSgobWVtLCBlbGUpID0+IHsKICAgICAgICBtZW1bZWxlLmlkXSA9IGVsZTsKICAgICAgICByZXR1cm4gbWVtOwogICAgICB9LCB7fSk7CgogICAgICBndWVzdHMuZm9yRWFjaCgoZ3Vlc3QpID0+IHsKICAgICAgICBjb25zdCByc3Zwc0J5RXZlbnQgPSAocnN2cHNCeUd1ZXN0W2d1ZXN0Lmd1ZXN0X2lkXSB8fCBbXSkucmVkdWNlKChtZW0sIGVsZSkgPT4gewogICAgICAgICAgbWVtW2VsZS5ldmVudF9pZF0gPSBlbGU7CiAgICAgICAgICByZXR1cm4gbWVtOwogICAgICAgIH0sIHt9KTsKCiAgICAgICAgZ3Vlc3QucnN2cHMgPSBldmVudHMubWFwKChldmVudCkgPT4gewogICAgICAgICAgY29uc3QgcnN2cCA9IHJzdnBzQnlFdmVudFtldmVudC5ldmVudF9pZF0gfHwge307CiAgICAgICAgICBjb25zdCBzZWxlY3RlZE1lYWxJZCA9IHJzdnAuc2VsZWN0ZWRfbWVhbF9pZCB8fCAwOwoKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGV2ZW50X2lkOiBldmVudC5ldmVudF9pZCwKICAgICAgICAgICAgaXNfYXR0ZW5kaW5nOiByc3ZwLmlzX2F0dGVuZGluZywKICAgICAgICAgICAgc2VsZWN0ZWRfbWVhbF9pZDogc2VsZWN0ZWRNZWFsSWQsCiAgICAgICAgICAgIHNlbGVjdGVkX21lYWw6IF8ucmVzdWx0KG1lYWxzQnlJZCwgYFske3NlbGVjdGVkTWVhbElkfV0ubmFtZWAsIG51bGwpLAogICAgICAgICAgfTsKICAgICAgICB9KTsKICAgICAgfSk7CgogICAgICBob3VzZWhvbGQuZ3Vlc3RzID0gZ3Vlc3RzOwogICAgICBob3VzZWhvbGQuZXZlbnRzID0gZXZlbnRzOwoKICAgICAgcmV0dXJuIHJlcy5zZW5kKGhvdXNlaG9sZCk7CiAgICB9KQogICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgLy8gVE9ETzogYWRkIG1vcmUgZGVzY3JpcHRpdmUgZXJyb3IgbWVzc2FnZXMKICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgIH0pOwp9KTsKCnJvdXRlci5wdXQoJy9ob3VzZWhvbGRzLzpob3VzZWhvbGRJZCcsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcykgewogIHJlcS5jaGVja1BhcmFtcygnaG91c2Vob2xkSWQnLCAnSW52YWxpZCBob3VzZWhvbGQgSUQnKS5ub3RFbXB0eSgpLmlzSW50KCk7CiAgcmVxLnNhbml0aXplUGFyYW1zKCdob3VzZWhvbGRJZCcpLnRvSW50KCk7CgogIGNvbnN0IGJvZHlTY2hlbWEgPSB7CiAgICBob3VzZWhvbGRfbmFtZTogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICBhZGRyZXNzXzE6IHsKICAgICAgb3B0aW9uYWw6IHsKICAgICAgICBvcHRpb25zOiB7IGNoZWNrRmFsc3k6IHRydWUgfQogICAgICB9CiAgICB9LAogICAgYWRkcmVzc18yOiB7CiAgICAgIG9wdGlvbmFsOiB7CiAgICAgICAgb3B0aW9uczogeyBjaGVja0ZhbHN5OiB0cnVlIH0KICAgICAgfQogICAgfSwKICAgIGFkZHJlc3NfMzogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICBjb3VudHJ5OiB7CiAgICAgIG9wdGlvbmFsOiB7CiAgICAgICAgb3B0aW9uczogeyBjaGVja0ZhbHN5OiB0cnVlIH0KICAgICAgfQogICAgfSwKICAgIGludml0YXRpb25fc2VudDogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0sCiAgICAgIGlzQm9vbGVhbjogewogICAgICAgIGVycm9yTWVzc2FnZTogJ0ludmFsaWQgdmFsdWUgZm9yIGludml0YXRpb25fc2VudCcKICAgICAgfQogICAgfQogIH07CgogIHJlcS5jaGVja0JvZHkoYm9keVNjaGVtYSk7CgogIHJlcS5nZXRWYWxpZGF0aW9uUmVzdWx0KCkKICAgIC50aGVuKChyZXN1bHQpID0+IHsKICAgICAgaWYgKCFyZXN1bHQuaXNFbXB0eSgpKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0LmFycmF5KCkpOwogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IGVycm9yOiAnaW52YWxpZCBwYXJhbXMnIH0pOwogICAgICB9CgogICAgICBjb25zdCB1bnBlcm1pdHRlZFBhcmFtcyA9IF8uZGlmZmVyZW5jZShfLmtleXMocmVxLmJvZHkpLCBfLmtleXMoYm9keVNjaGVtYSkpOwoKICAgICAgY29uc3QgcGFyYW1zID0gXy5tYXBLZXlzKAogICAgICAgIF8ocmVxLmJvZHkpLm9taXQodW5wZXJtaXR0ZWRQYXJhbXMpLm9taXRCeShfLmlzVW5kZWZpbmVkKS52YWx1ZSgpLAogICAgICAgICh2YWx1ZSwga2V5KSA9PiB7CiAgICAgICAgICBpZiAoa2V5ID09PSAnaW52aXRhdGlvbl9zZW50JykgewogICAgICAgICAgICByZXR1cm4gJ2ludml0ZWQnOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGtleTsKICAgICAgICB9CiAgICAgICk7CgogICAgICBpZiAoXy5pc0VtcHR5KHBhcmFtcykpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBzdGF0dXM6IDQwMCwgZXJyb3I6ICd1bmV4cGVjdGVkIGVtcHR5IHBhcmFtcycgfSkKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBob3VzZWhvbGRJZDogcmVxLnBhcmFtcy5ob3VzZWhvbGRJZCwKICAgICAgICBwYXJhbXMKICAgICAgfTsKICAgIH0pCiAgICAudGhlbigoeyBob3VzZWhvbGRJZCwgcGFyYW1zIH0pID0+IHsKICAgICAgcmV0dXJuIGtuZXgoJ2dsX2hvdXNlaG9sZF9kZXRhaWxzJykKICAgICAgICAud2hlcmUoeyBpZDogaG91c2Vob2xkSWQsIHVzZXJfaWQ6IHJlcS51c2VyLmlkIH0pCiAgICAgICAgLnVwZGF0ZShwYXJhbXMpOwogICAgfSkKICAgIC50aGVuKChudW1Sb3dzVXBkYXRlZCkgPT4gewogICAgICBpZiAobnVtUm93c1VwZGF0ZWQgPT09IDApIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBzdGF0dXM6IDQwNCwgZXJyb3I6ICdob3VzZWhvbGQgY2Fubm90IGJlIGZvdW5kJyB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoMjAwKTsKICAgICAgfQogICAgfSkKICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICBpZiAoIV8uaXNOaWwoZXJyb3Iuc3RhdHVzKSkgewogICAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyhlcnJvci5zdGF0dXMpOwogICAgICB9CiAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyg1MDApOwogICAgfSk7Cn0pOwoKCnJvdXRlci5kZWxldGUoJy9ob3VzZWhvbGRzLzpob3VzZWhvbGRJZCcsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcykgewogIHJlcS5jaGVja1BhcmFtcygnaG91c2Vob2xkSWQnLCAnSW52YWxpZCBob3VzZWhvbGQgSUQnKS5ub3RFbXB0eSgpLmlzSW50KCk7CiAgcmVxLnNhbml0aXplUGFyYW1zKCdob3VzZWhvbGRJZCcpLnRvSW50KCk7CgogIHJlcS5nZXRWYWxpZGF0aW9uUmVzdWx0KCkKICAgIC50aGVuKChyZXN1bHQpID0+IHsKICAgICAgaWYgKCFyZXN1bHQuaXNFbXB0eSgpKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHsgc3RhdHVzOiA0MDAsIGVycm9yOiAnaW52YWxpZCBob3VzZWhvbGQgaWQnIH0pOwogICAgICB9CiAgICAgIHJldHVybiByZXEucGFyYW1zLmhvdXNlaG9sZElkOwogICAgfSkKICAgIC50aGVuKChob3VzZWhvbGRJZCkgPT4gewogICAgICByZXR1cm4ga25leCgnZ2xfaG91c2Vob2xkX2RldGFpbHMnKQogICAgICAgIC53aGVyZSh7IGlkOiBob3VzZWhvbGRJZCwgdXNlcl9pZDogcmVxLnVzZXIuaWQgfSkKICAgICAgICAuZGVsKCk7CiAgICB9KQogICAgLnRoZW4oKG51bVJvd3NEZWxldGVkKSA9PiB7CiAgICAgIGlmIChudW1Sb3dzRGVsZXRlZCA9PT0gMCkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IHN0YXR1czogNDAwLCBlcnJvcjogJ2ludmFsaWQgaG91c2Vob2xkJyB9KTsKICAgICAgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoMjAwKTsKICAgIH0pCiAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgaWYgKCFfLmlzTmlsKGVycm9yLnN0YXR1cykpIHsKICAgICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoZXJyb3Iuc3RhdHVzKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgIH0pOwp9KTsKCnJvdXRlci5wb3N0KCcvaG91c2Vob2xkcy86aG91c2Vob2xkSWQvZ3Vlc3RzJywgZW5zdXJlQXV0aGVudGljYXRlZCwgZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0KSB7CiAgcmVxLmNoZWNrUGFyYW1zKCdob3VzZWhvbGRJZCcsICdJbnZhbGlkIGhvdXNlaG9sZCBJRCcpLm5vdEVtcHR5KCkuaXNJbnQoKTsKICByZXEuc2FuaXRpemVQYXJhbXMoJ2hvdXNlaG9sZElkJykudG9JbnQoKTsKCiAgcmVxLmdldFZhbGlkYXRpb25SZXN1bHQoKQogICAgLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICBpZiAoIXJlc3VsdC5pc0VtcHR5KCkpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBlcnJvcjogJ2ludmFsaWQgaG91c2Vob2xkIGlkJyB9KTsKICAgICAgfQogICAgICByZXR1cm4gcmVxLnBhcmFtcy5ob3VzZWhvbGRJZDsKICAgIH0pCiAgICAudGhlbigoaG91c2Vob2xkSWQpID0+IHsKICAgICAgcmV0dXJuIGtuZXgoJ2dsX2hvdXNlaG9sZF9kZXRhaWxzJykud2hlcmUoeyBpZDogaG91c2Vob2xkSWQsIHVzZXJfaWQ6IHJlcS51c2VyLmlkIH0pOwogICAgfSkKICAgIC50aGVuKChob3VzZWhvbGRzKSA9PiB7CiAgICAgIGlmIChfLmlzTmlsKGhvdXNlaG9sZHMpIHx8IF8uaXNOaWwoaG91c2Vob2xkc1swXSkpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBlcnJvcjogJ2hvdXNlaG9sZCBjYW5ub3QgYmUgZm91bmQuJyB9KTsKICAgICAgfQoKICAgICAgY29uc3QgaG91c2Vob2xkID0gaG91c2Vob2xkc1swXTsKICAgICAgcmV0dXJuIGtuZXgoJ2dsX2d1ZXN0cycpLnJldHVybmluZygnaWQnKS5pbnNlcnQoeyBob3VzZWhvbGRfZGV0YWlsc19pZDogaG91c2Vob2xkLmlkIH0pOwogICAgfSkKICAgIC50aGVuKChbZ3Vlc3RJZF0pID0+IHsKICAgICAgcmVzLnNlbmQoeyBndWVzdF9pZDogZ3Vlc3RJZCB9KTsKICAgIH0pCiAgICAuY2F0Y2goKGVycikgPT4gewogICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICByZXMuc2VuZFN0YXR1cyg1MDApOwogICAgfSk7Cn0pOwoKcm91dGVyLmRlbGV0ZSgnL2hvdXNlaG9sZHMvOmhvdXNlaG9sZElkL2d1ZXN0cy86Z3Vlc3RJZCcsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCkgewogIHJlcS5jaGVja1BhcmFtcygnaG91c2Vob2xkSWQnLCAnSW52YWxpZCBob3VzZWhvbGQgSUQnKS5ub3RFbXB0eSgpLmlzSW50KCk7CiAgcmVxLnNhbml0aXplUGFyYW1zKCdob3VzZWhvbGRJZCcpLnRvSW50KCk7CgogIHJlcS5jaGVja1BhcmFtcygnZ3Vlc3RJZCcsICdJbnZhbGlkIGd1ZXN0IElEJykubm90RW1wdHkoKS5pc0ludCgpOwogIHJlcS5zYW5pdGl6ZVBhcmFtcygnZ3Vlc3RJZCcpLnRvSW50KCk7CgogIHJlcS5nZXRWYWxpZGF0aW9uUmVzdWx0KCkKICAgIC50aGVuKChyZXN1bHQpID0+IHsKICAgICAgaWYgKCFyZXN1bHQuaXNFbXB0eSgpKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHsgZXJyb3I6ICdpbnZhbGlkIHBhcmFtcycgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIFtyZXEucGFyYW1zLmhvdXNlaG9sZElkLCByZXEucGFyYW1zLmd1ZXN0SWRdOwogICAgfSkKICAgIC50aGVuKChbaG91c2Vob2xkSWQsIGd1ZXN0SWRdKSA9PiB7CiAgICAgIHJldHVybiBrbmV4KCdnbF9ndWVzdHMnKQogICAgICAgIC53aGVyZSgKICAgICAgICAgICdpZCcsCiAgICAgICAgICBrbmV4KCdnbF9ndWVzdHMnKQogICAgICAgICAgICAuam9pbignZ2xfaG91c2Vob2xkX2RldGFpbHMnLCB7ICdnbF9ob3VzZWhvbGRfZGV0YWlscy5pZCc6ICdnbF9ndWVzdHMuaG91c2Vob2xkX2RldGFpbHNfaWQnIH0pCiAgICAgICAgICAgIC53aGVyZSh7CiAgICAgICAgICAgICAgJ2dsX2hvdXNlaG9sZF9kZXRhaWxzLmlkJzogaG91c2Vob2xkSWQsCiAgICAgICAgICAgICAgJ2dsX2hvdXNlaG9sZF9kZXRhaWxzLnVzZXJfaWQnOiByZXEudXNlci5pZCwKICAgICAgICAgICAgICAnZ2xfZ3Vlc3RzLmlkJzogZ3Vlc3RJZAogICAgICAgICAgICB9KQogICAgICAgICAgICAuc2VsZWN0KCdnbF9ndWVzdHMuaWQnKQogICAgICAgICAgICAubGltaXQoMSkKICAgICAgICApLmRlbCgpOwogICAgfSkKICAgIC50aGVuKChudW1Sb3dzRGVsZXRlZCkgPT4gewogICAgICBpZiAobnVtUm93c0RlbGV0ZWQgPT09IDEpIHsKICAgICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoMjAwKTsKICAgICAgfQogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBzdGF0dXM6IDQwMCwgZXJyb3I6ICdubyByZWNvcmQgaXMgZGVsZXRlZC4nIH0pOwogICAgfSkKICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICBpZiAoIV8uaXNOaWwoZXJyb3Iuc3RhdHVzKSkgewogICAgICAgIHJlcy5zZW5kU3RhdHVzKGVycm9yLnN0YXR1cyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgICAgfQogICAgfSk7Cn0pOwoKcm91dGVyLmdldCgnL2hvdXNlaG9sZHMvOmhvdXNlaG9sZElkL2dpZnRzJywgZW5zdXJlQXV0aGVudGljYXRlZCwgZnVuY3Rpb24gKHJlcSwgcmVzKXsKICByZXEuY2hlY2tQYXJhbXMoJ2hvdXNlaG9sZElkJywgJ0ludmFsaWQgaG91c2Vob2xkIElEJykubm90RW1wdHkoKS5pc0ludCgpOwogIHJlcS5zYW5pdGl6ZVBhcmFtcygnaG91c2Vob2xkSWQnKS50b0ludCgpOwoKICByZXEuZ2V0VmFsaWRhdGlvblJlc3VsdCgpCiAgICAudGhlbigocmVzdWx0KSA9PiB7CiAgICAgIGlmICghcmVzdWx0LmlzRW1wdHkoKSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IHN0YXR1czogNDAwLCBlcnJvcjogJ2ludmFsaWQgaG91c2Vob2xkIGlkJyB9KTsKICAgICAgfQogICAgICByZXR1cm4gcmVxLnBhcmFtcy5ob3VzZWhvbGRJZDsKICAgIH0pCiAgICAudGhlbigoaG91c2Vob2xkSWQpID0+IHsKICAgICAgcmV0dXJuIGtuZXgoJ2dsX2hvdXNlaG9sZF9kZXRhaWxzJykKICAgICAgICAubGVmdEpvaW4oJ2dsX2dpZnRzJywgeyAnZ2xfZ2lmdHMuaG91c2Vob2xkX2RldGFpbHNfaWQnOiAnZ2xfaG91c2Vob2xkX2RldGFpbHMuaWQnIH0pCiAgICAgICAgLndoZXJlKHsKICAgICAgICAgICdnbF9ob3VzZWhvbGRfZGV0YWlscy5pZCc6IGhvdXNlaG9sZElkLAogICAgICAgICAgJ2dsX2hvdXNlaG9sZF9kZXRhaWxzLnVzZXJfaWQnOiByZXEudXNlci5pZAogICAgICAgIH0pCiAgICAgICAgLnNlbGVjdCgKICAgICAgICAgICdnbF9naWZ0cy5pZCBBUyBnaWZ0X2lkJywKICAgICAgICAgICdnbF9naWZ0cy5uYW1lIEFTIGdpZnRfbmFtZScsCiAgICAgICAgICAnZ2xfaG91c2Vob2xkX2RldGFpbHMuZ2lmdHNfdGhhbmtlZCBBUyB0aGFua2VkJwogICAgICAgICkKICAgICAgICAub3JkZXJCeSgnZ2lmdF9pZCcsICdBU0MnKTsKICAgIH0pCiAgICAudGhlbigocmVzdWx0cykgPT4gewogICAgICBpZiAoXy5pc0VtcHR5KHJlc3VsdHMpKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHsgc3RhdHVzOiA0MDQsIGVycm9yOiAnaG91c2Vob2xkIGNhbm5vdCBiZSBmb3VuZCcgfSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHRoYW5rZWQgPSByZXN1bHRzWzBdLnRoYW5rZWQ7CiAgICAgIGNvbnN0IGdpZnRzID0gXyhyZXN1bHRzKS5maWx0ZXIocmVzdWx0ID0+ICFfLmlzTmlsKHJlc3VsdC5naWZ0X2lkKSkKICAgICAgICAubWFwKChyZXN1bHQpID0+IHsKICAgICAgICAgIGRlbGV0ZSByZXN1bHQudGhhbmtlZDsKICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfSk7CgogICAgICByZXR1cm4gcmVzLnNlbmQoeyBnaWZ0cywgdGhhbmtlZCB9KTsKICAgIH0pCiAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgaWYgKCFfLmlzTmlsKGVycm9yLnN0YXR1cykpIHsKICAgICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoZXJyb3Iuc3RhdHVzKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgIH0pOwp9KTsKCnJvdXRlci5wb3N0KCcvaG91c2Vob2xkcy86aG91c2Vob2xkSWQvZ2lmdHMnLCBlbnN1cmVBdXRoZW50aWNhdGVkLCBmdW5jdGlvbiAocmVxLCByZXMpIHsKICByZXEuY2hlY2tQYXJhbXMoJ2hvdXNlaG9sZElkJywgJ0ludmFsaWQgaG91c2Vob2xkIElEJykubm90RW1wdHkoKS5pc0ludCgpOwogIHJlcS5zYW5pdGl6ZVBhcmFtcygnaG91c2Vob2xkSWQnKS50b0ludCgpOwoKICByZXEuY2hlY2tCb2R5KCduYW1lJykubm90RW1wdHkoKTsKICByZXEuc2FuaXRpemVCb2R5KCduYW1lJykudHJpbSgpOwoKICByZXEuZ2V0VmFsaWRhdGlvblJlc3VsdCgpCiAgICAudGhlbigocmVzdWx0KSA9PiB7CiAgICAgIGlmICghcmVzdWx0LmlzRW1wdHkoKSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IGVycm9yOiAnaW52YWxpZCBwYXJhbXMnIH0pOwogICAgICB9CiAgICAgIHJldHVybiBbcmVxLnBhcmFtcy5ob3VzZWhvbGRJZCwgcmVxLmJvZHkubmFtZV07CiAgICB9KQogICAgLnRoZW4oKFtob3VzZWhvbGRJZCwgZ2lmdE5hbWVdKSA9PiB7CiAgICAgIHJldHVybiBrbmV4KCdnbF9naWZ0cycpCiAgICAgICAgLnJldHVybmluZygnaWQnKQogICAgICAgIC5pbnNlcnQoewogICAgICAgICAgbmFtZTogZ2lmdE5hbWUsCiAgICAgICAgICBob3VzZWhvbGRfZGV0YWlsc19pZDoga25leCgnZ2xfaG91c2Vob2xkX2RldGFpbHMnKQogICAgICAgICAgICAud2hlcmUoeyBpZDogaG91c2Vob2xkSWQsIHVzZXJfaWQ6IHJlcS51c2VyLmlkIH0pCiAgICAgICAgICAgIC5zZWxlY3QoJ2lkJykKICAgICAgICAgICAgLmxpbWl0KDEpCiAgICAgICAgfSk7CiAgICB9KQogICAgLnRoZW4oKGdpZnRJZCkgPT4gewogICAgICBjb25zb2xlLmxvZyhgR2lmdCAjJHtnaWZ0SWR9IGNyZWF0ZWQuYCk7CiAgICAgIHJldHVybiByZXMuc2VuZCh7IGdpZnQ6IHsgZ2lmdF9pZDogZ2lmdElkIH0gfSk7CiAgICB9KQogICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIGlmICghXy5pc05pbChlcnJvci5zdGF0dXMpKSB7CiAgICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKGVycm9yLnN0YXR1cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDUwMCk7CiAgICB9KTsKfSk7Cgpyb3V0ZXIucHV0KCcvaG91c2Vob2xkcy86aG91c2Vob2xkSWQvZ2lmdHMnLCBlbnN1cmVBdXRoZW50aWNhdGVkLCBmdW5jdGlvbiAocmVxLCByZXMpIHsKICByZXEuY2hlY2tQYXJhbXMoJ2hvdXNlaG9sZElkJywgJ0ludmFsaWQgaG91c2Vob2xkIElEJykubm90RW1wdHkoKS5pc0ludCgpOwogIHJlcS5zYW5pdGl6ZVBhcmFtcygnaG91c2Vob2xkSWQnKS50b0ludCgpOwoKICBjb25zdCBib2R5U2NoZW1hID0gewogICAgdGhhbmtlZDogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0sCiAgICAgIGlzQm9vbGVhbjogewogICAgICAgIGVycm9yTWVzc2FnZTogJ0ludmFsaWQgdmFsdWUgZm9yIHRoYW5rZWQnCiAgICAgIH0KICAgIH0KICB9OwoKICByZXEuY2hlY2tCb2R5KGJvZHlTY2hlbWEpOwoKICByZXEuZ2V0VmFsaWRhdGlvblJlc3VsdCgpCiAgICAudGhlbigocmVzdWx0KSA9PiB7CiAgICAgIGlmICghcmVzdWx0LmlzRW1wdHkoKSkgewogICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdC5hcnJheSgpKTsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBzdGF0dXM6IDQwMCwgZXJyb3I6ICdpbnZhbGlkIHBhcmFtZXRlcnMnIH0pOwogICAgICB9CgogICAgICBjb25zdCB1bnBlcm1pdHRlZFBhcmFtcyA9IF8uZGlmZmVyZW5jZShfLmtleXMocmVxLmJvZHkpLCBfLmtleXMoYm9keVNjaGVtYSkpOwoKICAgICAgY29uc3QgcGFyYW1zID0gXy5tYXBLZXlzKAogICAgICAgIF8ocmVxLmJvZHkpLm9taXQodW5wZXJtaXR0ZWRQYXJhbXMpLm9taXRCeShfLmlzVW5kZWZpbmVkKS52YWx1ZSgpLAogICAgICAgICh2YWx1ZSwga2V5KSA9PiB7CiAgICAgICAgICBpZiAoa2V5ID09PSAndGhhbmtlZCcpIHsKICAgICAgICAgICAgcmV0dXJuICdnaWZ0c190aGFua2VkJzsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBrZXk7CiAgICAgICAgfQogICAgICApOwoKICAgICAgaWYgKF8uaXNFbXB0eShwYXJhbXMpKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHsgc3RhdHVzOiA0MDAsIGVycm9yOiAndW5leHBlY3RlZCBlbXB0eSBwYXJhbXMnIH0pOwogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGhvdXNlaG9sZElkOiByZXEucGFyYW1zLmhvdXNlaG9sZElkLAogICAgICAgIHBhcmFtcwogICAgICB9OwogICAgfSkKICAgIC50aGVuKCh7IGhvdXNlaG9sZElkLCBwYXJhbXMgfSkgPT4gewogICAgICByZXR1cm4ga25leCgnZ2xfaG91c2Vob2xkX2RldGFpbHMnKQogICAgICAgIC53aGVyZSh7IGlkOiBob3VzZWhvbGRJZCwgdXNlcl9pZDogcmVxLnVzZXIuaWQgfSkKICAgICAgICAudXBkYXRlKHBhcmFtcyk7CiAgICB9KQogICAgLnRoZW4oKG51bVJvd3NVcGRhdGVkKSA9PiB7CiAgICAgIGlmIChudW1Sb3dzVXBkYXRlZCA9PT0gMCkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IHN0YXR1czogNDA0LCBlcnJvcjogJ25vIHJlY29yZCB1cGRhdGVkJyB9KTsKICAgICAgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoMjAwKTsKICAgIH0pCiAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgaWYgKCFfLmlzTmlsKGVycm9yLnN0YXR1cykpIHsKICAgICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoZXJyb3Iuc3RhdHVzKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgIH0pOwp9KTsKCnJvdXRlci5kZWxldGUoJy9ob3VzZWhvbGRzLzpob3VzZWhvbGRJZC9naWZ0cy86Z2lmdElkJywgZW5zdXJlQXV0aGVudGljYXRlZCwgZnVuY3Rpb24gKHJlcSwgcmVzKSB7CiAgcmVxLmNoZWNrUGFyYW1zKCdob3VzZWhvbGRJZCcsICdJbnZhbGlkIGhvdXNlaG9sZCBJRCcpLm5vdEVtcHR5KCkuaXNJbnQoKTsKICByZXEuc2FuaXRpemVQYXJhbXMoJ2hvdXNlaG9sZElkJykudG9JbnQoKTsKCiAgcmVxLmNoZWNrUGFyYW1zKCdnaWZ0SWQnLCAnSW52YWxpZCBnaWZ0IElEJykubm90RW1wdHkoKS5pc0ludCgpOwogIHJlcS5zYW5pdGl6ZVBhcmFtcygnZ2lmdElkJykudG9JbnQoKTsKCiAgcmVxLmdldFZhbGlkYXRpb25SZXN1bHQoKQogICAgLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICBpZiAoIXJlc3VsdC5pc0VtcHR5KCkpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBlcnJvcjogJ2ludmFsaWQgcGFyYW1zJyB9KTsKICAgICAgfQogICAgICByZXR1cm4gW3JlcS5wYXJhbXMuaG91c2Vob2xkSWQsIHJlcS5wYXJhbXMuZ2lmdElkXTsKICAgIH0pCiAgICAudGhlbigoW2hvdXNlaG9sZElkLCBnaWZ0SWRdKSA9PiB7CiAgICAgIHJldHVybiBrbmV4KCdnbF9naWZ0cycpCiAgICAgICAgLndoZXJlKHsKICAgICAgICAgIGlkOiBnaWZ0SWQsCiAgICAgICAgICBob3VzZWhvbGRfZGV0YWlsc19pZDoga25leCgnZ2xfaG91c2Vob2xkX2RldGFpbHMnKQogICAgICAgICAgICAud2hlcmUoeyBpZDogaG91c2Vob2xkSWQsIHVzZXJfaWQ6IHJlcS51c2VyLmlkIH0pCiAgICAgICAgICAgIC5zZWxlY3QoJ2lkJykKICAgICAgICAgICAgLmxpbWl0KDEpCiAgICAgICAgfSkKICAgICAgICAuZGVsKCk7CiAgICB9KQogICAgLnRoZW4oKG51bVJvd3NEZWxldGVkKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKGAke251bVJvd3NEZWxldGVkfSByb3dzIGRlbGV0ZWRgKTsKICAgICAgaWYgKG51bVJvd3NEZWxldGVkID09PSAwKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHsgc3RhdHVzOiA0MDQsIGVycm9yOiAnaG91c2Vob2xkIGFuZC9vciBnaWZ0IG5vdCBmb3VuZCcgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDIwMCk7CiAgICB9KQogICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIGlmICghXy5pc05pbChlcnJvci5zdGF0dXMpKSB7CiAgICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKGVycm9yLnN0YXR1cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDUwMCk7CiAgICB9KTsKfSk7Cgpyb3V0ZXIucHV0KCcvaG91c2Vob2xkcy86aG91c2Vob2xkSWQvZ2lmdHMvOmdpZnRJZCcsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcykgewogIGNvbnN0IHBhcmFtU2NoZW1hID0gewogICAgaG91c2Vob2xkSWQ6IHsKICAgICAgaXNJbnQ6IHsKICAgICAgICBlcnJvck1lc3NhZ2U6ICdJbnZhbGlkIGhvdXNlaG9sZCBJRCcKICAgICAgfQogICAgfSwKICAgIGdpZnRJZDogewogICAgICBpc0ludDogewogICAgICAgIGVycm9yTWVzc2FnZTogJ0ludmFsaWQgZ2lmdCBJRCcKICAgICAgfQogICAgfQogIH07CgogIGNvbnN0IGJvZHlTY2hlbWEgPSB7CiAgICBuYW1lOiB7CiAgICAgIG9wdGlvbmFsOiB7CiAgICAgICAgb3B0aW9uczogeyBjaGVja0ZhbHN5OiB0cnVlIH0KICAgICAgfQogICAgfQogIH07CgogIHZhbGlkYXRlUGFyYW1zKHJlcSwgeyBwYXJhbVNjaGVtYSwgYm9keVNjaGVtYSB9KQogICAgLnRoZW4oKHsgcGFyYW1zLCBib2R5IH0pID0+IHsKICAgICAgaWYgKF8uaXNFbXB0eShib2R5KSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IHN0YXR1czogNDAwLCBlcnJvcjogJ3VuZXhwZWN0ZWQgZW1wdHkgcGFyYW1zJyB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBob3VzZWhvbGRJZDogcGFyYW1zLmhvdXNlaG9sZElkLAogICAgICAgIGdpZnRJZDogcGFyYW1zLmdpZnRJZCwKICAgICAgICBwYXJhbXM6IGJvZHkKICAgICAgfQogICAgfSkKICAgIC50aGVuKCh7IGhvdXNlaG9sZElkLCBnaWZ0SWQsIHBhcmFtcyB9KSA9PiB7CiAgICAgIHJldHVybiBrbmV4KCdnbF9naWZ0cycpCiAgICAgICAgLndoZXJlKHsKICAgICAgICAgIGlkOiBnaWZ0SWQsCiAgICAgICAgICBob3VzZWhvbGRfZGV0YWlsc19pZDoga25leCgnZ2xfaG91c2Vob2xkX2RldGFpbHMnKQogICAgICAgICAgICAud2hlcmUoeyBpZDogaG91c2Vob2xkSWQsIHVzZXJfaWQ6IHJlcS51c2VyLmlkIH0pCiAgICAgICAgICAgIC5zZWxlY3QoJ2lkJykKICAgICAgICAgICAgLmxpbWl0KDEpCiAgICAgICAgfSkKICAgICAgICAudXBkYXRlKHBhcmFtcyk7CiAgICB9KQogICAgLnRoZW4oKG51bVJvd3NVcGRhdGVkKSA9PiB7CiAgICAgIGlmIChudW1Sb3dzVXBkYXRlZCA9PT0gMCkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IHN0YXR1czogNDA0LCBlcnJvcjogJ25vIHJlY29yZCB1cGRhdGVkJyB9KTsKICAgICAgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoMjAwKTsKICAgIH0pCiAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgaWYgKCFfLmlzTmlsKGVycm9yLnN0YXR1cykpIHsKICAgICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoZXJyb3Iuc3RhdHVzKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgIH0pOwp9KTsKCnJvdXRlci5wdXQoJy9ob3VzZWhvbGRzLzpob3VzZWhvbGRJZC9ndWVzdHMvOmd1ZXN0SWQnLCBlbnN1cmVBdXRoZW50aWNhdGVkLCBmdW5jdGlvbiAocmVxLCByZXMpIHsKICBjb25zdCBwYXJhbVNjaGVtYSA9IHsKICAgIGhvdXNlaG9sZElkOiB7CiAgICAgIGlzSW50OiB7CiAgICAgICAgZXJyb3JNZXNzYWdlOiAnSW52YWxpZCBob3VzZWhvbGQgSUQnCiAgICAgIH0KICAgIH0sCiAgICBndWVzdElkOiB7CiAgICAgIGlzSW50OiB7CiAgICAgICAgZXJyb3JNZXNzYWdlOiAnSW52YWxpZCBndWVzdCBJRCcKICAgICAgfQogICAgfQogIH07CgogIGNvbnN0IGJvZHlTY2hlbWEgPSB7CiAgICBmaXJzdF9uYW1lOiB7CiAgICAgIG9wdGlvbmFsOiB7CiAgICAgICAgb3B0aW9uczogeyBjaGVja0ZhbHN5OiB0cnVlIH0KICAgICAgfQogICAgfSwKICAgIG1pZGRsZV9uYW1lOiB7CiAgICAgIG9wdGlvbmFsOiB7CiAgICAgICAgb3B0aW9uczogeyBjaGVja0ZhbHN5OiB0cnVlIH0KICAgICAgfQogICAgfSwKICAgIGxhc3RfbmFtZTogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICBlbWFpbDogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0sCiAgICAgIGlzRW1haWw6IHsKICAgICAgICBlcnJvck1lc3NhZ2U6ICdJbnZhbGlkIEVtYWlsJwogICAgICB9CiAgICB9LAogICAgcGhvbmU6IHsKICAgICAgb3B0aW9uYWw6IHsKICAgICAgICBvcHRpb25zOiB7IGNoZWNrRmFsc3k6IHRydWUgfQogICAgICB9CiAgICB9LAogICAgaXNfYWR1bHQ6IHsKICAgICAgb3B0aW9uYWw6IHsKICAgICAgICBvcHRpb25zOiB7IGNoZWNrRmFsc3k6IHRydWUgfQogICAgICB9LAogICAgICBpc0Jvb2xlYW46IHsKICAgICAgICBlcnJvck1lc3NhZ2U6ICdJbnZhbGlkIHZhbHVlIGZvciBpc19hZHVsdCcKICAgICAgfQogICAgfSwKICAgIGFnZTogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICByZXF1ZXN0c19jaGFpcjogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICBkaWV0X3Jlc3RyaWN0aW9uczogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICByZXF1ZXN0c19vdGhlcjogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0KICB9OwoKICB2YWxpZGF0ZVBhcmFtcyhyZXEsIHsgcGFyYW1TY2hlbWEsIGJvZHlTY2hlbWEgfSkKICAgIC50aGVuKCh7IHBhcmFtcywgYm9keSB9KSA9PiB7CiAgICAgIGNvbnN0IHVwZGF0ZVBhcmFtcyA9IF8ubWFwS2V5cygKICAgICAgICBib2R5LAogICAgICAgICh2YWx1ZSwga2V5KSA9PiB7CiAgICAgICAgICBpZiAoa2V5ID09PSAncmVxdWVzdHNfY2hhaXInKSB7CiAgICAgICAgICAgIHJldHVybiAnY2hhaXJfcmVxdWVzdCc7CiAgICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2RpZXRfcmVzdHJpY3Rpb25zJykgewogICAgICAgICAgICByZXR1cm4gJ3Jlc3RyaWN0aW9ucyc7CiAgICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ3JlcXVlc3RzX290aGVyJykgewogICAgICAgICAgICByZXR1cm4gJ290aGVyX3JlcXVlc3RzJzsKICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnaXNfYWR1bHQnKSB7CiAgICAgICAgICAgIHJldHVybiAnYWR1bHRfdHJ1ZSc7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4ga2V5OwogICAgICAgIH0KICAgICAgKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBob3VzZWhvbGRJZDogcGFyYW1zLmhvdXNlaG9sZElkLAogICAgICAgIGd1ZXN0SWQ6IHBhcmFtcy5ndWVzdElkLAogICAgICAgIHBhcmFtczogdXBkYXRlUGFyYW1zCiAgICAgIH0KICAgIH0pCiAgICAudGhlbigoeyBob3VzZWhvbGRJZCwgZ3Vlc3RJZCwgcGFyYW1zIH0pID0+IHsKICAgICAgcmV0dXJuIGtuZXgoJ2dsX2d1ZXN0cycpCiAgICAgICAgLndoZXJlKHsKICAgICAgICAgIGlkOiBndWVzdElkLAogICAgICAgICAgaG91c2Vob2xkX2RldGFpbHNfaWQ6IGtuZXgoJ2dsX2hvdXNlaG9sZF9kZXRhaWxzJykKICAgICAgICAgICAgLndoZXJlKHsgaWQ6IGhvdXNlaG9sZElkLCB1c2VyX2lkOiByZXEudXNlci5pZCB9KQogICAgICAgICAgICAuc2VsZWN0KCdpZCcpCiAgICAgICAgICAgIC5saW1pdCgxKQogICAgICAgIH0pCiAgICAgICAgLnVwZGF0ZShwYXJhbXMpOwogICAgfSkKICAgIC50aGVuKChudW1Sb3dzVXBkYXRlZCkgPT4gewogICAgICBjb25zb2xlLmxvZyhgJHtudW1Sb3dzVXBkYXRlZH0gcm93cyB1cGRhdGVkYCk7CiAgICAgIGlmIChudW1Sb3dzVXBkYXRlZCA9PT0gMSkgewogICAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cygyMDApOwogICAgICB9CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IHN0YXR1czogNDA0LCBlcnJvcjogJ2hvdXNlaG9sZC9ndWVzdCBjYW5ub3QgYmUgZm91bmQnIH0pOwogICAgfSkKICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICBpZiAoIV8uaXNOaWwoZXJyb3Iuc3RhdHVzKSkgewogICAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyhlcnJvci5zdGF0dXMpOwogICAgICB9CiAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyg1MDApOwogICAgfSk7Cn0pOwoKcm91dGVyLnB1dCgnL2hvdXNlaG9sZHMvOmhvdXNlaG9sZElkL2d1ZXN0cy86Z3Vlc3RJZC9yc3Zwcy86ZXZlbnRJZCcsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcykgewogIHJlcS5jaGVja1BhcmFtcygnaG91c2Vob2xkSWQnLCAnSW52YWxpZCBob3VzZWhvbGQgSUQnKS5ub3RFbXB0eSgpLmlzSW50KCk7CiAgcmVxLnNhbml0aXplUGFyYW1zKCdob3VzZWhvbGRJZCcpLnRvSW50KCk7CgogIHJlcS5jaGVja1BhcmFtcygnZ3Vlc3RJZCcsICdJbnZhbGlkIGd1ZXN0IElEJykubm90RW1wdHkoKS5pc0ludCgpOwogIHJlcS5zYW5pdGl6ZVBhcmFtcygnZ3Vlc3RJZCcpLnRvSW50KCk7CgogIHJlcS5jaGVja1BhcmFtcygnZXZlbnRJZCcsICdJbnZhbGlkZSBldmVudCBpZCcpLm5vdEVtcHR5KCkuaXNJbnQoKTsKICByZXEuc2FuaXRpemVQYXJhbXMoJ2V2ZW50SWQnKS50b0ludCgpOwoKICBjb25zdCBib2R5U2NoZW1hID0gewogICAgaXNfYXR0ZW5kaW5nOiB7CiAgICAgIG9wdGlvbmFsOiB7CiAgICAgICAgb3B0aW9uczogeyBjaGVja0ZhbHN5OiB0cnVlIH0KICAgICAgfSwKICAgICAgaXNCb29sZWFuOiB7CiAgICAgICAgZXJyb3JNZXNzYWdlOiAnSW52YWxpZCB2YWx1ZSBmb3IgaXNfYXR0ZW5kaW5nJwogICAgICB9CiAgICB9LAogICAgbWVhbF9zZWxlY3Rpb25faWQ6IHsKICAgICAgb3B0aW9uYWw6IHsKICAgICAgICBvcHRpb25zOiB7IGNoZWNrRmFsc3k6IHRydWUgfQogICAgICB9LAogICAgICBpc0ludDogewogICAgICAgIGVycm9yTWVzc2FnZTogJ0ludmFsaWQgdmFsdWUgZm9yIG1lYWxfc2VsZWN0aW9uX2lkJwogICAgICB9CiAgICB9CiAgfTsKCiAgcmVxLmNoZWNrQm9keShib2R5U2NoZW1hKTsKCiAgcmVxLmdldFZhbGlkYXRpb25SZXN1bHQoKQogICAgLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICBpZiAoIXJlc3VsdC5pc0VtcHR5KCkpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBlcnJvcjogJ2ludmFsaWQgcGFyYW1zJyB9KTsKICAgICAgfQoKICAgICAgLy8gZmluZCB1bnBlcm1pdHRlZCBwYXJhbXMKICAgICAgY29uc3QgdW5wZXJtaXR0ZWRQYXJhbXMgPSBfLmRpZmZlcmVuY2UoXy5rZXlzKHJlcS5ib2R5KSwgXy5rZXlzKGJvZHlTY2hlbWEpKTsKCiAgICAgIGNvbnN0IHBhcmFtcyA9IF8ubWFwS2V5cygKICAgICAgICBfKHJlcS5ib2R5KS5vbWl0KHVucGVybWl0dGVkUGFyYW1zKS5vbWl0QnkoXy5pc1VuZGVmaW5lZCkudmFsdWUoKSwKICAgICAgICAodmFsdWUsIGtleSkgPT4gewogICAgICAgICAgaWYgKGtleSA9PT0gJ2lzX2F0dGVuZGluZycpIHsKICAgICAgICAgICAgcmV0dXJuICdhdHRlbmRpbmdfdHJ1ZSc7CiAgICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ21lYWxfc2VsZWN0aW9uX2lkJykgewogICAgICAgICAgICByZXR1cm4gJ21lYWxfaWQnOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGtleTsKICAgICAgICB9CiAgICAgICk7CgogICAgICByZXR1cm4gewogICAgICAgIGhvdXNlaG9sZElkOiByZXEucGFyYW1zLmhvdXNlaG9sZElkLAogICAgICAgIGd1ZXN0SWQ6IHJlcS5wYXJhbXMuZ3Vlc3RJZCwKICAgICAgICBldmVudElkOiByZXEucGFyYW1zLmV2ZW50SWQsCiAgICAgICAgcGFyYW1zCiAgICAgIH07CiAgICB9KQogICAgLnRoZW4oKHsgaG91c2Vob2xkSWQsIGd1ZXN0SWQsIGV2ZW50SWQsIHBhcmFtcyB9KSA9PiB7CiAgICAgIC8vIEVuc3VyZQogICAgICAvLyAgIDEuIGhvdXNlaG9sZCBpcyBpbnZpdGVkIHRvIHRoZSBldmVudAogICAgICAvLyAgIDIuIGhvdXNlaG9sZCBoYXMgdGhpcyBndWVzdAogICAgICAvLyAgIDMuIGV2ZW50IGhhcyB0aGUgbWVhbAogICAgICBsZXQgcXVlcnlCdWlsZGVyID0ga25leCgnZ2xfaG91c2Vob2xkX2RldGFpbHMnKQogICAgICAgIC5qb2luKCdnbF9ldmVudHMnLCB7ICdnbF9ldmVudHMudXNlcl9pZCc6ICdnbF9ob3VzZWhvbGRfZGV0YWlscy51c2VyX2lkJyB9KQogICAgICAgIC5qb2luKCdnbF9ndWVzdHMnLCB7ICdnbF9ndWVzdHMuaG91c2Vob2xkX2RldGFpbHNfaWQnOiAnZ2xfaG91c2Vob2xkX2RldGFpbHMuaWQnIH0pOwogICAgICBjb25zdCB3aGVyZUNsYXVzZSA9IHsKICAgICAgICAnZ2xfaG91c2Vob2xkX2RldGFpbHMuaWQnOiBob3VzZWhvbGRJZCwKICAgICAgICAnZ2xfaG91c2Vob2xkX2RldGFpbHMudXNlcl9pZCc6IHJlcS51c2VyLmlkLAogICAgICAgICdnbF9ndWVzdHMuaWQnOiBndWVzdElkLAogICAgICAgICdnbF9ldmVudHMuaWQnOiBldmVudElkCiAgICAgIH07CgogICAgICBjb25zdCBzZWxlY3RDb2x1bW5zID0gWydnbF9ndWVzdHMuaWQgQVMgZ3Vlc3RfaWQnLCAnZ2xfZXZlbnRzLmlkIEFTIGV2ZW50X2lkJ107CgogICAgICBpZiAoIV8uaXNVbmRlZmluZWQocGFyYW1zLm1lYWxfaWQpKSB7CiAgICAgICAgcXVlcnlCdWlsZGVyID0gcXVlcnlCdWlsZGVyLmpvaW4oJ2dsX21lYWxzJywgeyAnZ2xfbWVhbHMuZXZlbnRfaWQnOiAnZ2xfZXZlbnRzLmlkJyB9KTsKICAgICAgICB3aGVyZUNsYXVzZVsnZ2xfbWVhbHMuaWQnXSA9IHBhcmFtcy5tZWFsX2lkOwogICAgICAgIHNlbGVjdENvbHVtbnMucHVzaCgnZ2xfbWVhbHMuaWQgQVMgbWVhbF9pZCcpOwogICAgICB9CgogICAgICBpZiAoIV8uaXNOaWwocGFyYW1zLmF0dGVuZGluZ190cnVlKSkgewogICAgICAgIHNlbGVjdENvbHVtbnMucHVzaChrbmV4LnJhdyhgJHtwYXJhbXMuYXR0ZW5kaW5nX3RydWV9IEFTIGF0dGVuZGluZ190cnVlYCkpOwogICAgICB9CgogICAgICBxdWVyeUJ1aWxkZXIgPSBxdWVyeUJ1aWxkZXIud2hlcmUod2hlcmVDbGF1c2UpLnNlbGVjdChzZWxlY3RDb2x1bW5zKS5saW1pdCgxKTsKCiAgICAgIHJldHVybiBxdWVyeUJ1aWxkZXI7CiAgICB9KQogICAgLnRoZW4oKFtyZXN1bHRdKSA9PiB7CiAgICAgIGlmIChfLmlzTmlsKHJlc3VsdCkpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBzdGF0dXM6IDQwNCwgZXJyb3I6ICdob3VzZWhvbGQvZ3Vlc3QvZXZlbnQvbWVhbCBub3QgZm91bmQnIH0pOwogICAgICB9CgogICAgICAvLyBVcHNlcnQ6IElOU0VSVCBvciBVUERBVEUKICAgICAgY29uc3QgdXBkYXRlUGFyYW1zS2V5ID0gWydtZWFsX2lkJywgJ2F0dGVuZGluZ190cnVlJ107CiAgICAgIGNvbnN0IHVwZGF0ZVBhcmFtcyA9IF8ocmVzdWx0KS5waWNrQnkoKHZhbHVlLCBrZXkpID0+IHVwZGF0ZVBhcmFtc0tleS5pbmNsdWRlcyhrZXkpKS52YWx1ZSgpOwogICAgICBjb25zdCB1cGRhdGVTcWwgPSBfLmtleXModXBkYXRlUGFyYW1zKS5tYXAoa2V5ID0+IGtuZXgucmF3KCc/PyA9IEVYQ0xVREVELj8/JywgW2tleSwga2V5XSkudG9TdHJpbmcoKSkuam9pbignLCAnKTsKICAgICAgY29uc3QgaW5zZXJ0U3FsID0ga25leCgnZ2xfZXZlbnRfcnN2cHMnKS5pbnNlcnQoXy5kZWZhdWx0cyhyZXN1bHQsIHsgYXR0ZW5kaW5nX3RydWU6IGZhbHNlIH0pKS50b1N0cmluZygpOwogICAgICBjb25zdCB1cHNlcnRTcWwgPSBrbmV4LnJhdyhgIE9OIENPTkZMSUNUIChldmVudF9pZCwgZ3Vlc3RfaWQpIERPIFVQREFURSBTRVQgJHt1cGRhdGVTcWx9IFJFVFVSTklORyBpZDtgKS50b1N0cmluZygpOwogICAgICBjb25zdCBzcWwgPSBgJHtpbnNlcnRTcWx9ICR7dXBzZXJ0U3FsfWA7CgogICAgICByZXR1cm4ga25leC5yYXcoc3FsKTsKICAgIH0pCiAgICAudGhlbigoeyByb3dzOiBbcmVzdWx0XSB9KSA9PiB7CiAgICAgIGlmIChfLmlzTmlsKHJlc3VsdCkpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBzdGF0dXM6IDQyMiwgZXJyb3I6ICdlcnJvciBwcm9jZXNzaW5nIHRoZSByZWNvcmQnIH0pOwogICAgICB9CiAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cygyMDApOwogICAgfSkKICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICBpZiAoIV8uaXNOaWwoZXJyb3Iuc3RhdHVzKSkgewogICAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyhlcnJvci5zdGF0dXMpOwogICAgICB9CiAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyg1MDApOwogICAgfSk7Cn0pOwoKcm91dGVyLmdldCgnL3JlcG9ydHMvZmxpZ2h0JywgZW5zdXJlQXV0aGVudGljYXRlZCwgZnVuY3Rpb24gKHJlcSwgcmVzKSB7CiAgR3Vlc3RMaXN0LmdldEZsaWdodFJlcG9ydERhdGEocmVxLnVzZXIuaWQpCiAgICAudGhlbigocmVzdWx0cykgPT4gewogICAgICByZXR1cm4gcmVzLnNlbmQocmVzdWx0cyk7CiAgICB9KQogICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgaWYgKCFfLmlzTmlsKGVycm9yLnN0YXR1cykpIHsgcmV0dXJuIHJlcy5zZW5kKGVycm9yLnN0YXR1cyk7IH0KICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDUwMCk7CiAgICB9KTsKfSk7Cgpyb3V0ZXIuZ2V0KCcvcmVwb3J0cy9ob3RlbCcsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcykgewogIEd1ZXN0TGlzdC5nZXRIb3RlbFJlcG9ydERhdGEocmVxLnVzZXIuaWQpCiAgICAudGhlbigocmVzdWx0cykgPT4gewogICAgICByZXR1cm4gcmVzLnNlbmQocmVzdWx0cyk7CiAgICB9KQogICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgaWYgKCFfLmlzTmlsKGVycm9yLnN0YXR1cykpIHsgcmV0dXJuIHJlcy5zZW5kKGVycm9yLnN0YXR1cyk7IH0KICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDUwMCk7CiAgICB9KTsKfSk7Cgpyb3V0ZXIuZ2V0KCcvcmVwb3J0cy9haXJsaW5lX2dyb3VwX3JlcG9ydCcsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcykgewogIEd1ZXN0TGlzdC5nZXRBaXJsaW5lUmVwb3J0RGF0YShyZXEudXNlci5pZCkKICAgIC50aGVuKChyZXN1bHRzKSA9PiB7CiAgICAgIHJldHVybiByZXMuc2VuZChyZXN1bHRzKTsKICAgIH0pCiAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICBpZiAoIV8uaXNOaWwoZXJyb3Iuc3RhdHVzKSkgeyByZXR1cm4gcmVzLnNlbmQoZXJyb3Iuc3RhdHVzKTsgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgIH0pOwp9KTsKCnJvdXRlci5nZXQoJy9yZXBvcnRzL3NlYXRpbmcnLCBlbnN1cmVBdXRoZW50aWNhdGVkLCBmdW5jdGlvbiAocmVxLCByZXMpIHsKICBHdWVzdExpc3QuZ2V0U2VhdGluZ1JlcG9ydERhdGEocmVxLnVzZXIuaWQpCiAgICAudGhlbigocmVzdWx0cykgPT4gewogICAgICByZXR1cm4gcmVzLnNlbmQocmVzdWx0cyk7CiAgICB9KQogICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgaWYgKCFfLmlzTmlsKGVycm9yLnN0YXR1cykpIHsgcmV0dXJuIHJlcy5zZW5kKGVycm9yLnN0YXR1cyk7IH0KICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgIH0pOwp9KTsKCnJvdXRlci5wb3N0KCcvcmVwb3J0cy9jdXN0b20nLCBlbnN1cmVBdXRoZW50aWNhdGVkLCBmdW5jdGlvbiAocmVxLCByZXMpIHsKCiAgcmVxLmNoZWNrQm9keSgnbmFtZScpLm5vdEVtcHR5KCk7CiAgcmVxLnNhbml0aXplQm9keSgnbmFtZScpLnRyaW0oKTsKICByZXEuZ2V0VmFsaWRhdGlvblJlc3VsdCgpCiAgICAudGhlbigocmVzdWx0KSA9PiB7CgogICAgICBpZiAoIXJlc3VsdC5pc0VtcHR5KCkpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBlcnJvcjogJ2ludmFsaWQgcGFyYW1zJyB9KTsKICAgICAgfQoKICAgICAgaWYgKHJlcS5ib2R5LmNvbHVtbnMpIHsKICAgICAgICBpZighQXJyYXkuaXNBcnJheShyZXEuYm9keS5jb2x1bW5zKSkgewogICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHsgc3RhdHVzOiA0MDAsIGVycm9yOiAndW5leHBlY3RlZCBwYXJhbXMnIH0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAga25leCgnZ2xfY3VzdG9tX3JlcG9ydHMnKQogICAgICAgIC5yZXR1cm5pbmcoWydpZCcsICAnbmFtZScsICdjb2x1bW5zJ10pCiAgICAgICAgLmluc2VydCh7IHVzZXJfaWQ6IHJlcS51c2VyLmlkLCBuYW1lOiByZXEuYm9keS5uYW1lLCBjb2x1bW5zOiBKU09OLnN0cmluZ2lmeShyZXEuYm9keS5jb2x1bW5zKSwgdG9rZW46IHJhbmRUb2tlbi5nZW5lcmF0ZSg2KX0pCiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocm93KSB7CiAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoeyBjdXN0b21fcmVwb3J0X2lkOiByb3dbMF0uaWQsIG5hbWU6IHJvd1swXS5uYW1lLCBjb2x1bW5zOiByb3dbMF0uY29sdW1ucyB9KTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICAgICAgaWYgKCFfLmlzTmlsKGVycm9yLnN0YXR1cykpIHsgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKGVycm9yLnN0YXR1cyk7IH0KICAgICAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyg1MDApOwogICAgICAgIH0pOwogICAgfSk7Cn0pOwoKcm91dGVyLnB1dCgnL3JlcG9ydHMvY3VzdG9tLzpyZXBvcnRJZCcsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uIChyZXEsIHJlcykgewogIGNvbnN0IHBhcmFtU2NoZW1hID0gewogICAgcmVwb3J0SWQ6IHsKICAgICAgbm90RW1wdHk6IHRydWUKICAgIH0KICB9OwoKICBjb25zdCBib2R5U2NoZW1hID0gewogICAgbmFtZTogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICBjb2x1bW5zOiB7CiAgICAgIG9wdGlvbmFsOiB7CiAgICAgICAgb3B0aW9uczogeyBjaGVja0ZhbHN5OiB0cnVlIH0KICAgICAgfQogICAgfQogIH07CgogIFByb21pc2UuYWxsKFsKICAgIHZhbGlkYXRlUGFyYW1zKHJlcSwgeyBwYXJhbVNjaGVtYSwgYm9keVNjaGVtYSB9KSwKICAgIEd1ZXN0TGlzdC5nZXRDdXN0b21SZXBvcnRQYWdlTWVudShyZXEudXNlci5pZCkKICBdKQogICAgLnRoZW4oZnVuY3Rpb24ocmVzdWx0cykgewogICAgICB2YXIgYm9keSA9IHJlc3VsdHNbMF0uYm9keTsKICAgICAgaWYgKF8uaXNFbXB0eShib2R5KSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IHN0YXR1czogNDAwLCBlcnJvcjogJ3VuZXhwZWN0ZWQgZW1wdHkgcGFyYW1zJyB9KTsKICAgICAgfQoKICAgICAgaWYgKGJvZHkuY29sdW1ucykgewogICAgICAgIGlmKCFBcnJheS5pc0FycmF5KGJvZHkuY29sdW1ucykpIHsKICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IHN0YXR1czogNDAwLCBlcnJvcjogJ3VuZXhwZWN0ZWQgcGFyYW1zJyB9KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnN0IGNvbHMgPSByZXN1bHRzWzFdOwogICAgICB2YXIgY29sX2FyciA9IFtdOwogICAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBjb2xzKSB7CiAgICAgICAgY29sc1twcm9wZXJ0eV0uZm9yRWFjaChmdW5jdGlvbih4KXsKICAgICAgICAgIGNvbF9hcnIucHVzaCh4KTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgLy8gcmVtb3ZlIGFueSBjb2x1bW5zIHdlIGNhbid0IGFjdHVhbGx5CiAgICAgIC8vIHB1dCBpbnRvIGEgcmVwb3J0IHdoZW4gdGhleSBsb2FkIHRoZSBwYWdlCiAgICAgIHZhciBkaWZmID0gXy5kaWZmZXJlbmNlKGJvZHkuY29sdW1ucywgY29sX2Fycik7CiAgICAgIGRpZmYuZm9yRWFjaChmdW5jdGlvbiAoZGlmZl9lbCl7CiAgICAgICAgXy5wdWxsKGJvZHkuY29sdW1ucywgZGlmZl9lbCk7CiAgICAgIH0pOwoKICAgICAgLy8gc3RpY2sgYW55IHZhbGlkIGNvbHVtbnMgYmFjayBpbiB0aGUgYm9keQogICAgICBib2R5LmNvbHVtbnMgPSBKU09OLnN0cmluZ2lmeShib2R5LmNvbHVtbnMpOwoKICAgICAgcmV0dXJuIHsKICAgICAgICByZXBvcnRJZDogcmVzdWx0c1swXS5wYXJhbXMucmVwb3J0SWQsCiAgICAgICAgcGFyYW1zOiBib2R5CiAgICAgIH07CgogICAgfSkKICAgIC50aGVuKCh7IHJlcG9ydElkLCBwYXJhbXMgfSkgPT4gewogICAgICByZXR1cm4ga25leCgnZ2xfY3VzdG9tX3JlcG9ydHMnKQogICAgICAgIC53aGVyZSh7IGlkOiByZXBvcnRJZCwgdXNlcl9pZDogcmVxLnVzZXIuaWQgfSkKICAgICAgICAudXBkYXRlKHBhcmFtcyk7CiAgICB9KQogICAgLnRoZW4oKG51bVJvd3NVcGRhdGVkKSA9PiB7CiAgICAgIGlmIChudW1Sb3dzVXBkYXRlZCA9PT0gMCkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IHN0YXR1czogNDA0LCBlcnJvcjogJ25vIHJlcG9ydCBmb3VuZCcgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlcy5zZW5kKDIwMCk7CiAgICB9KQogICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIGlmICghXy5pc05pbChlcnJvci5zdGF0dXMpKSB7CiAgICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKGVycm9yLnN0YXR1cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDUwMCk7CiAgICB9KTsKfSk7Cgpyb3V0ZXIuZ2V0KCcvcmVwb3J0cy9jdXN0b20vOnJlcG9ydElEJywgZW5zdXJlQXV0aGVudGljYXRlZCwgZnVuY3Rpb24ocmVxLCByZXMpIHsKCiAgY29uc3QgcGFyYW1TY2hlbWEgPSB7CiAgICByZXBvcnRJRDogewogICAgICBub3RFbXB0eTogdHJ1ZQogICAgfQogIH07CgogIHZhbGlkYXRlUGFyYW1zKHJlcSwgeyBwYXJhbVNjaGVtYSB9KQogICAgLnRoZW4oKHsgcGFyYW1zIH0pID0+IHsKICAgICAgaWYgKF8uaXNFbXB0eShwYXJhbXMpKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHsgc3RhdHVzOiA0MDAsIGVycm9yOiAndW5leHBlY3RlZCBlbXB0eSBwYXJhbXMnIH0pOwogICAgICB9CiAgICAgIHJldHVybiBwYXJhbXMucmVwb3J0SUQ7CiAgICB9KQogICAgLnRoZW4oKHJlcG9ydElEKSA9PiB7CiAgICAgIEd1ZXN0TGlzdC5nZXRDdXN0b21SZXBvcnRTZXR0aW5ncyhyZXEudXNlci5pZCwgcmVwb3J0SUQpCiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzdWx0cykgewogICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKHJlc3VsdHMpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICAgIGlmICghXy5pc05pbChlcnJvci5zdGF0dXMpKSB7IHJldHVybiByZXMuc2VuZChlcnJvci5zdGF0dXMpOyB9CiAgICAgICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgICAgICB9KTsKICAgIH0pOwp9KTsKCnJvdXRlci5kZWxldGUoJy9yZXBvcnRzL2N1c3RvbS86cmVwb3J0SWQnLCBlbnN1cmVBdXRoZW50aWNhdGVkLCBmdW5jdGlvbiAocmVxLCByZXMpIHsKICBjb25zdCBwYXJhbVNjaGVtYSA9IHsKICAgIHJlcG9ydElkOiB7CiAgICAgIG5vdEVtcHR5OiB0cnVlCiAgICB9CiAgfTsKCiAgdmFsaWRhdGVQYXJhbXMocmVxLCB7IHBhcmFtU2NoZW1hIH0pCiAgICAudGhlbigoeyBwYXJhbXMgfSkgPT4gewogICAgICBpZiAoXy5pc0VtcHR5KHBhcmFtcykpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBzdGF0dXM6IDQwMCwgZXJyb3I6ICd1bmV4cGVjdGVkIGVtcHR5IHBhcmFtcycgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBwYXJhbXMucmVwb3J0SWQ7CiAgICB9KQogICAgLnRoZW4oKHJlcG9ydElkKSA9PiB7CiAgICAgIHJldHVybiBrbmV4KCdnbF9jdXN0b21fcmVwb3J0cycpCiAgICAgICAgLndoZXJlKHsgaWQ6IHJlcG9ydElkLCB1c2VyX2lkOiByZXEudXNlci5pZCB9KQogICAgICAgIC5kZWxldGUoKTsKICAgIH0pCiAgICAudGhlbigobnVtUm93c0RlbGV0ZWQpID0+IHsKICAgICAgaWYgKG51bVJvd3NEZWxldGVkID09PSAwKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHsgc3RhdHVzOiA0MDQsIGVycm9yOiAnbm8gcmVjb3JkIGlzIGRlbGV0ZWQnIH0pOwogICAgICB9CiAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cygyMDApOwogICAgfSkKICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICBpZiAoIV8uaXNOaWwoZXJyb3Iuc3RhdHVzKSkgewogICAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyhlcnJvci5zdGF0dXMpOwogICAgICB9CiAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyg1MDApOwogICAgfSk7Cn0pOwoKcm91dGVyLmdldCgnL3JlcG9ydHMvbWVudV9zZWxlY3Rpb25zJywgZW5zdXJlQXV0aGVudGljYXRlZCwgZnVuY3Rpb24gKHJlcSwgcmVzKSB7CiAgR3Vlc3RMaXN0LmdldE1lbnVTZWxlY3Rpb25zUmVwb3J0RGF0YShyZXEudXNlci5pZCkKICAgIC50aGVuKChyZXN1bHRzKSA9PiB7CiAgICAgIHJldHVybiByZXMuc2VuZChyZXN1bHRzKTsKICAgIH0pCiAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICBpZiAoIV8uaXNOaWwoZXJyb3Iuc3RhdHVzKSkgeyByZXR1cm4gcmVzLnNlbmQoZXJyb3Iuc3RhdHVzKTsgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgIH0pOwp9KTsKCnJvdXRlci5nZXQoJy9vcGVuLXJlcG9ydHMvOmhhc2hlZGNvZGUnLCBmdW5jdGlvbiAocmVxLCByZXMpIHsKCiAgLy8gRGVjb2RlIHRoZSBoYXNoZWRjb2RlIGZvciBmZXRjaGluZyByaWdodCBkYXRhCiAgdmFyIGhhc2hpZHMgPSBuZXcgSGFzaGlkcygnJywgOCwgJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaMTIzNDU2Nzg5MCcpOwogIHZhciBjb2RlcyA9IGhhc2hpZHMuZGVjb2RlKHJlcS5wYXJhbXMuaGFzaGVkY29kZSk7CiAgdmFyIHVzZXJJZCA9IGNvZGVzWzBdOwogIHZhciByZXBvcnRDb2RlID0gY29kZXNbMV07CiAgdmFyIHJlcG9ydCA9IG51bGw7CgogIHN3aXRjaChyZXBvcnRDb2RlKSB7CiAgICBjYXNlIDE6CiAgICAgIHJlcG9ydCA9IEd1ZXN0TGlzdC5nZXRGbGlnaHRSZXBvcnREYXRhKHVzZXJJZCk7CiAgICAgIGJyZWFrOwogICAgY2FzZSAyOgogICAgICByZXBvcnQgPSBHdWVzdExpc3QuZ2V0SG90ZWxSZXBvcnREYXRhKHVzZXJJZCk7CiAgICAgIGJyZWFrOwogICAgY2FzZSAzOgogICAgICByZXBvcnQgPSBHdWVzdExpc3QuZ2V0QWlybGluZVJlcG9ydERhdGEodXNlcklkKTsKICAgICAgYnJlYWs7CiAgICBjYXNlIDQ6CiAgICAgIHJlcG9ydCA9IEd1ZXN0TGlzdC5nZXRNZW51U2VsZWN0aW9uc1JlcG9ydERhdGEodXNlcklkKTsKICAgICAgYnJlYWs7CiAgICBjYXNlIDU6CiAgICAgIHJlcG9ydCA9IEd1ZXN0TGlzdC5nZXRTZWF0aW5nUmVwb3J0RGF0YSh1c2VySWQpOwogICAgICBicmVhazsKICAgIGNhc2UgNjoKICAgICAgdmFyIHJlcG9ydElkID0gY29kZXNbMl07CiAgICAgIHJlcG9ydCA9IEd1ZXN0TGlzdC5nZXRDdXN0b21SZXBvcnRBbGxEYXRhKHVzZXJJZCwgcmVwb3J0SWQpOwogICAgICBicmVhazsKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyg1MDApOwogIH0KCiAgLy8gRmV0Y2ggZGF0YSBhbmQgcmV0dXJuIHRvIHRoZSBjbGllbnQKICByZXBvcnQudGhlbigocmVzdWx0cykgPT4gewogICAgcmV0dXJuIHJlcy5zZW5kKHJlc3VsdHMpOwogIH0pCiAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICBpZiAoIV8uaXNOaWwoZXJyb3Iuc3RhdHVzKSkgeyByZXR1cm4gcmVzLnNlbmQoZXJyb3Iuc3RhdHVzKTsgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgIH0pOwp9KTsKCnJvdXRlci5nZXQoJy9ob3VzZWhvbGRzLzpob3VzZWhvbGRJZC9ndWVzdHMvdHJhdmVsX2FjY29tbW9kYXRpb25zJywgZW5zdXJlQXV0aGVudGljYXRlZCwgZnVuY3Rpb24gKHJlcSwgcmVzKSB7CiAgY29uc3QgcGFyYW1TY2hlbWEgPSB7CiAgICBob3VzZWhvbGRJZDogewogICAgICBpc0ludDogewogICAgICAgIGVycm9yTWVzc2FnZTogJ0ludmFsaWQgaG91c2Vob2xkIElEJwogICAgICB9CiAgICB9CiAgfTsKCiAgdmFsaWRhdGVQYXJhbXMocmVxLCB7IHBhcmFtU2NoZW1hIH0pCiAgICAudGhlbigoeyBwYXJhbXMgfSkgPT4gewogICAgICBpZiAoXy5pc0VtcHR5KHBhcmFtcykpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBzdGF0dXM6IDQwMCwgZXJyb3I6ICdpbnZhbGlkIGhvdXNlaG9sZCBJRCcgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBwYXJhbXMuaG91c2Vob2xkSWQ7CiAgICB9KQogICAgLnRoZW4oKGhvdXNlaG9sZElkKSA9PiB7CiAgICAgIHJldHVybiBrbmV4KCdnbF9ob3VzZWhvbGRfZGV0YWlscycpCiAgICAgICAgLmpvaW4oJ2dsX2d1ZXN0cycsIHsgJ2dsX2d1ZXN0cy5ob3VzZWhvbGRfZGV0YWlsc19pZCc6ICdnbF9ob3VzZWhvbGRfZGV0YWlscy5pZCcgfSkKICAgICAgICAubGVmdEpvaW4oJ2dsX2ZsaWdodF9kZXRhaWxzJywgeyAnZ2xfZmxpZ2h0X2RldGFpbHMuZ3Vlc3RfaWQnOiAnZ2xfZ3Vlc3RzLmlkJyB9KQogICAgICAgIC5sZWZ0Sm9pbignZ2xfaG90ZWxfZGV0YWlscycsIHsgJ2dsX2hvdGVsX2RldGFpbHMuZ3Vlc3RfaWQnIDogJ2dsX2d1ZXN0cy5pZCcgfSkKICAgICAgICAuc2VsZWN0KAogICAgICAgICAgJ2dsX2d1ZXN0cy5pZCBBUyBndWVzdF9pZCcsCiAgICAgICAgICAnZ2xfZ3Vlc3RzLmZpcnN0X25hbWUgQVMgZmlyc3RfbmFtZScsCiAgICAgICAgICAnZ2xfZ3Vlc3RzLm1pZGRsZV9uYW1lIEFTIG1pZGRsZV9uYW1lJywKICAgICAgICAgICdnbF9ndWVzdHMubGFzdF9uYW1lIEFTIGxhc3RfbmFtZScsCiAgICAgICAgICAnZ2xfaG90ZWxfZGV0YWlscy5ob3RlbF9uYW1lIEFTIGhvdGVsX25hbWUnLAogICAgICAgICAgJ2dsX2hvdGVsX2RldGFpbHMucm9vbV9udW1iZXIgQVMgcm9vbV9udW1iZXInLAogICAgICAgICAgJ2dsX2hvdGVsX2RldGFpbHMuYXJyaXZhbF9kYXRlX3RpbWUgQVMgaG90ZWxfYXJyaXZhbCcsCiAgICAgICAgICAnZ2xfaG90ZWxfZGV0YWlscy5kZXBhcnR1cmVfZGF0ZV90aW1lIEFTIGhvdGVsX2RlcGFydHVyZScsCiAgICAgICAgICAnZ2xfaG90ZWxfZGV0YWlscy5zcGVjaWFsX3JlcXVlc3RzIEFTIGhvdGVsX3NwZWNpYWxfcmVxdWVzdHMnLAogICAgICAgICAgJ2dsX2ZsaWdodF9kZXRhaWxzLmJpcnRoZGF5IEFTIGJpcnRoZGF5JywKICAgICAgICAgICdnbF9mbGlnaHRfZGV0YWlscy5haXJsaW5lIEFTIGFpcmxpbmUnLAogICAgICAgICAgJ2dsX2ZsaWdodF9kZXRhaWxzLmFycml2YWxfZGF0ZV90aW1lIEFTIGZsaWdodF9hcnJpdmFsJywKICAgICAgICAgICdnbF9mbGlnaHRfZGV0YWlscy5kZXBhcnR1cmVfZGF0ZV90aW1lIEFTIGZsaWdodF9kZXBhcnR1cmUnLAogICAgICAgICAgJ2dsX2ZsaWdodF9kZXRhaWxzLmFycml2YWxfZmxpZ2h0X25vIEFTIGFycml2YWxfZmxpZ2h0X251bWJlcicsCiAgICAgICAgICAnZ2xfZmxpZ2h0X2RldGFpbHMuZGVwYXJ0dXJlX2ZsaWdodF9ubyBBUyBkZXBhcnR1cmVfZmxpZ2h0X251bWJlcicsCiAgICAgICAgICAnZ2xfZmxpZ2h0X2RldGFpbHMuZXh0cmFfaW5mbyBBUyBleHRyYV9mbGlnaHRfaW5mbycsCiAgICAgICAgICAnZ2xfZmxpZ2h0X2RldGFpbHMuc3BlY2lhbF9yZXF1ZXN0cyBBUyBmbGlnaHRfc3BlY2lhbF9yZXF1ZXN0cycsCiAgICAgICAgICAnZ2xfZmxpZ2h0X2RldGFpbHMuY2l0aXplbnNoaXAgQVMgY2l0aXplbnNoaXAnLAogICAgICAgICAgJ2dsX2ZsaWdodF9kZXRhaWxzLkZGX25vIEFTIGZyZXF1ZW50X2ZseWVyX251bWJlcicsCiAgICAgICAgICBrbmV4LnJhdygiQ0FTRSBXSEVOIGdsX2ZsaWdodF9kZXRhaWxzLm1hbGVfdHJ1ZSA9IHRydWUgVEhFTiAnbWFsZScgV0hFTiBnbF9mbGlnaHRfZGV0YWlscy5tYWxlX3RydWUgPSBmYWxzZSBUSEVOICdmZW1hbGUnIEVMU0UgbnVsbCBFTkQgQVMgZ2VuZGVyIikKICAgICAgICApCiAgICAgICAgLndoZXJlKHsgJ2dsX2hvdXNlaG9sZF9kZXRhaWxzLmlkJzogaG91c2Vob2xkSWQsICdnbF9ob3VzZWhvbGRfZGV0YWlscy51c2VyX2lkJzogcmVxLnVzZXIuaWQgfSkKICAgICAgICAub3JkZXJCeSgnZ3Vlc3RfaWQnLCAnQVNDJyk7CiAgICB9KQogICAgLnRoZW4oKGRhdGEpID0+IHsKICAgICAgcmV0dXJuIHJlcy5zZW5kKGRhdGEpOwogICAgfSkKICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICBpZiAoIV8uaXNOaWwoZXJyb3Iuc3RhdHVzKSkgewogICAgICAgIHJldHVybiByZXMuc2VuZChlcnJvci5zdGF0dXMpOwogICAgICB9CiAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyg1MDApOwogICAgfSk7Cn0pOwoKcm91dGVyLnB1dCgnL2hvdXNlaG9sZHMvOmhvdXNlaG9sZElkL2d1ZXN0cy86Z3Vlc3RJZC90cmF2ZWwnLCBlbnN1cmVBdXRoZW50aWNhdGVkLCBmdW5jdGlvbiAocmVxLCByZXMpIHsKICBjb25zdCBwYXJhbVNjaGVtYSA9IHsKICAgIGhvdXNlaG9sZElkOiB7CiAgICAgIGlzSW50OiB7CiAgICAgICAgZXJyb3JNZXNzYWdlOiAnSW52YWxpZCBob3VzZWhvbGQgSUQnCiAgICAgIH0KICAgIH0sCiAgICBndWVzdElkOiB7CiAgICAgIGlzSW50OiB7CiAgICAgICAgZXJyb3JNZXNzYWdlOiAnSW52YWxpZCBndWVzdCBJRCcKICAgICAgfQogICAgfQogIH07CgogIGNvbnN0IGJvZHlTY2hlbWEgPSB7CiAgICBiaXJ0aGRheTogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICBhaXJsaW5lOiB7CiAgICAgIG9wdGlvbmFsOiB7CiAgICAgICAgb3B0aW9uczogeyBjaGVja0ZhbHN5OiB0cnVlIH0KICAgICAgfQogICAgfSwKICAgIGZsaWdodF9hcnJpdmFsOiB7CiAgICAgIG9wdGlvbmFsOiB7CiAgICAgICAgb3B0aW9uczogeyBjaGVja0ZhbHN5OiB0cnVlIH0KICAgICAgfQogICAgfSwKICAgIGZsaWdodF9kZXBhcnR1cmU6IHsKICAgICAgb3B0aW9uYWw6IHsKICAgICAgICBvcHRpb25zOiB7IGNoZWNrRmFsc3k6IHRydWUgfQogICAgICB9CiAgICB9LAogICAgYXJyaXZhbF9mbGlnaHRfbnVtYmVyOiB7CiAgICAgIG9wdGlvbmFsOiB7CiAgICAgICAgb3B0aW9uczogeyBjaGVja0ZhbHN5OiB0cnVlIH0KICAgICAgfQogICAgfSwKICAgIGRlcGFydHVyZV9mbGlnaHRfbnVtYmVyOiB7CiAgICAgIG9wdGlvbmFsOiB7CiAgICAgICAgb3B0aW9uczogeyBjaGVja0ZhbHN5OiB0cnVlIH0KICAgICAgfQogICAgfSwKICAgIGV4dHJhX2ZsaWdodF9pbmZvOiB7CiAgICAgIG9wdGlvbmFsOiB7CiAgICAgICAgb3B0aW9uczogeyBjaGVja0ZhbHN5OiB0cnVlIH0KICAgICAgfQogICAgfSwKICAgIGZsaWdodF9zcGVjaWFsX3JlcXVlc3RzOiB7CiAgICAgIG9wdGlvbmFsOiB7CiAgICAgICAgb3B0aW9uczogeyBjaGVja0ZhbHN5OiB0cnVlIH0KICAgICAgfQogICAgfSwKICAgIGNpdGl6ZW5zaGlwOiB7CiAgICAgIG9wdGlvbmFsOiB7CiAgICAgICAgb3B0aW9uczogeyBjaGVja0ZhbHN5OiB0cnVlIH0KICAgICAgfQogICAgfSwKICAgIGZyZXF1ZW50X2ZseWVyX251bWJlcjogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICBnZW5kZXI6IHsKICAgICAgb3B0aW9uYWw6IHsKICAgICAgICBvcHRpb25zOiB7IGNoZWNrRmFsc3k6IHRydWUgfQogICAgICB9CiAgICB9CiAgfTsKCiAgdmFsaWRhdGVQYXJhbXMocmVxLCB7IHBhcmFtU2NoZW1hLCBib2R5U2NoZW1hIH0pCiAgICAudGhlbigoeyBwYXJhbXMsIGJvZHkgfSkgPT4gewogICAgICBpZiAoXy5pc0VtcHR5KGJvZHkpKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHsgc3RhdHVzOiA0MDAsIGVycm9yOiAndW5leHBlY3RlZCBlbXB0eSBwYXJhbXMnIH0pOwogICAgICB9CgogICAgICBjb25zdCBmaWVsZHNNYXAgPSB7CiAgICAgICAgZmxpZ2h0X2Fycml2YWw6ICdhcnJpdmFsX2RhdGVfdGltZScsCiAgICAgICAgZmxpZ2h0X2RlcGFydHVyZTogJ2RlcGFydHVyZV9kYXRlX3RpbWUnLAogICAgICAgIGFycml2YWxfZmxpZ2h0X251bWJlcjogJ2Fycml2YWxfZmxpZ2h0X25vJywKICAgICAgICBkZXBhcnR1cmVfZmxpZ2h0X251bWJlcjogJ2RlcGFydHVyZV9mbGlnaHRfbm8nLAogICAgICAgIGV4dHJhX2ZsaWdodF9pbmZvOiAnZXh0cmFfaW5mbycsCiAgICAgICAgZmxpZ2h0X3NwZWNpYWxfcmVxdWVzdHM6ICdzcGVjaWFsX3JlcXVlc3RzJywKICAgICAgICBmcmVxdWVudF9mbHllcl9udW1iZXI6ICdGRl9ubycsCiAgICAgICAgZ2VuZGVyOiAnbWFsZV90cnVlJwogICAgICB9OwoKICAgICAgY29uc3QgdXBkYXRlUGFyYW1zID0gXy5tYXBLZXlzKGJvZHksICh2YWwsIGtleSkgPT4gewogICAgICAgIHJldHVybiBmaWVsZHNNYXBba2V5XSB8fCBrZXk7CiAgICAgIH0pOwoKICAgICAgaWYgKHVwZGF0ZVBhcmFtcy5tYWxlX3RydWUpIHsKICAgICAgICB1cGRhdGVQYXJhbXMubWFsZV90cnVlID0gKHVwZGF0ZVBhcmFtcy5tYWxlX3RydWUgPT09ICdtYWxlJykgPyB0cnVlIDogZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgaG91c2Vob2xkSWQ6IHBhcmFtcy5ob3VzZWhvbGRJZCwKICAgICAgICBndWVzdElkOiBwYXJhbXMuZ3Vlc3RJZCwKICAgICAgICBwYXJhbXM6IHVwZGF0ZVBhcmFtcwogICAgICB9CiAgICB9KQogICAgLnRoZW4oKHsgaG91c2Vob2xkSWQsIGd1ZXN0SWQsIHBhcmFtcyB9KSA9PiB7CiAgICAgIC8vIFVwc2VydDogSU5TRVJUIG9yIFVQREFURQogICAgICBjb25zdCB1cGRhdGVTcWwgPSBfLmtleXMocGFyYW1zKS5tYXAoa2V5ID0+IGtuZXgucmF3KCc/PyA9IEVYQ0xVREVELj8/JywgW2tleSwga2V5XSkudG9TdHJpbmcoKSkuam9pbignLCAnKTsKICAgICAgY29uc3QgaW5zZXJ0U3FsID0ga25leCgnZ2xfZmxpZ2h0X2RldGFpbHMnKQogICAgICAgIC5pbnNlcnQoCiAgICAgICAgICBfLmRlZmF1bHRzKAogICAgICAgICAgICBwYXJhbXMsCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBndWVzdF9pZDoga25leCgnZ2xfaG91c2Vob2xkX2RldGFpbHMnKQogICAgICAgICAgICAgICAgLmpvaW4oJ2dsX2d1ZXN0cycsIHsgJ2dsX2d1ZXN0cy5ob3VzZWhvbGRfZGV0YWlsc19pZCc6ICdnbF9ob3VzZWhvbGRfZGV0YWlscy5pZCcgfSkKICAgICAgICAgICAgICAgIC5zZWxlY3QoJ2dsX2d1ZXN0cy5pZCcpCiAgICAgICAgICAgICAgICAud2hlcmUoewogICAgICAgICAgICAgICAgICAnZ2xfaG91c2Vob2xkX2RldGFpbHMuaWQnOiBob3VzZWhvbGRJZCwKICAgICAgICAgICAgICAgICAgJ2dsX2hvdXNlaG9sZF9kZXRhaWxzLnVzZXJfaWQnOiByZXEudXNlci5pZCwKICAgICAgICAgICAgICAgICAgJ2dsX2d1ZXN0cy5pZCc6IGd1ZXN0SWQKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAubGltaXQoMSkKICAgICAgICAgICAgfQogICAgICAgICAgKQogICAgICAgICkudG9TdHJpbmcoKTsKICAgICAgY29uc3QgdXBzZXJ0U3FsID0ga25leC5yYXcoYCBPTiBDT05GTElDVCAoZ3Vlc3RfaWQpIERPIFVQREFURSBTRVQgJHt1cGRhdGVTcWx9IFJFVFVSTklORyBpZDtgKS50b1N0cmluZygpOwogICAgICBjb25zdCBzcWwgPSBgJHtpbnNlcnRTcWx9ICR7dXBzZXJ0U3FsfWA7CgogICAgICByZXR1cm4ga25leC5yYXcoc3FsKTsKICAgIH0pCiAgICAudGhlbigoeyByb3dzOiBbcmVzdWx0XSB9KSA9PiB7CiAgICAgIGlmIChfLmlzTmlsKHJlc3VsdCkpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBzdGF0dXM6IDQyMiwgZXJyb3I6ICdlcnJvciBwcm9jZXNzaW5nIHRoZSByZWNvcmQnIH0pOwogICAgICB9CiAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cygyMDApOwogICAgfSkKICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICBpZiAoIV8uaXNOaWwoZXJyb3Iuc3RhdHVzKSkgewogICAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyhlcnJvci5zdGF0dXMpOwogICAgICB9CiAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyg1MDApOwogICAgfSk7Cn0pOwoKcm91dGVyLnB1dCgnL2hvdXNlaG9sZHMvOmhvdXNlaG9sZElkL2d1ZXN0cy86Z3Vlc3RJZC9hY2NvbW1vZGF0aW9uJywgZW5zdXJlQXV0aGVudGljYXRlZCwgZnVuY3Rpb24gKHJlcSwgcmVzKSB7CiAgY29uc3QgcGFyYW1TY2hlbWEgPSB7CiAgICBob3VzZWhvbGRJZDogewogICAgICBpc0ludDogewogICAgICAgIGVycm9yTWVzc2FnZTogJ0ludmFsaWQgaG91c2Vob2xkIElEJwogICAgICB9CiAgICB9LAogICAgZ3Vlc3RJZDogewogICAgICBpc0ludDogewogICAgICAgIGVycm9yTWVzc2FnZTogJ0ludmFsaWQgZ3Vlc3QgSUQnCiAgICAgIH0KICAgIH0KICB9OwoKICBjb25zdCBib2R5U2NoZW1hID0gewogICAgaG90ZWxfbmFtZTogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICByb29tX251bWJlcjogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICBob3RlbF9hcnJpdmFsOiB7CiAgICAgIG9wdGlvbmFsOiB7CiAgICAgICAgb3B0aW9uczogeyBjaGVja0ZhbHN5OiB0cnVlIH0KICAgICAgfQogICAgfSwKICAgIGhvdGVsX2RlcGFydHVyZTogewogICAgICBvcHRpb25hbDogewogICAgICAgIG9wdGlvbnM6IHsgY2hlY2tGYWxzeTogdHJ1ZSB9CiAgICAgIH0KICAgIH0sCiAgICBob3RlbF9zcGVjaWFsX3JlcXVlc3RzOiB7CiAgICAgIG9wdGlvbmFsOiB7CiAgICAgICAgb3B0aW9uczogeyBjaGVja0ZhbHN5OiB0cnVlIH0KICAgICAgfQogICAgfQogIH07CgogIHZhbGlkYXRlUGFyYW1zKHJlcSwgeyBwYXJhbVNjaGVtYSwgYm9keVNjaGVtYSB9KQogICAgLnRoZW4oKHsgcGFyYW1zLCBib2R5IH0pID0+IHsKICAgICAgaWYgKF8uaXNFbXB0eShib2R5KSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7IHN0YXR1czogNDAwLCBlcnJvcjogJ3VuZXhwZWN0ZWQgZW1wdHkgcGFyYW1zJyB9KTsKICAgICAgfQoKICAgICAgY29uc3QgZmllbGRzTWFwID0gewogICAgICAgIGhvdGVsX2Fycml2YWw6ICdhcnJpdmFsX2RhdGVfdGltZScsCiAgICAgICAgaG90ZWxfZGVwYXJ0dXJlOiAnZGVwYXJ0dXJlX2RhdGVfdGltZScsCiAgICAgICAgaG90ZWxfc3BlY2lhbF9yZXF1ZXN0czogJ3NwZWNpYWxfcmVxdWVzdHMnCiAgICAgIH07CgogICAgICBjb25zdCB1cGRhdGVQYXJhbXMgPSBfLm1hcEtleXMoYm9keSwgKHZhbCwga2V5KSA9PiB7CiAgICAgICAgcmV0dXJuIGZpZWxkc01hcFtrZXldIHx8IGtleTsKICAgICAgfSk7CgogICAgICBpZiAodXBkYXRlUGFyYW1zLm1hbGVfdHJ1ZSkgewogICAgICAgIHVwZGF0ZVBhcmFtcy5tYWxlX3RydWUgPSAodXBkYXRlUGFyYW1zLm1hbGVfdHJ1ZSA9PT0gJ21hbGUnKSA/IHRydWUgOiBmYWxzZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBob3VzZWhvbGRJZDogcGFyYW1zLmhvdXNlaG9sZElkLAogICAgICAgIGd1ZXN0SWQ6IHBhcmFtcy5ndWVzdElkLAogICAgICAgIHBhcmFtczogdXBkYXRlUGFyYW1zCiAgICAgIH0KICAgIH0pCiAgICAudGhlbigoeyBob3VzZWhvbGRJZCwgZ3Vlc3RJZCwgcGFyYW1zIH0pID0+IHsKICAgICAgLy8gVXBzZXJ0OiBJTlNFUlQgb3IgVVBEQVRFCiAgICAgIGNvbnN0IHVwZGF0ZVNxbCA9IF8ua2V5cyhwYXJhbXMpLm1hcChrZXkgPT4ga25leC5yYXcoJz8/ID0gRVhDTFVERUQuPz8nLCBba2V5LCBrZXldKS50b1N0cmluZygpKS5qb2luKCcsICcpOwogICAgICBjb25zdCBpbnNlcnRTcWwgPSBrbmV4KCdnbF9ob3RlbF9kZXRhaWxzJykKICAgICAgICAuaW5zZXJ0KAogICAgICAgICAgXy5kZWZhdWx0cygKICAgICAgICAgICAgcGFyYW1zLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgZ3Vlc3RfaWQ6IGtuZXgoJ2dsX2hvdXNlaG9sZF9kZXRhaWxzJykKICAgICAgICAgICAgICAgIC5qb2luKCdnbF9ndWVzdHMnLCB7ICdnbF9ndWVzdHMuaG91c2Vob2xkX2RldGFpbHNfaWQnOiAnZ2xfaG91c2Vob2xkX2RldGFpbHMuaWQnIH0pCiAgICAgICAgICAgICAgICAuc2VsZWN0KCdnbF9ndWVzdHMuaWQnKQogICAgICAgICAgICAgICAgLndoZXJlKHsKICAgICAgICAgICAgICAgICAgJ2dsX2hvdXNlaG9sZF9kZXRhaWxzLmlkJzogaG91c2Vob2xkSWQsCiAgICAgICAgICAgICAgICAgICdnbF9ob3VzZWhvbGRfZGV0YWlscy51c2VyX2lkJzogcmVxLnVzZXIuaWQsCiAgICAgICAgICAgICAgICAgICdnbF9ndWVzdHMuaWQnOiBndWVzdElkCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmxpbWl0KDEpCiAgICAgICAgICAgIH0KICAgICAgICAgICkKICAgICAgICApLnRvU3RyaW5nKCk7CiAgICAgIGNvbnN0IHVwc2VydFNxbCA9IGtuZXgucmF3KGAgT04gQ09ORkxJQ1QgKGd1ZXN0X2lkKSBETyBVUERBVEUgU0VUICR7dXBkYXRlU3FsfSBSRVRVUk5JTkcgaWQ7YCkudG9TdHJpbmcoKTsKICAgICAgY29uc3Qgc3FsID0gYCR7aW5zZXJ0U3FsfSAke3Vwc2VydFNxbH1gOwoKICAgICAgcmV0dXJuIGtuZXgucmF3KHNxbCk7CiAgICB9KQogICAgLnRoZW4oKHsgcm93czogW3Jlc3VsdF0gfSkgPT4gewogICAgICBpZiAoXy5pc05pbChyZXN1bHQpKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHsgc3RhdHVzOiA0MjIsIGVycm9yOiAnZXJyb3IgcHJvY2Vzc2luZyB0aGUgcmVjb3JkJyB9KTsKICAgICAgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoMjAwKTsKICAgIH0pCiAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgaWYgKCFfLmlzTmlsKGVycm9yLnN0YXR1cykpIHsKICAgICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoZXJyb3Iuc3RhdHVzKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNTAwKTsKICAgIH0pOwp9KTsKCnJvdXRlci5nZXQoJy9yZXBvcnRzL2N1c3RvbS1yZXBvcnQtZGF0YScsIGVuc3VyZUF1dGhlbnRpY2F0ZWQsIGZ1bmN0aW9uKHJlcSwgcmVzKSB7CiAgR3Vlc3RMaXN0LmdldEN1c3RvbVJlcG9ydEJhc2VEYXRhKHJlcS51c2VyLmlkKQogICAgLnRoZW4oKHJlc3VsdHMpID0+IHsKICAgICAgcmV0dXJuIHJlcy5zZW5kKHJlc3VsdHMpOwogICAgfSkKICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikgewogICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgaWYgKCFfLmlzTmlsKGVycm9yLnN0YXR1cykpIHsgcmV0dXJuIHJlcy5zZW5kKGVycm9yLnN0YXR1cyk7IH0KICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDUwMCk7CiAgICB9KTsKfSk7Cgpyb3V0ZXIuZ2V0KCcvcmVwb3J0cy9jdXN0b20tcmVwb3J0LWFsbC1kYXRhLzpyZXBvcnRJZCo/JywgZW5zdXJlQXV0aGVudGljYXRlZCwgZnVuY3Rpb24ocmVxLCByZXMpIHsKICBHdWVzdExpc3QuZ2V0Q3VzdG9tUmVwb3J0QWxsRGF0YShyZXEudXNlci5pZCwgcmVxLnBhcmFtcy5yZXBvcnRJZCkKICAgIC50aGVuKChyZXN1bHRzKSA9PiB7CiAgICAgIHJldHVybiByZXMuc2VuZChyZXN1bHRzKTsKICAgIH0pCiAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgIGlmICghXy5pc05pbChlcnJvci5zdGF0dXMpKSB7IHJldHVybiByZXMuc2VuZChlcnJvci5zdGF0dXMpOyB9CiAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyg1MDApOwogICAgfSk7Cn0pOwoKcm91dGVyLmdldCgnL3JlcG9ydHMvY3VzdG9tLXJlcG9ydC1saXN0JywgZW5zdXJlQXV0aGVudGljYXRlZCwgZnVuY3Rpb24gKHJlcSwgcmVzKSB7CiAgR3Vlc3RMaXN0LmdldEN1c3RvbVJlcG9ydExpc3QocmVxLnVzZXIuaWQpCiAgICAudGhlbigocmVzdWx0cykgPT4gewogICAgICByZXR1cm4gcmVzLnNlbmQoeyJyZXBvcnRzIjpyZXN1bHRzfSk7CiAgICB9KQogICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgaWYgKCFfLmlzTmlsKGVycm9yLnN0YXR1cykpIHsgcmV0dXJuIHJlcy5zZW5kKGVycm9yLnN0YXR1cyk7IH0KICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDUwMCk7CiAgICB9KTsKfSk7CgoKCm1vZHVsZS5leHBvcnRzID0gcm91dGVyOwo=</text>
      </register>
      <register name="9" type="2">
        <text encoding="base64">ICAgICAgICAK</text>
      </register>
      <register name=":" type="4">
        <text>noh</text>
      </register>
    </registers>
    <search>
      <last-search encoding="base64">XDx1cGRhdGVMYXN0QWN0aXZlXD4=</last-search>
      <last-offset />
      <last-pattern encoding="base64">XDx1cGRhdGVMYXN0QWN0aXZlXD4=</last-pattern>
      <last-replace>:</last-replace>
      <last-substitute>inde</last-substitute>
      <last-dir>-1</last-dir>
      <show-last>false</show-last>
    </search>
    <history>
      <history-search>
        <entry>budgetData</entry>
        <entry>date</entry>
        <entry>ng</entry>
        <entry>font-size</entry>
        <entry encoding="base64">Jg==</entry>
        <entry>7.0</entry>
        <entry>php7.1</entry>
        <entry>php7.0</entry>
        <entry encoding="base64">Jjo=</entry>
        <entry>title</entry>
        <entry>dir</entry>
        <entry>fun</entry>
        <entry encoding="base64">XDxyZWRpcmVjdFRvTG9naW5cPg==</entry>
        <entry>fb</entry>
        <entry>sec</entry>
        <entry>name</entry>
        <entry>inde</entry>
        <entry>re</entry>
        <entry>receiver</entry>
        <entry encoding="base64">XDx1cGRhdGVMYXN0QWN0aXZlXD4=</entry>
      </history-search>
      <history-cmd>
        <entry>220,228y</entry>
        <entry encoding="base64">JzwsJz5ub2g=</entry>
        <entry>set rnu</entry>
        <entry>29y</entry>
        <entry>Noh</entry>
        <entry>232y</entry>
        <entry>6d</entry>
        <entry>5d</entry>
        <entry encoding="base64">JzwsJz5zLyYvL2c=</entry>
        <entry encoding="base64">JzwsJz5zLzcuMC83LjEvZw==</entry>
        <entry encoding="base64">JzwsJz5zL3BocDcuMS9waHAvZw==</entry>
        <entry encoding="base64">JzwsJz5zL3BocDcuMC9waHA3LjEvZw==</entry>
        <entry>w</entry>
        <entry encoding="base64">JzwsJz5zLyY6LzovZw==</entry>
        <entry>80d</entry>
        <entry>46d</entry>
        <entry>12y</entry>
        <entry>8d</entry>
        <entry>14,16y</entry>
        <entry>noh</entry>
      </history-cmd>
      <history-expr />
      <history-input />
    </history>
    <shortcut-conflicts>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed D</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed N</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed V</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed F</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed B</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed E</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed G</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed H</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed M</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed T</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed W</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed P</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed O</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed R</text>
      </shortcut-conflict>
    </shortcut-conflicts>
  </component>
</application>